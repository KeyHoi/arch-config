define("Viva.Controls/Controls/Base/Viva.ExtensibleControl",["require","exports","f","o","$","./Viva.Base"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var o=(function(){function n(){}return n.prototype.setInstance=function(n){this._widget=n},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},n})(),t,e;n.Extension=o;t=(function(n){function t(t){t===void 0&&(t={});n.call(this);this.extensions=t.extensions||[]}return __extends(t,n),t})(f.ViewModel);n.ViewModel=t;e=(function(n){function f(i,r,f){n.call(this,i,r,u.extend({viewModelType:t},f));this._initializePlugins(this.options);this._addExtensionClasses()}return __extends(f,n),f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._removeExtensionClasses())},r.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.getPlugin=function(n){if(this.options.
extensions)return i.find(this.options.extensions,(function(t){return t.getName()===n}))},f.prototype._initializePlugins=function(n){var i=this,t=[];this._loadPlugins(n.extensions,t);n.extensions=t;n.extensions.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));n.extensions.forEach((function(n){n.setInstance(i)}))},f.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this.options.extensions.forEach((function(t){var u=t[n];u&&i.push(u.apply(t,r))})),i},f.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies()||[],f=u.filter((function(i){return!n.some((function(n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i._loadPlugins(u,t)}))},f.prototype._addExtensionClasses=function()
{var n=this;this.options.extensions.forEach((function(t){n.element.addClass(t.getName())}))},f.prototype._removeExtensionClasses=function(){var n=this;this.options.extensions.forEach((function(t){n.element.removeClass(t.getName())}))},f})(f.Widget);n.Widget=e})(e||(e={})),e}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers",["require","exports","u"],(function(n,t,i){"use strict";var r;return (function(n){function o(n,i,r){var u=n.charCodeAt(0);return t[n]||(t[n]="&#"+(i?0:r?(u-55296)*1024+n.charCodeAt(1)- -9216:u)+";")}function r(n){return n===null}function u(n){return n===i}function s(n){return r(n)||u(n)}function f(n){return n!==i&&n!==null?String(n).replace(e,o):""}function h(n){return f(n)}function c(n,t,i){return n.apply(this,[t].concat(i))}var e=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"};n.isNull=r;n.isUndefined=u;n.isNullOrUndefined=s;n.htmlEncode=
f;n.attributeEncode=h;n.callFormatter=c})(r||(r={})),r}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid table tbody td img.azc-grid-formatters-icon{margin-right:6px;display:flex}.azc-grid .azc-grid-formatters-sprite{position:relative;overflow:hidden;display:inline-block;margin-right:6px;vertical-align:middle}.azc-grid .azc-grid-formatters-sprite img{position:absolute}")}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxc-percent-formatter{white-space:nowrap;min-height:5px;min-width:5px}.fxc-percent-formatter .fxc-percent-formatter-container{overflow:hidden;width:100%;position:relative;padding:0}.fxc-percent-formatter .fxc-percent-formatter-value{background-color:#00bcf2;height:19px;position:absolute;left:0;display:inline}.fxc-percent-formatter .fxc-percent-formatter-background{width:100%;height:19px;background-color:transparent}.fxc-percent-formatter .fxc-percent-formatter-bottom-bar{height:5px;margin-top:28px}.fxc-percent-formatter .fxc-percent-formatter-top-bar{height:5px;margin-bottom:28px}.fxc-percent-formatter .fxc-percent-formatter-text{position:absolute;left:1px;top:1px;display:inline;margin-top:7px}.fxc-percent-formatter .fxc-percent-formatter-notext{display:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters",["require","exports","a","ko","../../../Util/Viva.DateUtil","./Viva.Grid1.Formatters.Helpers","MsPortalFx/Globalization","MsPortalImpl/Base/Base.ImplUtils","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){function nt(t,i){var s,l;return typeof t=="string"?(w.assert(!1,"String formatters are being deprecated. Use Intl.DateTimeFormatOptions instead. Format string: {0}".format(t)),l=function(n,t){return u.toString(n,t)}):l=function(t,r){var u="",f,s;try{u=e.DateTimeFormat.create(r).format(t)}catch(h){f="IntlPolyfill loaded: "+!!window.IntlPolyfill+"; given format: "+JSON.stringify(r)+"; Date: "+t.toString();isNaN(t.getTime())?(s=new o.ProvenanceContainer(null,n,i),s.log(2,f,{})):w.error(f);u=t.toString()}return u},s=function(n){var u=
r.unwrap(n),i=k(u),e=c.call(arguments,1);return i?f.callFormatter(h,l(i,t),e):""},a(s,k,s)}function tt(n){var i=c.call(arguments,1),u=i[0],t=r.unwrap(n),o=!p(u)&&!p(u.cssClass)?u.cssClass:"azc-text-primary",e=" class='"+o+"'";return t&&!f.isUndefined(t.text)&&!f.isUndefined(t.uri)?"<a"+e+" href='"+f.attributeEncode(f.callFormatter(s,t.uri,i))+"'"+(t.target?" target='"+f.attributeEncode(f.callFormatter(s,t.target,i))+"'":"")+">"+f.callFormatter(h,t.text,i)+"<\/a>":"<a"+e+" href='"+f.attributeEncode(f.callFormatter(s,t,i))+"'>"+f.callFormatter(h,t,i)+"<\/a>"}function l(n){var i=c.call(arguments,1),t=r.unwrap(n),u=t&&!f.isUndefined(t.text)&&!f.isUndefined(t.uri)?"<img class='"+b+"' src='"+f.attributeEncode(f.callFormatter(s,t.uri,i))+"' alt='' /><span class='fx-grid-formatters-icon-text'>"+f.callFormatter(h,t.text,i)+"<\/span>":"<img class='"+b+"' src='"+f.attributeEncode(f.callFormatter(s,t,i))+"' alt='' />";return"<span class='fx-grid-formatters-icon'>"+u+"<\/span>"}function it(n){return function(
t){var u=c.call(arguments,1),i=r.unwrap(t);if(f.isNullOrUndefined(n[i])){if(n["##DEFAULT##"])return i=h(i),f.callFormatter(l,n["##DEFAULT##"].text?{uri:n["##DEFAULT##"].uri,text:n["##DEFAULT##"].text.replace(/##DEFAULT##/g,i)}:n["##DEFAULT##"],u)}else return f.callFormatter(l,n[i],u);return""}}function rt(n){return function(t){var u=c.call(arguments,1),i=r.unwrap(t),b="",v="",k=0,o,y,a,l,p,d,g,w,nt;n&&(n.backgroundColor&&(b="msportalfx-bgcolor-"+n.backgroundColor),n.barColorDefault&&(v="msportalfx-bgcolor-"+n.barColorDefault),n.barColorKey&&u[0].item&&u[0].item[n.barColorKey]&&(y=r.unwrap(u[0].item[n.barColorKey]),y&&(v="msportalfx-bgcolor-"+y)),n.textKey&&(o=u[0].item&&u[0].item[n.textKey]?r.unwrap(u[0].item[n.textKey]):""),n.textLocation&&(k=n.textLocation));a="fxc-percent-formatter-text";l="";switch(k){case 1:l=" fxc-percent-formatter-bottom-bar";break;case 2:l=" fxc-percent-formatter-top-bar";break;case 0:default:a=null}return(isNaN(i)||i instanceof Date)&&(i=0),p="",a&&(n.textKey||
(d=i/100,g=e.NumberFormat.create({style:"percent"}),o=g.format(d)),o=f.callFormatter(h,o,u),p="<div class='"+a+"'>"+o+"<\/div>"),i=Math.min(100,Math.max(0,i)),w=" min-width: 1px;",i===0&&(w=""),nt="<div class='azc-control fxc-percent-formatter' data-control='true' role='presentation' aria-atomic='true' aria-valuemin='0' aria-valuemax='100' aria-live='polite' aria-valuenow='"+i+"'><div class='fxc-percent-formatter-container'><div class='fxc-percent-formatter-value"+l+" "+v+"' style='width: "+i+"%;"+w+"'><\/div>"+p+"<div class='fxc-percent-formatter-background"+l+" "+b+"'><\/div><\/div><\/div>",f.callFormatter(s,nt,u)}}function ut(n){var t=v(n);return function(n){var i=c.call(arguments,1),u=r.unwrap(n);return f.callFormatter(h,t(u),i)}}function ft(n,i){return function(u){var o=c.call(arguments,1),e=r.unwrap(u),h=f.isNullOrUndefined(n[e]),l=h?"":f.attributeEncode(t.html(n[e].attribute)).replace(" ","_"),a=h?"":f.callFormatter(t.text,n[e].text,o);return"<div class='azc-grid-formatters-sprite "+
l+"'><img src='"+f.attributeEncode(f.callFormatter(s,i,o))+"' alt='' /><\/div>"+a}}function et(n){return function(t){var i=r.unwrap(t);return typeof i!="number"?i.toString():n?e.NumberFormat.create(n).format(i):e.NumberFormat.format(i)}}function ot(n,t){return function(i,u){var f,e=[],o=r.bindingHandlers.vivaControl.registerCallback((function(){return f||r.ignoreDependencies((function(){return f={template:n,data:t(e,i,u),disposables:e}}))}));return"<div class='azc-vivaControl' data-bind='vivaControl: \""+o+"\"'>"+n+"<\/div>"}}function a(n,t,i){if(!n)throw new Error("Display formatter has to be provided to create any formatters bundle.");var r=function(t,i){return n(t,i)};return t&&(r.sortFormatter=typeof t=="function"?t:v(t)),i&&(r.filterFormatter=typeof i=="function"?i:v(i)),r}function st(n){return a(n,n,n)}function ht(n){return g[n]}function v(n){return function(t){return f.isNullOrUndefined(n[t])?n["##DEFAULT##"]?n["##DEFAULT##"]:t:n[t]}}function k(n){var t,i;switch(typeof n){case"number":
t=new Date(n);break;case"string":i=u.parse(n);isNaN(i)||(t=new Date(i));break;case"object":n!==null&&n.constructor===Date&&(t=n)}return t}function s(n){var t=r.unwrap(n);return f.isNullOrUndefined(t)?"":t+""}function h(n){var t=r.unwrap(n);return f.isNullOrUndefined(t)?"":f.htmlEncode(t+"")}var y=MsPortalFx,d=y.Base.Diagnostics,p=y.isNullOrUndefined,c=i.prototype.slice,w=d.createLog(n),g={},b="azc-grid-formatters-icon";t.date=nt;t.uri=tt;t.icon=l;t.iconLookup=it;t.percentageBar=rt;t.textLookup=ut;t.spriteLookup=ft;t.numberFormat=et;t.htmlBindings=ot;t.bundle=a;t.defaultAll=st;t._callBackLookup=ht;t.html=s;t.text=h})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid table caption,.azc-grid.azc-grid-headerHidden thead{display:none}.azc-grid{position:relative;font-size:12px}.azc-grid .azc-grid-container{overflow-x:auto;overflow-y:visible}.azc-grid .azc-grid-cell-ellipse,.azc-grid table td,.azc-grid table thead tr th .azc-grid-header-wrapper span,.azc-grid table thead tr th span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cellContent,.azc-grid .azc-vivaControl{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cell-fullheight{height:100%}.azc-grid .azc-grid-empty td{border-top-style:solid;border-top-width:1px}.azc-grid table{width:100%;border:0;background-color:transparent;table-layout:fixed;border-spacing:0}.azc-grid table tbody:last-child tr:last-child td,.azc-grid table td{border-bottom-width:1px;border-bottom-style:solid}.azc-grid table td .azc-dropdown,.azc-grid table thead tr th .azc-grid-header-wrapper .azc-grid-headerlabel{display:block}.azc-grid table td:first-of-type,.azc-grid table th:first-child{padding-left:7px}.azc-grid table th:first-child{padding-left:0}.azc-grid table thead tr th{text-transform:uppercase;text-align:left;font-size:10px;padding:0;height:40px;position:relative;font-family:az_ea_font,wf_segoe-ui_bold,"Segoe UI Bold","Segoe WP Bold","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif;line-height:38px}.azc-grid table thead tr th a{position:relative}.azc-grid table thead tr th .azc-grid-header-wrapper{padding:1px 0 1px 10px;position:relative}.azc-grid table td{padding:1px 0 1px 10px;height:33px}.azc-grid table td .azc-button,.azc-grid table td .azc-dropdown,.azc-grid table td .azc-editableCombo,.azc-grid table td .azc-fileUpload,.azc-grid table td .azc-optionPicker,.azc-grid table td button,.azc-grid table td input,.azc-grid table td select,.azc-grid table td textarea{font-size:12px!important}.azc-grid table .azc-grid-row:first-of-type td{border-top-width:1px;border-top-style:solid}.azc-grid a img{border:0}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td.azc-br-muted,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td.azc-br-muted{border-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:first-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:first-of-type{border-left-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:last-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:last-of-type{border-right-color:#00bcf2}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1",["require","exports","f","o","ko","$","../../../Util/Viva.TemplateEngine","../../Base/Viva.ExtensibleControl","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","./Viva.Grid1.Formatters","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function d(n){return n?"true":"false"}var g=i,t=jQuery,p="azc-grid",w="azc-grid-headerHidden",a="azc-grid-selectableRow",b="azc-grid-editableRow",f="azc-br-muted",nt="<!-- ko template: 'table' --><!-- /ko -->",tt="<div class='azc-grid-container "+f+"'>"+("<div class='azc-grid-tableContainer "+f+"'>")+("<div class='azc-grid-tableScrollContainer "+f+"'>")+"<!-- ko if: data.columns().length --><table class='azc-grid-tableHeader' role='presentation'><caption data-bind='text: data.summary'><\/caption><!-- ko template: 'header' --><!-- /ko --><\/table><div class='azc-grid-tableContent'><table class='azc-grid-full' role='presentation'><!-- ko template: 'colgroup' --><!-- /ko --><!-- ko template: 'body' --><!-- /ko --><\/table><\/div><!-- /ko --><\/div><\/div><label aria-live='polite' aria-atomic='true' class='fxs-hide-accessible-label' data-bind='text: $ctl._ariaLive'><\/label><\/div>",
it="<!-- ko template: 'colgroup' --><!-- /ko --><thead><tr role='row'><!-- ko template: { name: \"headerCell\", foreach: data.columns } --><!-- /ko --><\/tr><\/thead>",rt='<colgroup><!-- ko template: { name: "headerColumn", foreach: data.columns } --><!-- /ko --><\/colgroup>',ut='<col data-bind=\'attr: { "class": "col" + $index() }, style: { width: width }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }\' />',ft="<th scope='col' role='presentation' aria-readonly='true' data-bind='attr: { \"class\": \"azc-grid-column-header \" + cssClass}, css: { \"azc-collapsed-hidden\": $data.hiddenInCollapsed }'><div class='azc-grid-header-wrapper'><!-- ko template: \"headerCellContent\" --><!-- /ko --><\/div><\/th>",et="<span role='columnheader' class='azc-grid-headerlabel' data-bind='text: name, attr: { id: columnId, \"aria-hidden\": $ctl._ariaHiddenColumnHeader($data) }'><\/span>",ot="<!-- ko template: { name: ko.pureComputed(function () { return data.loading() ? 'templateLoading' : ($ctl._showNoRows() ? 'bodyNoItems' : 'bodyCore'); }) } --><!-- /ko -->",
st="<tbody class='azc-grid-groupdata' role='rowgroup'><!-- ko template: { name: 'bodyRows', foreach: data.items } --><!-- /ko --><\/tbody>",ht="<tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row'><td role='gridcell' class='"+f+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody>",ct="<tbody role='rowgroup' class='azc-grid-empty'><tr role='row'><td role='gridcell' class='"+f+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }'>"+c.Grid.loading+"<\/td><\/tr><\/tbody>",lt="<!-- ko template: { name: 'bodyRowsCore', data: $ctl.getRowMetadata($data), context: function (metadata) { return { $disabled: metadata.disabled || $disabled }; } } --><!-- /ko -->",at='<tr role=\'row\' data-bind=\'attr: { "class": "azc-grid-row " + cssClass(), "aria-label": $ctl._getRowAriaLabel($data) && ariaLabel(), "aria-rowindex": $ctl.getRowIndex($index()) }\'><!-- ko template: { name: \'bodyCell\', foreach: $vm.columns } --><!-- /ko --><\/tr>',
vt='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": "azc-grid-cell '+f+' " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : ""), "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1, "aria-rowindex": $ctl.getRowIndex($parentContext.$index()) }\'><\/td>',yt="<div class='azc-grid-cellContent' data-bind='css: { \"azc-grid-cell-ellipse\": $data.enableEllipse, \"azc-grid-cell-fullheight\": $data.fullHeight }, trustedHtml: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)'><\/div>",pt=0,l,k,v,y;(function(n){n[n.None=0]="None";n[n.Alt=1]="Alt";n[n.Meta=2]="Meta";n[n.Shift=4]="Shift";n[n.Ctrl=8]="Ctrl"})(n.ModifierKeys||(n.ModifierKeys={}));l=n.ModifierKeys;k=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(o.Extension);n.Extension=
k;v=(function(n){function i(){n.apply(this,arguments);this.summary=u.observable();this.showHeader=!0;this.columns=u.observableArray();this.items=u.observableArray();this.noRowsMessage=u.observable();this.events=t.noop;this.uri={};this.text={};this.sortByList=u.observableArray()}return __extends(i,n),i})(o.ViewModel);n.ViewModel=v;y=(function(n){function f(r,f,o){var s=this,y,h,l;n.call(this,r,f,t.extend({viewModelType:v},o));this._ariaLive=u.observable("");this._readLoading=!1;this.id="grid1"+i.getUniqueId();this.templateEngine=new e.HtmlTemplateEngine;this._extensionTrigger("beforeCreate");this._showNoRows=u.pureComputed((function(){if(!s.options.items)return!0;var n=s.options.items(),t=n&&n.length||0,i=s._extensionTrigger("modifyRowNumber");return i.forEach((function(n){t+=n})),t===0}));this._setTemplates();y=this.getPlugin(a);this.element.addClass(p).attr({role:"grid","aria-multiselectable":d(y&&!!y._multiselect),"aria-readonly":d(!this.getPlugin(b)),id:this.id}).html(nt);this.options.columns.
subscribeAndRun(this.ltm,(function(n){s.element.attr("aria-colcount",n.length)}));h=this._extensionTrigger("getTotalItems").filter((function(n){return!!n}));h.length===1?h[0].subscribeAndRun(this.ltm,(function(n){s.element.attr("aria-rowcount",n)})):h.length===0?this.options.items.subscribeAndRun(this.ltm,(function(n){s.element.attr("aria-rowcount",n.length)})):this.element.attr("aria-rowcount",-1);l=this._extensionTrigger("getFirstObservableRowIndexObservable").filter((function(n){return!!n}));this.firstRowIndex=l.length>0&&!!l[0]?l[0]:u.observable(1);this.options.showHeader||this.element.addClass(w);this.options.loading.subscribe(this.ltm,(function(n){(n||s._readLoading)&&(s._readLoading=!0,n?s._ariaLive(c.Grid.Accessibility.loading):s._ariaLive(c.Grid.Accessibility.loaded))}));this._bindDescendants();this._attachEvents();this._extensionTrigger("afterCreate")}return __extends(f,n),f.getCell=function(n,t,i){var r=n.find?n:n.element;return r.find(".azc-grid-row:eq("+t+") .azc-grid-cell:not([aria-hidden=true]):eq("+
i+")")},f.prototype.getRowIndex=function(n){return this.getPlugin(b)?undefined:this.firstRowIndex()+n},f.getModifierKeys=function(n){return(n.altKey&&l.Alt)|(n.metaKey&&l.Meta)|(n.shiftKey&&l.Shift)|(n.ctrlKey&&l.Ctrl)},f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._extensionTrigger("beforeDestroy"),this._detachEvents(),this._cleanElement(p,w),n.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},r.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.getRowMetadata=function(n){var e=this.options,u,r,f;return typeof n!="object"||!n?null:(u=function(t){return t&&t.item===n},r=i.find(this._allRows,u),r||(r=this._getNewRowMetadataEntries(),r.item=n,f=e.rowMetadata?e.rowMetadata.first(u):null,f&&t.extend(!0,r,f),this._allRows.push(r)),r)},f.prototype.previous=function(){return this.getPlugin(a).previous()},f.prototype.next=function(){return this.getPlugin(a).
next()},f.prototype._getAllRowMetadata=function(){return this._allRowsInited||(this._updateAllRowMetadata(),this._allRowsInited=!0),this._allRows},f.prototype._initializePlugins=function(t){this._allRows=[];n.prototype._initializePlugins.call(this,t)},f.prototype._initializeSubscriptions=function(t){var i=this,r;n.prototype._initializeSubscriptions.call(this,t);this._subscriptions.registerForDispose(t.columns.subscribe(r=function(n){i._normalizeColumns(n)}));r(t.columns());this.$disabled.subscribeAndRun(this.ltm,(function(n){i.element.attr("aria-disabled",n)}));this.options.summary.subscribeAndRun(this.ltm,(function(n){i.element.attr("aria-label",n);i.element.findByClassName("azc-grid-groupdata").attr("aria-label",n)}));this.options.loading.subscribeAndRun(this.ltm,(function(n){i.element.attr("aria-busy",n?"true":null)}));t.items&&(this._subscriptions.registerForDispose(t.items.subscribe((function(n){var t=[],r=[];i._allRows.forEach((function(i){var u=n.some((function(n){return i.item===n}));u?t.
push(i):r.push(i)}));r.forEach((function(n){i._extensionTrigger("shouldRetainRowMetadata",n).some((function(n){return n===!0}))&&t.push(n)}));i._allRows=t;i._updateAllRowMetadata()}))),this._addDisposablesToCleanUp(this._itemsPerKeyboardPage=u.computed((function(){var n=i.options.items();return n&&n.length>20?10:5}))))},f.prototype._attachEvents=function(){this._extensionTrigger("beforeAttachEvents");this.element.on("mouseenter.azcGrid","> .azc-grid-container .azc-grid-full > tbody > tr > td .azc-grid-cellContent, > .azc-grid-container .azc-grid-tableHeader > thead > tr > th .azc-grid-headerlabel",this._onMouseEnter=function(){var n=t(this),i=n.attr("title");n.find(">div,>span").length===0&&i!==n.text()&&(this.offsetWidth<this.scrollWidth?n.attr("title",n.text()):i&&n.removeAttr("title"))});this._extensionTrigger("afterAttachEvents")},f.prototype._detachEvents=function(){this._extensionTrigger("beforeDetachEvents");this._onMouseEnter&&(this.element.off("mouseenter.azcGrid",this._onMouseEnter),
this._onMouseEnter=null);this._extensionTrigger("afterDetachEvents")},f.prototype._getNewRowMetadataEntries=function(){var n={item:null,cssClass:u.observable("")},i=this._extensionTrigger("getDefaultRowMetadataProperties");return i.forEach((function(i){t.extend(!0,n,i)})),n},f.prototype._getNewColumnEntries=function(){var n={name:u.observable(""),itemKey:"",formatter:h.text,cssClass:"",width:u.observable(null)},i=this._extensionTrigger("getDefaultColumnProperties");return i.forEach((function(i){t.extend(!0,n,i)})),n},f.prototype._normalizeColumns=function(n){for(var t=this._getNewColumnEntries(),f=r.keys(t),i=!1,u=n.length,e=function(){var r=n[u];f.forEach((function(n){r[n]===undefined&&(r[n]=t[n],i=!0)}));g.isNullOrUndefined(r.columnId)&&(r.columnId="fxgridcol"+pt++);i&&(t=o._getNewColumnEntries(),i=!1)},o=this;u--;)e()},f.prototype._getTotalColumns=function(){var n=this.options.columns().length,t=this._extensionTrigger("getAdditionalColumns");return t.forEach((function(t){n+=t})),n},f.prototype.
_cellFormat=function(n,t,i,r){return(r.formatter||h.text)(i.item[r.itemKey],{item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r})},f.prototype._getCellAriaLabel=function(n,t){return t.getCellAriaLabel?n.cellAriaLabels&&n.cellAriaLabels[t.itemKey]?!0:(n.cellAriaLabels||(n.cellAriaLabels={}),n.cellAriaLabels[t.itemKey]=u.observable(),Q(t.getCellAriaLabel(n.item)).then((function(i){n.cellAriaLabels[t.itemKey](i)})),!0):null},f.prototype._getRowAriaLabel=function(n){var t=this;return this.options.getRowAriaLabel?n.ariaLabel?!0:(n.ariaLabel=u.observable(),u.computed(this.ltm,(function(){t.options.rowAriaLabelDependencies&&t.options.rowAriaLabelDependencies.forEach((function(t){u.unwrap(n.item[t])}));u.ignoreDependencies((function(){Q(t.options.getRowAriaLabel(n.item)).then((function(i){n.ariaLabel(i);t._extensionTrigger("setRowAriaLabel",n)}))}))})).extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"}}),!0):null},f.prototype._setTemplates=function(){var n=this.templateEngine;this.
_extensionTrigger("beforeSetTemplates",n);n.setTemplate({table:tt,header:it,headerColumn:ut,colgroup:rt,headerCell:ft,headerCellContent:et,body:ot,bodyCore:st,bodyNoItems:ht,templateLoading:ct,bodyRows:lt,bodyRowsCore:at,bodyCell:vt,bodyCellContent:yt});this._extensionTrigger("afterSetTemplates",n)},f.prototype._updateAllRowMetadata=function(){var i=this,t=this.options,n;t.items&&(n=t.items(),n&&n.length&&n.forEach((function(n){i.getRowMetadata(n)})))},f.prototype._ariaHiddenColumnHeader=function(n){return Boolean(!n||!u.unwrap(n.name))},f})(o.Widget);n.Widget=y;u.bindingHandlers.azcGrid=s.getBindingHandler(y)})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-focusableRow table tbody tr[aria-disabled=true] td>div{opacity:.5}.azc-grid-focusableRow table tbody tr[aria-disabled=true] td.azc-grid-infoBalloon>div{opacity:1}.azc-grid-focusableRow table tbody tr[aria-disabled=true] td .azc-dockedballoon{position:static}.azc-grid-focusableRow.azc-grid-mousedown{outline:0}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow",["require","exports","f","u","o","ko","$","./Viva.Grid1","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Base/Base.KeyboardHelper","../../../Util/Viva.Util","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function t(n){return n.find("> tbody > tr[data-grid-focusable]:not([aria-disabled=true]):not(.fxc-row-hidden)")}var b=i,k=b.isNullOrUndefined,y=window,d='attr: { "aria-disabled": $disabled, "data-grid-focusable": true }',g='attr: { tabindex: focused() ? "0" : null }',nt='css: { "azc-row-disabled": $disabled }',p="azc-grid-tableContainer",w="."+p,tt="tbody tr[data-grid-focusable=true]:not([aria-disabled=true])",l=".azc-grid",a="rowFocus",v="tabindex",it=b.disposeDisposable,rt=(function(n){function b(t){n.call(this);this._disposables=[];this._options=t=t||{};t.focusable===r&&(t.focusable=f.observable(!0));t.focusableCursorEnabled=
t.focusableCursorEnabled||f.observable(!1);t.focusableCursorOptions=t.focusableCursorOptions||{wrapFocus:f.observable(!0),hasPreviousFocusRow:f.observable(!1),hasNextFocusRow:f.observable(!1)}}return __extends(b,n),u.defineProperty(b.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),b.isEditableControl=function(n){return n.is("input")||n.is("textarea")||n.is("select")||n.is("keygen")},b.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},b.prototype.afterCreate=function(){var n=this;this._disposables.push(f.computed((function(){var t=n._widget.element;n.options.focusable()?t.attr(v,0):t.removeAttr(v)})))},b.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[d,this._getRowFocusDataBindAttribute(),nt]);this.externalHover||t.addAttribute("tr","class",["fxs-portal-hover","fxs-portal-focus"])},b.prototype.getDefaultRowMetadataProperties=function(){return{disabled:f.observable(
!1),focused:f.observable(!1)}},b.prototype.getOrder=function(){return 10},b.prototype.afterAttachEvents=function(){var i=this,n=this,t=this._widget.element;this._disposables.push(t.setEvents(["click.azcGrid",tt,function(t){if(this===y.document.activeElement||e.contains(this,y.document.activeElement))n._updatePreviousNextFocusableState(e(this));else{var i=f.dataFor(this);i&&n._focusRow(this,i,t)}}],["keydown.azcGrid",function(t){var r=e(t.target),u=r.closest(l),v=r.is(l),h=v?null:r.closest("tr[data-grid-focusable]"),i,c=o.Widget.getModifierKeys(t),a=!0,s;if(!b.isEditableControl(r)||!n._isGridDataControl(r))if(s=n.options.focusableCursorOptions.wrapFocus(),c===o.ModifierKeys.None){switch(t.which){case 38:i=n._findPreviousFocusable(u,h,s);break;case 40:i=n._findNextFocusable(u,h,s);break;case 36:i=n._findFirstFocusable(u);break;case 35:i=n._findLastFocusable(u);break;case 33:case 34:i=n._findFocusableByPage(u,t.which);break;default:a=!1}i&&i.length&&n._focusRow(i,f.dataFor(i[0]),t);a&&t.preventDefault(
)}else c===o.ModifierKeys.Shift&&t.which===9&&n._focus(t)}],["mousedown.azcGrid",function(){t.addClass("azc-grid-mousedown");e("body").one("mouseup",(function(){t.removeClass("azc-grid-mousedown")}))}],["focus.azcGrid",function(i){e.contains(t[0],i.relatedTarget)||(n._focus(i),t.attr(v,-1))}]));this._widget.options.items.fxOnce(this._widget.ltm,(function(){i._widget.element[0]===y.document.activeElement&&Q.nextTick((function(){var n=i._findFirstFocusable(i._widget.element);i._focusRow(n,f.dataFor(n[0]))}))}),(function(n){return!!n.length}))},b.prototype.beforeDestroy=function(){it(this._disposables);this._disposables=[];this._widget.element.removeAttr(v).removeClass("azc-grid-mousedown")},b.prototype.getName=function(){return b.Name},b.prototype.focusRowByRowMetadata=function(n){var t=this._getRowByRowMetadata(n);t&&this._focusRow(t,n)},b.prototype.previous=function(n){var t;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(t=this._getRowByRowMetadata(n),t){var r=
e(t),u=r.closest(l),i=this._findPreviousFocusable(u,r,!1);i&&this._focusRow(i,f.dataFor(i[0]),e.Event(a))}}else throw new Error("Previous focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},b.prototype.next=function(n){var t;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(t=this._getRowByRowMetadata(n),t){var r=e(t),u=r.closest(l),i=this._findNextFocusable(u,r,!1);i&&this._focusRow(i,f.dataFor(i[0]),e.Event(a))}}else throw new Error("Next focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},b.prototype._findFirstFocusable=function(n){return t(n.find("table.azc-grid-full").eq(0)).first()},b.prototype._findFocusableByPage=function(n,t){var o;n=n.find("table.azc-grid-full").eq(0);var i=this._getPagedFocusableList(n),s=this._getFocusedItemIndex(n),h=this._widget._itemsPerKeyboardPage(),u=s<h?0:Math.floor(s/h),c=s%h,f;if(i.length>0)switch(t){case 33:c===0&&
i[u-1]?f=i[u-1].first():(o=i[u],f=o&&o.first());break;case 34:i[u+1]?f=i[u+1].first():(o=i[u],f=o&&o.last())}return f?e(f):r},b.prototype._findLastFocusable=function(n){return t(n.find("table.azc-grid-full").eq(0)).last()},b.prototype._findNextFocusable=function(n,i,r){r===void 0&&(r=!0);var o=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),f=t(o),u;if(i)for(u=0;u<f.length;u++)if(i[0]===f[u]&&u<f.length-1)return e(f[u+1]);return r?e(f[0]):null},b.prototype._findPreviousFocusable=function(n,i,r){r===void 0&&(r=!0);var o=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),f=t(o),u;if(i)for(u=f.length-1;u>=0;u--)if(i[0]===f[u]&&u>0)return e(f[u-1]);return r?e(f[f.length-1]):null},b.prototype._focus=function(n){var r,u=this._widget.element,o=u.hasClass("azc-grid-mousedown"),l=n.type==="focus"&&!o,c=h.getModifierKeys(n),a=c===0&&(n.which===9||n.which===40||n.which===38),i,t;o?(i=e(n.target).closest("tr:not([aria-disabled=true])")[0],i&&(r=this._widget.
getRowMetadata(f.dataFor(i).item),this._focusRow(i,r),c===0&&(n.preventDefault(),n.stopPropagation()))):(a||l)&&(t=u.find("input, textarea, select, button, a, [tabindex=0], "+w).filter((function(n,t){var i=e(t);return(i.hasClass(p)||i.closest(w).length===0)&&s.isVisible(i)})),document.activeElement!==t[0]&&t[0]&&!e(t[0]).hasClass(p)?(this._focusElement(e(t[0])),n.preventDefault(),n.stopPropagation()):this._focusCurrentlyFocusableRow(n))},b.prototype._focusCurrentlyFocusableRow=function(n){var t,i,r=this._widget.element,u=r.find(".azc-grid-row").eq(0),e=h.getModifierKeys(n);u.length?t=u[0]:this._lastTabbableRowMetadata&&this._isRowDisplayed(this._lastTabbableRowMetadata)?(t=this._getRowByRowMetadata(this._lastTabbableRowMetadata),i=this._lastTabbableRowMetadata):t=this._findNextFocusable(r,null)[0];t&&(i=i||this._widget.getRowMetadata(f.dataFor(t).item),this._focusRow(t,i),e===0&&(n.preventDefault(),n.stopPropagation()))},b.prototype._focusElement=function(n){var t=n[0];t.focus();t.focus(
)},b.prototype._focusRow=function(n,t,i){var r=e(n),u;this._lastTabbableRowMetadata&&this._lastTabbableRowMetadata.focused(!1);k(t)||(this._lastTabbableRowMetadata=t,t.focused(!0),u={focused:t,target:r},this._focusElement(r),i&&(this._widget.trigger(a,c.cloneEvent(i,a),u),this._widget.options.events("focus",u)),this._updatePreviousNextFocusableState(r))},b.prototype._getFocusedItemIndex=function(n){for(var i,r=this._getPagedFocusableList(n),u,e=this._widget._itemsPerKeyboardPage(),t=0;t<r.length;t++)for(i=0;i<r[t].length;i++)if(f.dataFor(r[t][i])===this._lastTabbableRowMetadata){u=t*e+i;break}return u},b.prototype._getFocusedRowMetadata=function(){return this._lastTabbableRowMetadata},b.prototype._getRowByRowMetadata=function(n){return i.find(this._widget.element.find("tbody tr").toArray(),(function(t){return f.dataFor(t)===n}))},b.prototype._getRowFocusDataBindAttribute=function(){return g},b.prototype._findPreviousAndNextFocusable=function(n,i,r){r===void 0&&(r=!0);var h=i?i.closest("table.azc-grid-full"):
n.find("table.azc-grid-full").eq(0),u=t(h),f,o,s;if(i)for(f=u.length-1;f>=0;f--)if(i[0]===u[f]){f>0&&(o=e(u[f-1]));f<u.length-1&&(s=e(u[f+1]));break}return o=o?o:r?e(u[u.length-1]):null,s=s?s:r?e(u[0]):null,{previous:o,next:s}},b.prototype._updatePreviousNextFocusableState=function(n){if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){var i=this.options.focusableCursorOptions.wrapFocus(),r=n.closest(".azc-grid"),t=this._findPreviousAndNextFocusable(r,n,i);this.options.focusableCursorOptions.hasPreviousFocusRow(t.previous?!0:!1);this.options.focusableCursorOptions.hasNextFocusRow(t.next?!0:!1)}},b.prototype._getPagedFocusableList=function(n){for(var r=[],i=t(n).toArray(),u=this._widget._itemsPerKeyboardPage();i.length>0;)i.length<=u?r.push(i.splice(0)):r.push(i.splice(0,u));return r},b.prototype._isGridDataControl=function(n){return e.contains(this._widget.element.find(w)[0],n[0])},b.prototype._isRowDisplayed=function(n){return this._widget.element.find("tbody tr[data-grid-focusable=true]:not([aria-disabled=true])").
each((function(t,i){if(f.dataFor(i)===n)return!0})),!1},b.Name="azc-grid-focusableRow",b})(o.Extension);n.FocusableRowExtension=rt})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.CheckBox.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-checkBox{display:inline-block;height:17px;vertical-align:top;outline:0;background-repeat:no-repeat;background-position:center;position:relative;border-color:#777!important}.azc-checkBox input{display:inline-block;margin:0;padding:0;border-width:0;text-decoration:none;height:17px}.azc-checkBox span.azc-validation-border{display:inline-block;height:17px;width:17px!important;vertical-align:top;box-sizing:border-box;border-width:1px;border-style:solid;border-color:inherit}.azc-checkBox .azc-checkBox-svg{position:absolute;top:3px;left:3px}.azc-checkBox .azc-checkBox-invisible{display:none}")}));define("Viva.Controls/Controls/Forms/Viva.CheckBox",["require","exports","o","ko","$","../Base/Viva.ValidatableControl",
"MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.CheckBox.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var c=jQuery,s="azc-input",h="azc-checkBox",l="__azc-checkBox",a="<input class='azc-formControl' style='display: none;' type='checkbox' data-bind='attr: { name: $ctl._name }, checked: $ctl._checked, value: $ctl._inputValue' name='' tabindex='-1' aria-hidden='true'/><span class='azc-fill-text azc-validation-border' data-bind='css: { \"fxs-br-error\": data.validationState() === 1, \"fxs-br-dirty\": data.dirty(), \"azc-disabled\": $disabled, \"azc-br-focused\": data.focused() }'><svg focusable='false' class='azc-checkBox-svg azc-check-svg' data-bind='style: { visibility: $ctl._checkChecked } ' version='1.1' xmlns= http://www.w3.org/2000/svg' xmlns: xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='11px' height='11px' viewBox='0 0 16 16' enable-background='new 0 0 16 16' xml: space='preserve' ><path d='M0.6 8.9L0.1 8.3C0 8.1 0 7.9 0.1 7.7l1.5-1.4c0.1-0.1 0.2-0.1 0.3-0.1 0.1 0 0.2 0 0.3 0.1l4.2 4.5 7.3-9.3c0.1-0.1 0.2-0.1 0.3-0.1 0.1 0 0.2 0 0.2 0.1l1.7 1.3c0.1 0.1 0.1 0.1 0.1 0.2 0 0.1 0 0.2-0.1 0.3L6.6 15.2 0.6 8.9z'/><\/svg><svg focusable='false' class='azc-checkBox-svg azc-indeterminate-svg' data-bind='style: { visibility: $ctl._checkIndeterminate }' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='12px' height='12px' enable - background='new 0 0 24 24' xml: space='preserve' ><rect x='1px' y='1px' width='9' height='9'><\/rect><\/svg><\/span>",
v=0,t=[],u,o;t[0]="false";t[1]="true";t[2]="mixed";u=(function(n){function t(){n.call(this);this.state=r.observable(0);this.inputId=null;this.inputCheckedValue=r.observable("checked");this.inputIndeterminateValue=r.observable("indeterminate");this.isTriState=!1;this.value(0);this.canUserSetIndeterminate=r.observable(!0)}return __extends(t,n),t})(f.ViewModel);n.ViewModel=u;o=(function(n){function f(i,f,e){var y=this,p,o,b,w;n.call(this,i,f,c.extend({viewModelType:u},e));this._checked=r.observable();this._checkChecked=r.observable();this._checkIndeterminate=r.observable();this._attributes={};p=this.ltm;o=this.options;this._attributes.role="checkbox";this._name=this.options.name||l+v++;i.addClass(h+" "+s).html(a);b=this._input=i.find("input");this._svgElements=i.find(".azc-checkBox-svg");this._svgCheck=i.find(".azc-check-svg")[0];this._svgIndeterminate=i.find(".azc-indeterminate-svg")[0];o.inputId&&b.attr("id",o.inputId);i.attr(this._attributes);this.$tabIndex.subscribeAndRun(p,(function(n){i.
attr("tabindex",n)}));r.computed(p,o.value,(function(n){y._checked(n!==0);i.attr("aria-checked",t[n]||null);y._checkChecked(n===1?"visible":"hidden");y._checkIndeterminate(n===2?"visible":"hidden")}));w=[];w[0]="unchecked";w[1]=o.inputCheckedValue;w[2]=o.inputIndeterminateValue;this._inputValue=r.computed(p,(function(){var n=w[o.value()];return r.unwrap(n)}));this.$disabled.subscribeAndRun(p,(function(n){y._input.prop("disabled",n);i.attr("aria-disabled",n);y._detachEvents();n||y._attachEvents()}));this._bindDescendants();this._afterCreate();this._supportsFocus(!0)}return __extends(f,n),f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement(h,s),this.element.removeAttr(i.keys(this._attributes).join(" ")),this._detachEvents(),this._input=null,n.prototype.dispose.call(this))},i.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.toggle=function(){var t=this.options.value(),n=
1;t===1?n=0:this.options.isTriState&&this.options.canUserSetIndeterminate()&&t===0&&(n=2);this.options.value(n);this.element.trigger("fxvaluechanged")},f.prototype._isSameValue=function(n,t){return n===t},f.prototype._attachEvents=function(){var n=this;this._detachEvents();this._events={blur:function(){n.options.focused(!1)},click:function(t){n.toggle();n.element.closest("[role='gridcell']").length||t.stopPropagation()},focus:function(){n.options.focused(!0)},keyup:function(t){t.which===32&&(n.toggle(),t.stopPropagation())},keydown:function(n){if(n.which===32)return!1},mouseenter:function(){n.options.state()!==2&&n.options.state(1)},mouseleave:function(){n.options.state()!==2&&n.options.state(0)}};this.element.on(this._events)},f.prototype._detachEvents=function(){this._events&&(this.element.off(this._events),this._events=null)},f})(f.Widget);n.Widget=o;r.bindingHandlers.azcCheckBox=e.getBindingHandler(o)})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility",
["require","exports","f","o","../../Base/Loadable"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function o(n,i){t[n.toString()]=i}function s(n,i){t[n.toString()]===i&&delete t[n.toString()]}function h(){t={}}function c(n,t){n.forEach((function(n){t.addClass(n.getName())}))}function l(n,t){n.forEach((function(n){t.removeClass(n.getName())}))}var f=i.forEachKey,e=(function(){function n(){}return n.prototype.setInstance=function(n){this._widget=n},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},n})(),t,r;n.Extension=e;t={};n.defaultPlugins=[];n.registerPlugin=o;n.unregisterPlugin=s;n.unregisterAllPlugins=h;r=(function(i){function r(n,t,r){i.call(this,n,t,r);this._initializePlugins(t);c(this._plugins,this.element)}return __extends(r,i),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(i.prototype.dispose)||(i.prototype.dispose.call(this),l(this._plugins,this.element))},r.prototype.getPlugin=function(n){return this._plugins?
this._plugins.first((function(t){return t.getName()===n})):null},r.prototype._initializePlugins=function(i){var e=this,u=[],r=[];n.defaultPlugins.forEach((function(n){u.push(new n)}));f(t,(function(n,t){var r=parseInt(n,10);(i.extensions&r)===r&&u.push(new t)}));this._loadPlugins(u,r);this._plugins=r;r.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));r.forEach((function(n){n.setInstance(e)}))},r.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this._plugins.forEach((function(t){t[n]&&i.push(t[n].apply(t,r))})),i},r.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies()||[],f=u.filter((function(i){return!n.some((function(n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i.
_loadPlugins(u,t)}))},r})(u.Widget);n.Extensibility=r})(f||(f={})),f}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl",["require","exports","f","o","a","ko","./Grid1.Extensibility","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function d(t,i){return function(r,u){switch(t){case s.uri:u=u||{};u.cssClass="msportalfx-link-primary"}var f=t(r,u);return c.sanitizeHTML(new l(f,n,i)).sanitizedMarkup}}function g(n,t){return n&&t&&n===t}var y=i.Base,l=h.ProvenanceContainer,p=y.Diagnostics,w=i.ViewModels.Controls.Lists.Grid,a=w.Format,b=i.forEachKey,k=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(e.Extension),u,v;t.GridExtension=k;u=(function(t){function i(n,i,r){t.call(this,n,i,r);this._metadataDisposables=[];this._resetCallbackAdded=!1;this._extensionTrigger(
"beforeCreate");this._initializeWidgets();this._extensionTrigger("afterCreate")}return __extends(i,t),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(t.prototype.dispose)||(this._extensionTrigger("beforeDestroy"),this._metadataDisposables&&(this._metadataDisposables.forEach((function(n){var t=n.disposables||[];t.forEach((function(n){n.dispose()}))})),this._metadataDisposables=[]),this._resetCallbackAdded&&this.options.resetCallback(null),t.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.getRowMetadata=function(n){return this._instance.getRowMetadata(n)},i.prototype._twoWayBinding=function(n,t){var r=n(),u=t(),i=!1,f=function(n,t){if(!i)try{i=!0;n(t)}finally{i=!1}},e,o;return r?t(r):u&&n(u),e=n.subscribe((function(n){f(t,n)})),o=t.subscribe((function(t){f(n,t)})),[e,o]},i.prototype._resetExtensions=function(){var n=this._extensionTrigger(
"resetExtension");return Q.all(n)},i.prototype._initializeWidgets=function(){this._initializeNestedViewModel();this._instance=new o.Widget(this.element,this._nestedViewModel);this._widgets.push(this._instance);this._initializeExtensions();this._initializeVivaRowMetadata();this._setResetCallback()},i.prototype._getFormatter=function(n,t){var i,r=this._createOptions;switch(n){case a.Text:return s.text}if(i=this._extensionTrigger("getSafeFormatter",n,t,r.isTrusted).first((function(n){return n!==null})),i)return i;switch(n){case a.Html:i=s.html;break;default:i=this._extensionTrigger("getUnsafeFormatter",n,t,r.isTrusted).first((function(n){return n!==null}));i||(i=s.text)}return r.isTrusted||(i=d(i,this.element)),i},i.prototype._connectMetadataAndDisposeSubscriptions=function(n,t){var i=this._getVivaItem(t);i&&this._canConnectRowMetadataProperties(i,t)&&(this._connectRowMetadataProperties(i,t),n.forEach((function(n){n.dispose()})))},i.prototype._disposeMetadataDisposables=function(n){var t,i=-1;this.
_metadataDisposables.some((function(r,u){return r.metadata===n?(t=r,i=u,!0):!1}));t&&((t.disposables||[]).forEach((function(n){n.dispose()})),this._metadataDisposables.splice(i,1))},i.prototype._initializeNestedViewModel=function(){var r=this,i=new o.ViewModel,t=this.options,u;i.summary=t.summary;i.showHeader=t.showHeader;i.sortByList=t.sortByList;i.loading=t.loading;i.actions=t._msPortalFxActions;i.getRowAriaLabel=t.getRowAriaLabel&&t.getRowAriaLabel.bind(t);i.rowAriaLabelDependencies=t.rowAriaLabelDependencies;i.noRowsMessage=f.observable();t.noRowsMessage&&(u=f.computed((function(){var u=t.noRowsMessage(),f=r._createOptions.isTrusted?u:c.sanitizeHTML(new l(u,n)).sanitizedMarkup;i.noRowsMessage(f)}),this),this._addDisposablesToCleanUp(u));i.columns=t.columns.mapInto(this.ltm,(function(n,t){var i=r._toNestedColumn(t);return n.registerForDispose((function(){r._extensionTrigger("columnAdded",t,i)})),r._extensionTrigger("columnAdded",t,i),i}));i.items=t.items;i.extensions=this._getExtensions(t.extensionsOptions||
{});i.disabled=t.disabled;this._nestedViewModel=i},i.prototype._initializeExtensions=function(){this._extensionTrigger("initializeExtension")},i.prototype._setResetCallback=function(){var n=this;this.options.resetCallback()||(this.options.resetCallback((function(){return n._resetExtensions()})),this._resetCallbackAdded=!0)},i.prototype._toNestedColumn=function(n){var t={};return b(n,(function(n,i){t[n]=i})),t.pcColumn=n,t.formatter=null,n.format!==undefined&&(t.formatter=this._getFormatter(n.format,n.formatOptions||{})),t},i.prototype._initializeVivaRowMetadata=function(){var n=this,t=this.options.rowMetadata;t.subscribeArrayBulkChanges(this.ltm,(function(t,i){i.forEach((function(t){n._disposeMetadataDisposables(t)}));t.forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))}));t.peek().forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))},i.prototype._connectPortalAndVivaRowMetadataAsync=function(n){var r=this,t=[],i=this._getVivaItem(n);i&&this._canConnectRowMetadataProperties(
i,n)?this._connectRowMetadataProperties(i,n):(this._extensionTrigger("registerSubscriptionsToConnectMetadataProperties",t,n).forEach((function(n){t.push(n)})),t.push(this._nestedViewModel.items.subscribe((function(){r._connectMetadataAndDisposeSubscriptions(t,n)}))))},i.prototype._getVivaItem=function(n){var i=this._nestedViewModel.items().first((function(t){return n.item===t})),r,t;if(!i)for(r=this._extensionTrigger("getAdditionalItems"),t=0;t<r.length;t++)if(r[t]&&(i=r[t].first((function(t){return g(t,n.item)})),i))break;return i},i.prototype._canConnectRowMetadataProperties=function(n,t){return!this._extensionTrigger("disallowConnectRowMetadataProperties",n,t).some((function(n){return!!n}))},i.prototype._connectRowMetadataProperties=function(n,t){var i,u=this.getRowMetadata(n),r;t?(i=this._metadataDisposables.first((function(n){return n.metadata===t})),i||(i={metadata:t,disposables:[]},this._metadataDisposables.push(i)),this._extensionTrigger("connectRowMetadataProperties",n,u,t).forEach((function(
n){n&&i.disposables.push.apply(i.disposables,n)}))):(r=new p.Log("Grid"),r.debug("Metadata was not present and could not connect rowmetadata."))},i.prototype._getExtensions=function(n){var t=[];return this._extensionTrigger("getExtension",n).forEach((function(n){n&&t.push(n)})),t},i})(e.Extensibility);t.Widget=u;v=(function(n){function t(t,i){n.call(this,t,i,{isTrusted:!0})}return __extends(t,n),t})(u);t.TrustedWidget=v})(l||(l={})),l}));define("_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxc-base.azc-grid .fx-grid-formatters-svg{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svg.fx-grid-svgicon-center{justify-content:center;width:calc(100% + 10px);margin-left:-10px}.fxc-base.azc-grid .fx-grid-formatters-svg .fx-grid-formatters-svgtext{text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svgicon{margin-right:6px;flex-shrink:0;width:12px;height:13px;position:relative}.fxc-base.azc-grid .fx-grid-formatters-icon{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-icon .fx-grid-formatters-icon-text{flex:1;min-width:0;text-overflow:inherit;overflow:inherit}")})
);define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter",["require","exports","f","i","o","a","ko","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalImpl/Base/Base.Sanitization","../../../../_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){function b(n){var t=e.unwrap(n),i=t&&!a(t.text)&&!a(t.uri)?t.uri:t;return l.sanitizeUri(i+"")}function g(n){return b(n)?h.icon(n):""}var v=r.Intl.DateTimeFormat,d=i.ViewModels.Controls.Lists.Grid,t=d.Format,u=h.date,p=c.attributeEncode,y=c.callFormatter,a=c.isUndefined,k=(function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.getName=function(){return"Formatter"},i.prototype.getOrder=function(){return 0},i.prototype.getSafeFormatter=function(n,i){var r,f;switch(n){case t.ShortTime:return u(v.
shortTimePattern,this._widget.element);case t.LongTime:return u(v.longTimePattern,this._widget.element);case t.ShortDate:return u(v.shortDatePattern,this._widget.element);case t.LongDate:return u(v.longDatePattern,this._widget.element);case t.MonthDay:return u(v.monthDayPattern,this._widget.element);case t.YearMonth:return u(v.yearMonthPattern,this._widget.element);case t.CustomDate:return u(i.dateFormat||"",this._widget.element);case t.Number:return h.numberFormat(i.numberFormat);case t.TextLookup:return h.textLookup(i.textLookup||{});case t.Icon:return g;case t.IconLookup:r=i.iconLookup||{};for(f in r)r.hasOwnProperty(f)&&(b(r[f])||delete r[f]);return h.iconLookup(r);case t.SvgIcon:return w.svgIcon;case t.SvgIconLookup:return w.svgIconLookup(i.svgIconLookup||{});case t.PercentageBar:return h.percentageBar(i.percentageBar||{})}return null},i.prototype.getUnsafeFormatter=function(n,i){switch(n){case t.Html:return h.html;case t.TextLookup:return h.textLookup(i.textLookup||{});case t.Uri:
return h.uri}return null},i})(s.GridExtension),w;n.FormatterExtension=k;o.defaultPlugins.push(k),(function(n){function t(n){var u=function(n){return n&&!a(n.type)},o=function(n,t,i){var r="image: "+p(e.toJSON(n)),u=i&&t?', style: { height:"'+p(t)+'", width: "'+p(i)+'" }':"";return"<span class='fx-grid-formatters-svgicon' data-bind='"+r+u+"'><\/span>"},s=f.prototype.slice.call(arguments,1),t=e.unwrap(n),c="",i,r;return(t&&!a(t.center)&&t.center&&(c=" fx-grid-svgicon-center"),i="<div class='fx-grid-formatters-svg"+c+"'>",t&&!a(t.svg)&&u(t.svg))?(r="",t.text&&!a(t.text)&&(r="<span class='fx-grid-formatters-svgtext'>"+y(h.text,t.text,s)+"<\/span>"),i+o(t.svg,t.height,t.width)+r+"<\/div>"):u(t)?i+o(t)+"<\/div>":t&&!a(t.text)?i+"<span class='fx-grid-formatters-svgtext'>"+y(h.text,t.text,s)+"<\/span><\/div>":""}function r(t){return function(r){for(var u,f,s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(u=e.unwrap(r),c.isNullOrUndefined(t[u])){if(t["##DEFAULT##"])return u=h.text(u),f=t["##DEFAULT##"],
f.text&&(f=i.extend2(f,{text:f.text.replace(/##DEFAULT##/g,u)})),y(n.svgIcon,f,s)}else return y(n.svgIcon,t[u],s);return""}}n.svgIcon=t;n.svgIconLookup=r})(w=n.Formatters||(n.Formatters={}))})(a||(a={})),a}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-selectableRow-selectionCell-col{width:26px;max-width:26px}.azc-grid-selectableRow-selectAll{vertical-align:text-top;margin-left:7px}.azc-grid-selectableRow-selectionCell-wrapper{border-width:1px;border-style:solid;box-sizing:border-box;width:17px;height:17px;display:none}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon{margin-top:2px;margin-left:2px;position:relative}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon svg{vertical-align:top}.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table,.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody,.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody tr{height:100%}.azc-grid-selectableRow table thead th.azc-grid-selectableRow-overlay-header{width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell{overflow:visible;padding:0;vertical-align:top;width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin{position:relative;overflow:visible;height:100%}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin div.azc-grid-selectableRow-overlay-container{position:absolute;top:0;right:0}.azc-grid-selectableRow table tbody tr.azc-external-hovered td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr.fxs-portal-selected td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr:not([aria-disabled=true]):focus td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr:not([aria-disabled=true]):hover td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper{display:block}.azc-grid-selectableRow table tbody tr td:first-of-type{border-left:none}.azc-grid-selectableRow table tbody tr td.azc-br-muted:last-of-type,.azc-grid-selectableRow table tbody tr td:last-of-type{border-right:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow",["require","exports","f","o","ko","$","./Viva.Grid1.FocusableRow","./Viva.Grid1","../../../Util/Viva.Util","../../Forms/Viva.CheckBox","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css","MsPortalImpl/Base/Base.KnockoutExtensions.Image"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){function nt(n){var t=y(n);return t&&t.selected&&!t.selected()}var ot=i.Base,st=ot.Images,b=i.isNullOrUndefined,a=u.observable,tt=u.computed,y=u.dataFor,it=u.pureComputed,rt=i.disposeDisposable,w=jQuery,ht=window,f="azc-grid-selectableRow",v="tr[data-grid-selectable=true]:not([aria-disabled=true])",ut="tbody "+v,ct=ut+" td."+f+"-selectionCell",lt=f+"-selectAll",ft="11px",k='attr: { "data-grid-selectable": true, "aria-selected": selected() ? "true" : "false", tabindex: selected() || focused() ? $tabIndex() : $focusIndex() }',
d='css: { "fxs-portal-selected": selected() }',at='css: { "azc-grid-multiselectable": $ctl.getPlugin("'+f+'")._multiselect, '+('"azc-grid-selectable": $ctl.getPlugin("'+f+'")._showSelectionExperience }'),vt="<col class='"+f+"-selectionCell-col' />",yt="<th class='"+f+"-selectionCell-header' aria-hidden='true'>"+("<div class='"+lt+"' data-bind='azcCheckBox: $ctl.getPlugin(\""+f+'")._selectAllCheckbox, visible: $ctl.getPlugin("'+f+'")._canSelectAll, attr:{ "aria-label": $ctl.getPlugin("'+f+"\")._ariaLabel }'><\/div>")+"<\/th>",g="<td class='"+f+"-selectionCell azc-br-muted' aria-hidden='true'>"+("<div class='"+f+"-selectionCell-wrapper fxs-portal-border azc-fill-text'>")+("<div data-bind='trustedHtml: $ctl.getPlugin(\""+f+"\")._selectionCellFormat($data)'><\/div>")+"<\/div><\/td>",p,t,et;(function(n){n.RowSelect="rowSelect";n.RowClick="rowClick"})(p=n.EventTypes||(n.EventTypes={})),(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.MultipleAdd=2]="MultipleAdd";n[n.MultipleReplace=3]=
"MultipleReplace";n[n.AlwaysSingle=4]="AlwaysSingle"})(n.RowSelectionMode||(n.RowSelectionMode={}));t=n.RowSelectionMode;et=(function(n){function i(i){var r=this,u;n.call(this);this._disposables=[];this._ariaLabel=l.Grid.selectAllCheckboxLabel;this._options=i=i||{};i.mode=i.mode||a(t.Single);i.hideMultiSelectCheckbox=i.hideMultiSelectCheckbox||!1;i.enableSelectableCursor=i.enableSelectableCursor||a(!1);i.hasPreviousSelectableItem=i.hasPreviousSelectableItem||a(!1);i.hasNextSelectableItem=i.hasNextSelectableItem||a(!1);this._enableSelectableCursor=tt((function(){r._updateSelectableCursor()}));u=this._selectAllCheckbox=new h.ViewModel;u.canUserSetIndeterminate(!1);this._multiselect=it((function(){var n=i.mode();return n===t.MultipleAdd||n===t.MultipleReplace}));this._canSelectAll=it((function(){return r._multiselect()&&!i.disableSelectAll&&!r._widget._extensionTrigger("shouldNotAllowSelectAll").some((function(n){return n}))}));this._modeSubscription=i.mode.subscribe((function(n){var u;if(r._widget&&
(u=r._widget.getPlugin(e.FocusableRowExtension.Name),u&&(n===t.Off?u.options.focusable(!1):u.options.focusable(!0)),n===t.AlwaysSingle||n===t.Single)){var f=void 0,h=void 0,o=void 0,i=r.getSelectedRows(),s=i?i.length:0;if(i=r.getSelectedRows(),s=i?i.length:0,s>=1)for(o=1;o<s;o++)i[o].selected(!1);else n===t.AlwaysSingle&&(f=r._widget.options.items(),f&&f.length>0&&(h=r._widget.getRowMetadata(f[0]),h.selected(!0)))}}))}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.getSelectedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return n.selected.peek()}))},i.prototype.getSelectableRows=function(){var n=this;return this._widget.options.items().filter((function(t){return!n._widget.getRowMetadata(t).disabled()}))},i.prototype.selectAllRows=function(){this.selectRows.apply(this,this.getSelectableRows())},i.prototype.unselectAllRows=function(){this._widget._getAllRowMetadata().forEach(
(function(n){n.selected(!1)}))},i.prototype.unselectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!1)}))},i.prototype.selectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!0)}))},i.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t);this._options.mode.valueHasMutated()},i.prototype.afterCreate=function(){this._widget.ltm.registerForDispose([this._showSelectionExperience,this._modeSubscription,this._enableSelectableCursor]);this._focusableRowPlugin=this._widget.getPlugin(e.FocusableRowExtension.Name);this._updateSelectableCursor()},i.prototype.afterSetTemplates=function(n){var i=this,o=n.getHtmlTemplate("bodyRowsCore"),h=n.getHtmlTemplate("header"),l=n.getHtmlTemplate("colgroup"),a=n.getHtmlTemplate("table"),f=n.getHtmlTemplate("editableBodyRowsCorePerColumn"),e=n.getHtmlTemplate("editableBodyRowsCoreForRow"),
s=!b(f)&&!b(e),r="data-bind";o.addAttribute("tr",r,[k,d]);a.addAttribute("table",r,[at]);this._showSelectionExperience=tt((function(){var n=i._options.mode(),r=n===t.Off,u=i._options.hideMultiSelectCheckbox,f=n===t.Single||n===t.AlwaysSingle,e=i._widget.options.extensions.first((function(n){return n.getName()==="azc-grid-activateableRow"}));return!r&&!u&&!(f&&e)}));this._showSelectionExperience()&&(o.prepend("tr",g),h.prepend("tr",yt),l.prepend("colgroup",vt),s&&(f.prepend("tr",g),e.prepend("tr",g)));s&&(f.addAttribute("tr",r,[k,d]),e.addAttribute("tr",r,[k,d]));this._selectionCellFormatter=c.Formatters.svgIconLookup({"true":{svg:st.Check({palette:99}),height:ft,width:ft}});u.reactor(this._widget.ltm,(function(){var n,t,r;i._canSelectAll()&&(t=!0,i._widget._getAllRowMetadata().forEach((function(i){if(!i.disabled()){var r=i.selected();n=n||r;t=t&&r}})),r=i._selectAllCheckbox,t&&n?r.value(1):n?r.value(2):r.value(0))}))},i.prototype.getDefaultRowMetadataProperties=function(){return{selected:a(!1)}}
,i.prototype.afterAttachEvents=function(){var i=this,n=this;this._disposables.push(this._widget.element.setEvents(["click.azcGrid",ut,function(t){w.contains(n._widget.element[0],this)&&n._onClick(this,t);t.stopPropagation()}],["click.selectionCell",ct,function(t){var i=w(this).closest(v)[0],r=n._widget.getPlugin(e.FocusableRowExtension.Name);t.ctrlKey=!0;n._changeSelection(1,i,t,n._multiselect());r._focusRow(i,y(i));t.stopPropagation()}],["keydown.azcGrid",function(i){var r=w(i.target),c=r[0],d=y(c),f=d&&d.selected,l,k,g=n._widget._itemsPerKeyboardPage(),u=o.Widget.getModifierKeys(i),a=!0,p,s,h;if(n._options.mode()!==t.Off&&!e.FocusableRowExtension.isEditableControl(r)){switch(i.which){case 32:k=ht.document.activeElement;(u===o.ModifierKeys.None||u===o.ModifierKeys.Ctrl&&r.is("tr[data-grid-selectable]")&&(i.target===k||w.contains(r[0],k)))&&(p=y(r[0]),p&&p.selected&&p.selected()&&(i.ctrlKey=!0),n._changeSelection(2,r[0],i));break;case 65:u===o.ModifierKeys.Ctrl?n._canSelectAll()&&n.selectAllRows(
):a=!1;break;case 68:u===o.ModifierKeys.Ctrl?n.unselectAllRows():a=!1;break;case 38:case 40:n._multiselect()&&u===o.ModifierKeys.Shift&&(s=void 0,s=i.which===38?r.prevAll(v)[0]:r.nextAll(v)[0],f&&!f()&&n._changeSelection(3,c,i,!1,!0),b(s)||nt(s)&&n._changeSelection(3,s,i,!1,!0));break;case 33:case 34:n._multiselect()&&u===o.ModifierKeys.Shift&&(h=void 0,h=i.which===33?r.prevAll(v):r.nextAll(v),l=h.length<g-1?h:h.slice(0,g-1),f&&!f()&&n._changeSelection(3,c,i,!1,!0),l.each((function(t,r){nt(r)&&n._changeSelection(3,r,i,!1,!0)})));break;case 36:case 35:n._multiselect()&&u===o.ModifierKeys.Shift&&(l=i.which===36?r.prevAll(v):r.nextAll(v),n.unselectAllRows(),f&&!f()&&n._changeSelection(3,c,i,!1,!0),l.each((function(t,r){nt(r)&&n._changeSelection(3,r,i,!1,!0)})));break;default:a=!1}a&&(i.stopPropagation(),i.preventDefault())}}]));this._selectAllCheckbox.value.subscribe(this._widget.ltm,(function(n){switch(n){case 1:i.selectAllRows();break;case 0:i.unselectAllRows()}}))},i.prototype.getOrder=function(
){return 20},i.prototype.getDependencies=function(){return[new e.FocusableRowExtension]},i.prototype.beforeDestroy=function(){rt(this._disposables);this._disposables=[]},i.prototype.getName=function(){return i.Name},i.prototype.getAdditionalColumns=function(){var n=0;return this._showSelectionExperience()&&(n+=1),n},i.prototype._changeSelection=function(n,i,r,u,f){var k;u===void 0&&(u=!1);f===void 0&&(f=!1);var v=this.options.mode(),l,d=this.options.disableRequireSingleModeAssistKey?this.options.disableRequireSingleModeAssistKey.peek():!1,g=this._widget.getPlugin(e.FocusableRowExtension.Name);if(!this._widget._extensionTrigger("shouldNotChangeSelection",i,r).some((function(n){return!!n}))){switch(v){case t.Off:return;case t.Single:case t.AlwaysSingle:l=!1;break;case t.MultipleAdd:l=!0;break;case t.MultipleReplace:l=r.ctrlKey||r.shiftKey||r.which===32;break;default:throw new Error("Unknown selection mode: "+v+".");}u&&(l=!0);var c=y(i),o=null,h=[],nt=c.selected&&c.selected(),w,b=-1,a;if(l)
nt?h=[c]:o=c;else{for(h=this.getSelectedRows(),a=h.length-1;a>=0;a--)k=h[a],k!==c||(b=a);b<0?o=c:v===t.Single&&(d||r.ctrlKey||r.shiftKey)||(v===t.Single?(h.splice(b,1),o=c):h.splice(b,1))}(o||h.length>0)&&(w={selected:o,unselected:h,_reason:n},this._widget.trigger("beforeRowSelect",s.cloneEvent(r,"beforeRowSelect"),w),h.forEach((function(n){n.selected(!1)})),o&&o.selected&&(o.selected(!0),f&&g.focusRowByRowMetadata(o)),this._widget.trigger(p.RowSelect,s.cloneEvent(r,p.RowSelect),w),this._widget.options.events("select",w))}},i.prototype.previous=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.previous(this.getSelectedRows()[0]);else throw new Error("Previous selectable cursor method will work only when enableSelectableCursor option is set to true.");return Q()},i.prototype.next=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.next(this.getSelectedRows()[0]);else throw new Error("Next selectable cursor method will work only when enableSelectableCursor option is set to true.");
return Q()},i.prototype._updateSelectableCursor=function(){var t=this,n;this._widget&&(n=this._widget.getPlugin(e.FocusableRowExtension.Name),this._options.enableSelectableCursor()?(n.options.focusableCursorEnabled=this._options.enableSelectableCursor,n.options.focusableCursorOptions={wrapFocus:a(!1),hasPreviousFocusRow:this.options.hasPreviousSelectableItem||a(!1),hasNextFocusRow:this.options.hasNextSelectableItem||a(!1)},this._triggeredEventRowFocus||this._disposables.push(this._triggeredEventRowFocus=this._widget.element.setEvents(["rowFocus.azcGrid",function(n,i){var r=t.getSelectedRows();r&&r.length>0&&(w(i.target[0]).click(),n.stopPropagation())}]))):(this._options.hasPreviousSelectableItem(!1),this._options.hasNextSelectableItem(!1),n.options.focusableCursorEnabled(!1),n.options.focusableCursorOptions.wrapFocus(!0),n.options.focusableCursorOptions.hasPreviousFocusRow(!1),n.options.focusableCursorOptions.hasNextFocusRow(!1),this._triggeredEventRowFocus&&(rt(this._triggeredEventRowFocus),
this._triggeredEventRowFocus=null)))},i.prototype._onClick=function(n,t){var i={item:n,rowMetadata:y(n),clientX:t.clientX,clientY:t.clientY};this._widget.trigger(p.RowClick,s.cloneEvent(t,p.RowClick),i,t.target);this._widget.options.events(p.RowClick,i);this._changeSelection(4,n,t)},i.prototype._selectionCellFormat=function(n){var t;return this._showSelectionExperience()&&(t=this._selectionCellFormatter(n.selected())),t},i.Name=f,i})(o.Extension);n.SelectableRowExtension=et})(a||(a={})),a}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-editableRow .azc-grid-editableRow-edited td:first-child{box-shadow:inset 3px 0 0 0 #c84fd7}.azc-grid-editableRow .azc-grid-cell-hidden,.azc-grid-editableRow .azc-grid-editableRow-deleted,.azc-grid-editableRow .azc-placeholdercell{display:none}.azc-grid-editableRow tr.azc-grid-editing .azc-placeholdercell{display:table-cell}.azc-grid-editableRow tr.azc-grid-editing .azc-grid-cell-editing+.azc-placeholdercell{display:none}.azc-grid-editableRow table tbody.azc-grid-editableRow-addSection:not(.azc-grid-editableRow-placement-top) tr.azc-grid-row td{border-top-width:0}.azc-grid-editableRow table tbody.azc-grid-editableRow-addSection.azc-grid-editableRow-placement-top tr.azc-grid-row td{border-bottom-width:0}.azc-grid-editableRow table tbody tr.azc-grid-row:not(.azc-grid-editableRow-deleted) td{border-top-width:1px;border-top-style:solid}.azc-grid-editableRow table tbody tr.azc-grid-row:not(.azc-grid-editableRow-deleted)~tr.azc-grid-row:not(.azc-grid-editableRow-deleted) td{border-top-width:0}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow",["require","exports","f","u","o","a","ko","$","./Viva.Grid1.FocusableRow","./Viva.Grid1","./Viva.Grid1.SelectableRow","../../../Util/Viva.Util","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Base/Base.EventTypes","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){"use strict";var w;return (function(n){function at(n){return o(n).parent().hasClass(d)?0:1}function ft(n){var t=o(n).parent(),i;return i=t.hasClass(d)?t.siblings(tt).find(k).first():t.siblings(tt).find(k).last(),i.find("td.azc-grid-cell")}function et(n){var t=o(n);return!t.find(".azc-validatableControl-invalid").length&&!t.find(".azc-validatableControl-pending").length}function ot(n){var t=o(n);return!!t.find(".azc-validatableControl-pending").length}function st(n,t){et(n)?t.resolve(!0):ot(n)?setTimeout(
(function(){st(n,t)}),50):t.resolve(!1)}function vt(n){var t=Q.defer();return st(n,t),t.promise}function yt(n){return n.rowMetadata&&n.rowMetadata.editState()!==0}function ht(n){var t=o(n),i=t.find("input, select, textarea"),r=i.serializeArray(),u=e.dataFor(n),f=!t.parent("tbody."+b).length;return{rowMetadata:u,data:r,existingItem:f}}var w=i.isNullOrUndefined,g="azc-grid-selectableRow",k=".azc-grid-row",nt=k+":not([aria-disabled=true])",tt="tbody.azc-grid-groupdata",f="azc-grid-editableRow",t="azc-grid-editableRow-row",ct="."+t,b="azc-grid-editableRow-addSection",lt="."+b,it=lt+" "+ct,d="azc-grid-editableRow-placement-top",rt="azc-br-top-hovered",ut="azc-br-bottom-hovered",pt=(function(n){function h(t){var i=this;n.call(this);this._isDisposed=!1;this._options=t=t||{};t.placement=t.placement||0;this._createdItems=e.observableArray();this._orderedCreatedItems=e.computed((function(){var r=i._createdItems(),n,t,u;return r.length<=1?r:(n=r.slice(),t=n.firstIndex((function(n){var t=i._widget.getRowMetadata(
n);return t&&t.emptyRow()})),t!==-1&&t!==n.length-1&&(u=n.splice(t,1),n.push(u[0])),i.options.placement===1&&n.reverse(),n)}));this._editablePerColumn=e.computed({read:function(){var n=i._widget.options.columns().some((function(n){return n.editableFormatter!==r})),t=!!i.options.editableFormatter;if(t&&n)throw new Error("The editableFormatter cannot be in columns when used for one row.");return n},deferEvaluation:!0})}return __extends(h,n),u.defineProperty(h.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.defineProperty(h.prototype,"createdItems",{get:function(){return this._createdItems},enumerable:!0,configurable:!0}),h.prototype.afterSetTemplates=function(n){var u="<tbody role='rowgroup' class='"+b+"' data-bind='css: { \""+d+'": $ctl.getPlugin("'+f+"\").options.placement === MsPortalFx.ViewModels.Controls.Lists.Grid.EditableRowPlacement.Top }'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+f+'")._orderedCreatedItems } --><!-- /ko -->')+
"<\/tbody>",s='css: { "azc-grid-editableRow-edited": $ctl.getPlugin("'+f+'")._isRowEdited($data), "azc-grid-editableRow-deleted": $ctl.getPlugin("'+f+'")._isRowDeleted($data), "fxs-suppresschildvalidation": $data.emptyRow }',h="<td role='gridcell' aria-readonly='false' data-bind='trustedHtml: $ctl.getPlugin(\""+f+'")._editableCellFormat($parent, $data), attr: { "class": ($parent.editing() ? "azc-grid-cell" : "azc-grid-cell-hidden") + " azc-br-muted azc-grid-cell-editing " + cssClass, "aria-describedby": columnId, "aria-colindex" : $index() + 1 }\'><\/td>',e='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": (!$parent.editing() ? "azc-grid-cell" : "azc-grid-cell-hidden") + " azc-br-muted " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : ""), "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1 }\'><\/td>',
o,i,r;n.setTemplate("editablePlaceholderBodyCell",e);o="<!-- ko if: $parent._rendered -->"+h+'<!-- /ko --><td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": " azc-placeholdercell azc-br-muted " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : ""), "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1 }\'><\/td>'+e;n.setTemplate("bodyCell",o);i=n.getHtmlTemplate("bodyRowsCore");i.addAttribute("tr","data-bind",[s]);i.addAttribute("tr","data-bind",["css: {'azc-grid-editing': editing, "+t+": editing }"]);r=n.getTemplate("body");n.setTemplate("body",this.options.placement===1?u+r:r+u)},h.prototype.getDefaultRowMetadataProperties=function(){var n=e.observable(!1),t=e.observable(!1);return n.fxAwaitAndRun(this._widget.ltm).then(t),{editState:e.observable(0),editing:n,validationResult:
e.observable(0),emptyRow:e.observable(!1),_addedOnce:!1,_rendered:t}},h.prototype.modifyRowNumber=function(){var n=this,t=this._widget._getAllRowMetadata().filter((function(n){return n.editState()===3})).length,i=this.createdItems().filter((function(t){return!n._widget.getRowMetadata(t).emptyRow()})).length;return i-t},h.prototype.afterAttachEvents=function(){var u=e.observable(),s=!1,v=!1,k=!1,f=this,n=this._widget,h=n.element,d;n.ltm.registerForDispose(h.setEvents(["mouseenter",it,function(){h.hasClass(g)&&ft(this).addClass(at(this)===0?rt:ut)}],["mouseleave",it,function(){h.hasClass(g)&&ft(this).removeClass(rt+" "+ut)}],["focusout","tr."+t,function(){if(!v){var n=this,t=e.dataFor(n);t&&t.editing&&t.editing.peek()&&setTimeout((function(){var t=document.activeElement,i=function(){try{v=!0;f._rowAdd(n)}finally{v=!1}};n===t||o.contains(n,t)||(ot(n)?vt(n).then((function(n){n&&i()})):i())}),10)}}],["click",nt,function(t){if(!k&&!n.$disabled()){var nt=this,v=e.dataFor(nt),tt=o(nt),ut=!!tt.closest(
"tbody."+b).length,et=n.getPlugin(c.SelectableRowExtension.Name),ft=v,i,r=void 0,it,y,d=t.clientX,g=t.clientY,rt=void 0;if(!v.editing.peek()&&(f.options.allowEditExistingItems&&!ut||f.options.allowEditCreatedItems&&ut)){(w(d)||w(g))&&(rt=o(t.target).position(),d=rt.left,g=rt.top);r=this;do r=r.previousSibling;while(r!==null&&e.dataFor(r)!==v.item);if(v.editing(!0),r){do r=r.nextSibling;while(r!==null&&r.nodeName.toLowerCase()!=="tr");r&&(t.target=r,y=r,a.waitForBindings(h[0]).then((function(){if(!f._isDisposed){for(i=document.elementFromPoint(d,g);i;)if(i=l.findContainingControl(i),o.contains(y,i))if(i&&l.executeSetFocusOn(i)){try{s=!0;k=!0;u(y);it=l.cloneEvent(t,p.default.click);it.clientX=d;it.clientY=g;o(document.activeElement).trigger(it)}finally{s=!1;k=!1}break}else break;else break;u.peek()!==y&&u(y)}})),ft.selected&&(et._changeSelection(4,y,t),t.stopPropagation(),t.preventDefault()))}else o.contains(nt,document.activeElement)||a.waitForBindings(n.element[0]).then((function(){if(!f.
_isDisposed){for(i=document.elementFromPoint(d,g);i;)if(i=l.findContainingControl(i),o.contains(nt,i)){if(i&&l.executeSetFocusOn(i)){try{s=!0;u(tt[0])}finally{s=!1}break}}else break;u.peek()!==tt[0]&&u(tt[0])}}))}else v.editing.peek()&&ft.selected&&t.ctrlKey&&v.editing(!1)}}]));n._addDisposablesToCleanUp(e.computed((function(){var n=u();s||w(n)||l.setFocusToFirstFocusableChild(o(n),(function(n){return o(n).attr(l.Constants.dataEditableAttribute)?n:null}))})));i.isFeatureEnabled("oldEditableGrid")||n.ltm.registerForDispose(n.element.setEvents(["keyup",nt,function(n){switch(n.which){case 38:case 40:case 36:case 35:case 33:case 34:e.dataFor(this).editing(!0)}}]));d=function(n){var i=!1,e=o(n.target),s=n.target,u,h;y.isNonWrittenCharacter(n.which)||(n.type===p.default.keydown||n.type===p.default.keyup||n.type===p.default.input?(u=e.data("editablerow-previous"),n.type===p.default.keydown&&u===r?e.data("editablerow-previous",s.value):(n.type===p.default.keyup||n.type===p.default.input)&&(i=s.value!==
(u||""))):i=!0,i&&(h=o(this).closest("tr."+t),f._rowEdit(h[0],n.type)));n.type==="fxvaluechanged"&&n.stopPropagation()};n.ltm.registerForDispose(n.element.setEvents(["keydown keyup change","tr."+t+" input, tr."+t+" select, tr."+t+" textarea",d],["fxvaluechanged","tr",d]))},h.prototype.getOrder=function(){return 14},h.prototype.getDependencies=function(){return[new s.FocusableRowExtension]},h.prototype.beforeDestroy=function(){this._isDisposed=!0},h.prototype.shouldRetainRowMetadata=function(n){return this._createdItems().some((function(t){return n.item===t}))},h.prototype.getName=function(){return h.Name},h.prototype.setRowAriaLabel=function(n){n.emptyRow()&&n.ariaLabel(this._options.newRowAriaLabel||v.Grid.newRowAriaLabel)},h.prototype._rowAdd=function(n){var i=this._widget,r=!0,t=ht(n),u={targets:o(n).find(">td.azc-grid-cell").children(),editableRow:t,preventExitEditing:function(){r=!1}};(t.existingItem||yt(t))&&!w(t.rowMetadata)&&et(n)&&(t.rowMetadata._addedOnce=!0,i.trigger("rowAdd",
null,u),i.options.events("rowAdd",u),r&&t.rowMetadata.editing(!1))},h.prototype._rowEdit=function(n,t){var i={targets:o(n).find(">td.azc-grid-cell").children(),editableRow:ht(n),type:t};i.editableRow.rowMetadata.editState(i.editableRow.existingItem?2:1);this._widget.trigger("rowEdit",null,i);this._widget.options.events("rowEdit",i)},h.prototype._editableRowFormat=function(n){var t=this.options.editableFormatter;return t?t({rowMetadata:n}):""},h.prototype._editableCellFormat=function(n,t){return t.editableFormatter?t.editableFormatter(n.item[t.itemKey],{item:n.item,rowMetadata:n,column:t}):""},h.prototype._isRowEdited=function(n){return n.editState()!==0},h.prototype._isRowDeleted=function(n){return n.editState()===3},h.Name=f,h})(h.Extension);n.EditableRowExtension=pt})(w||(w={})),w}));define("MsPortalImpl.Controls/Controls/Base/Formatters",["require","exports","f","ko","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers",
"MsPortalFx/Globalization","MsPortalImpl/Base/Base.Sanitization","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","MsPortalImpl/Resources/ImplScriptResources"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(t){function tt(n,t,i,r,e){var h=!!e,s;switch(t){case u.ShortTime:return f.date(o.DateTimeFormat.shortTimePattern,i);case u.LongTime:return f.date(o.DateTimeFormat.longTimePattern,i);case u.ShortDate:return f.date(o.DateTimeFormat.shortDatePattern,i);case u.LongDate:return f.date(o.DateTimeFormat.longDatePattern,i);case u.MonthDay:return f.date(o.DateTimeFormat.monthDayPattern,i);case u.YearMonth:return f.date(o.DateTimeFormat.yearMonthPattern,i);case u.CustomDate:return f.date(r.dateFormat||"",i);case u.TextLookup:return f.textLookup(r.textLookup||{});case u.Text:return f.text;case u.Number:return f.numberFormat(r.numberFormat);case u.Icon:return it;case u.HtmlBindings:return f.htmlBindings(rt(r.htmlBindingsType,r.htmlBindingsTemplate,
h),ut(n,r.htmlBindingsType,r.htmlBindingsData));case u.PercentageBar:return f.percentageBar(r.percentageBar||{})}switch(t){case u.Html:s=f.html;break;case u.IconLookup:s=f.iconLookup(r.iconLookup||{});break;case u.Uri:s=f.uri;break;default:s=f.text}return h||(s=ft(s)),s}function it(n){var t=r.unwrap(n),i=e.isUndefined,u=t&&!i(t.text)&&!i(t.uri)?t.uri:t;return s.sanitizeUri(u+"")?f.icon(n):""}function rt(t,i,r){var u=i||"";switch(t){case a.MultiselectDropDown:case a.TextBox:case a.CheckBox:case a.DropDown:case a.CheckBoxRowSelection:return"<div data-bind='formElement: $data'><\/div>"}return r?u:c.sanitizeHTML(new p(u,n)).sanitizedMarkup}function ut(n,t,i){switch(t){case a.MultiselectDropDown:return v.multiselectDropDown(n,i);case a.TextBox:return v.textBox(n,i);case a.CheckBox:return v.checkBox(n,i);case a.DropDown:return v.dropDown(n,i);case a.CheckBoxRowSelection:return v.rowSelectionCheckBox(n);case a.Default:default:return function(n,t,i){return{value:t,settings:i}}}}function ft(t){
return function(i,r){switch(t){case f.uri:r=r||{};r.cssClass="msportalfx-link-primary"}var u=t(i,r);return c.sanitizeHTML(new p(u,n)).sanitizedMarkup}}var p=h.ProvenanceContainer,w=i.ViewModels.Controls.Lists.Grid,u=w.Format,a=w.HtmlBindingsType,b=i.ViewModels.Forms,k=b.CheckBox.ViewModel,d=i.ViewModels.Obsolete.Forms.GroupDropDown,g=i.ViewModels.Obsolete.Forms.MultiSelectDropDown,nt=b.TextBox.ViewModel,y={invalidBindingData:"The formatOptions property was not correctly set. The htmlBindingsData needs to be specified correctly for rendering the {0}."},v;(function(n){function u(n,u){return function(f,e,o){var s,h=i(e),c,l;if(!f||!u||!r.isObservable(u.groups))throw new Error(y.invalidBindingData.format("MultiselectDropDownFormField"));return c=r.observable(h()),l={getOriginalObservable:function(){return c},getEditableObservable:function(){return h},createdByBaseFormClass:!0},s=new g.ViewModel(n,{label:r.observable(u.label||""),groups:u.groups,multiselect:u.multiselect,validations:r.observableArray(
u.validations),infoBalloonContent:r.observable(u.infoBalloonContent),ariaLabel:o&&o.column&&o.column.name}),s.maxSelectAllowed=u.maxSelectAllowed,s.multiItemsDisplayFormat=u.multiItemsDisplayFormat,s.multiItemsMaxDisplayFormat=u.multiItemsMaxDisplayFormat,s.valueSeparator=u.valueSeparator,s.displaySeparator=u.displaySeparator,s._setEditScopeAccessors(l),t(n,s,h,o&&o.rowMetadata,u&&u.validate),s}}function f(n,u){return function(f,e,o){var s=i(e);if(!f||!u||!r.isObservable(u.items))throw new Error(y.invalidBindingData.format("GroupDropDownFormField"));var c=r.observable(s()),l={getOriginalObservable:function(){return c},getEditableObservable:function(){return s},createdByBaseFormClass:!0},h=new d.ViewModel(n,{label:r.observable(u.label||""),items:u.items,validations:r.observableArray(u.validations),infoBalloonContent:r.observable(u.infoBalloonContent),filter:u.filter,filterPlaceholder:u.filterPlaceholder,customFilter:u.customFilter,multiselect:u.multiselect,selectAll:u.selectAll,selectAllOverride:
u.selectAllOverride,ariaLabel:o&&o.column&&o.column.name});return h._setEditScopeAccessors(l),t(n,h,s,o&&o.rowMetadata,u&&u.validate),h}}function e(n,u){return function(f,e,o){var h=i(e),s,c=r.observable(h()),l={getOriginalObservable:function(){return c},getEditableObservable:function(){return h},createdByBaseFormClass:!0};return s=new nt(n,{label:r.observable(u&&u.label?u.label:""),valueUpdateTrigger:4,validations:r.observableArray(u?u.validations:null),emptyValueText:r.observable(u?u.emptyValueText:null),infoBalloonContent:r.observable(u?u.infoBalloonContent:null),ariaLabel:o&&o.column&&o.column.name}),s._setEditScopeAccessors(l),t(n,s,h,o&&o.rowMetadata,u&&u.validate),s}}function o(n,u){return function(f,e,o){var s=i(e),c=r.observable(s()),l={getOriginalObservable:function(){return c},getEditableObservable:function(){return s},createdByBaseFormClass:!0},h=new k(n,{label:r.observable(u&&u.label?u.label:""),validations:r.observableArray(u?u.validations:null),infoBalloonContent:r.observable(
u?u.infoBalloonContent:null),inlineLabel:!0,ariaLabel:o&&o.column&&o.column.name});return h._setEditScopeAccessors(l),t(n,h,s,o&&o.rowMetadata,u&&u.validate),h}}function s(n,u){return function(f,e,o){var s=i(e),h,c,l;if(!u||!r.isObservable(u.options))throw new Error(y.invalidBindingData.format("DropDownFormField"));return s()===undefined&&s(u.options()[0].value),c=r.observable(s()),l={getOriginalObservable:function(){return c},getEditableObservable:function(){return s},createdByBaseFormClass:!0},h=new d.ViewModel(n,{label:r.observable(u.label||""),items:u.options,validations:r.observableArray(u.validations),infoBalloonContent:r.observable(u.infoBalloonContent),ariaLabel:o&&o.column&&o.column.name}),h._setEditScopeAccessors(l),t(n,h,s,o&&o.rowMetadata,u&&u.validate),h}}function h(n){return function(t,i,r){i=r.rowMetadata.selected;var f=new k(n,{ariaLabel:l.Grid.selectionCheckBoxAriaLabel}),u=!1,e=!0;return i.subscribe(n,(function(n){try{u=!0;f.value(n)}finally{u=!1}})),f.value.subscribe(n,
(function(n){if(!e&&!u)try{u=!0;f.value(!n)}finally{u=!1}e=!1})),f}}function t(n,t,i,u,f){if(t.rowMetadata=u,u.editState&&u.editState()===0){t.performValidation(!1);var e=n.createChildLifetime();i.subscribe(e,(function(){u.editState()!==0&&(t.performValidation()||t.performValidation(!0),t.ensureValidation())}));f&&r.isObservable(f)&&(f.subscribe(n,(function(){t.validate(t.validate()+1)})),u.editing.subscribe(e,(function(n){n||e.dispose()})))}}function i(n){return r.isObservable(n)?n:r.observable(n)}n.multiselectDropDown=u;n.groupDropDown=f;n.textBox=e;n.checkBox=o;n.dropDown=s;n.rowSelectionCheckBox=h})(v=t.ControlViewModels||(t.ControlViewModels={}));t.getFormatter=tt})(a||(a={})),a}));define("_generated/Less/Viva.Controls/Controls/Viva.DockedBalloon.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-dockedballoon.azc-dockedballoon-info{display:inline-block;text-align:center;width:20px;height:20px;cursor:pointer;position:relative}.azc-dockedballoon.azc-dockedballoon-info .azc-dockedballoon-anchor{width:100%;height:100%;stroke:none}.azc-dockedballoon.azc-dockedballoon-info .azc-dockedballoon-anchor img{display:inline-block;margin-top:5px}.azc-dockedballoon-requiredwidget.azc-dockedballoon-required{display:inline-block;text-align:center;width:11px;height:6px;cursor:pointer;position:relative}.azc-required-anchor{height:6px;width:6px;margin-right:5px}.azc-required-anchor svg{vertical-align:4px}.azc-dockedballoon-anchor-target{height:9px;width:9px;margin-left:3px}.azc-dockedballoon-validation{display:inline-block;vertical-align:top;box-sizing:border-box}.azc-dockedballoon-validation .azc-dockedballoon-anchor{cursor:pointer;font-weight:700;color:#fff;font-size:12px;text-align:center;text-decoration:none;display:block}.azc-dockedballoon-validation .azc-dockedballoon-anchor svg{display:none}.azc-dockedballoon-validation .azc-dockedballoon-anchor:before{content:"!"}.azc-dockedballoon-required{fill:#e81123}')})
);define("Viva.Controls/Controls/Viva.DockedBalloon",["require","exports","f","o","ko","$","MsPortalImpl.Controls/Controls/Base/WidgetBinding","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Generated/SvgStartupDefinitions","../Util/Viva.Util","./Base/Viva.Base","./Viva.Balloon","../../_generated/Less/Viva.Controls/Controls/Viva.DockedBalloon.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var v;return (function(n){function tt(t){for(var r,u=t.findByClassName(n.classes.anchor),i=0;i<u.length;i++)r=e.contextFor(u[i]),r.$vm.balloonVisible(!1),r.$ctl._balloonPinned=!1}var k=i.Base.Images,g=i.getUniqueId,w,b;n.classes={widget:"azc-dockedballoon",requiredWidget:"azc-dockedballoon-requiredwidget",anchor:"azc-dockedballoon-anchor",anchorTarget:"azc-dockedballoon-anchor-target",balloon:"azc-dockedballoon-balloon",info:"azc-dockedballoon-info",required:"azc-dockedballoon-required",validation:"azc-dockedballoon-validation azc-bg-default",
balloonVisible:"azc-dockedballoon-balloonVisible"};var v=window,t=jQuery,y=n.classes,d="scroll.dockedBalloon",nt="<div class='"+n.classes.anchor+'\' data-bind=\'attr: { "aria-hidden" : $ctl._isCheckPopulated() || $ctl._isRequired(), "aria-label": $("<p>" + ko.unwrap(data.content) + "<\/p>").text(), "aria-expanded": data.balloonVisible().toString(), "aria-owns": data.balloonId, "aria-controls": data.balloonId }\' aria-haspopup=\'true\' role=\'button\'><!-- ko if: $ctl._isImageShown() -->'+("<div class='fxs-portal-svg-secondary azc-fill-hovered-heavy "+n.classes.anchorTarget+"' data-bind='css: { \"azc-fill-heavy\": data.balloonVisible() }'>")+"<span data-bind='image: $ctl._circleIcon'><\/span><\/div><!-- /ko --><!-- ko if: $ctl._isCheckPopulated() --><span data-bind=\"image: $ctl._checkIcon\"><\/span><!-- /ko --><!-- ko if: $ctl._isRequired() --><div data-bind='image: $ctl._requiredIcon' class='azc-required-anchor'><\/div><!-- /ko --><\/div>"+("<div role='tooltip' class='"+n.classes.balloon+
"' data-bind='attr: { id: data.balloonId }'><\/div>"),p=[],f={info:{showImage:!0,offsets:{horizontal:{preferred:0,alternate:0},vertical:{preferred:12,alternate:12}},altText:"Info"},validation:{showImage:!1,offsets:{horizontal:{preferred:-8,alternate:-8},vertical:{preferred:0,alternate:0}}},required:{showImage:!1,offsets:{horizontal:{preferred:-8,alternate:-8},vertical:{preferred:0,alternate:0}},required:!0}};p[0]="info";p[2]="validation";p[3]="required";w=(function(t){function i(){t.apply(this,arguments);this.type=0;this.position=u.observable(0);this.content=u.observable("");this.link=u.observable();this.balloonVisible=u.observable(!1);this.stopClickPropagation=u.observable(!0);this.isTabbable=u.observable(!0);this.balloonId=n.classes.balloon+"-"+g()}return __extends(i,t),i})(l.ViewModel);n.ViewModel=w;b=(function(i){function e(r,u,f){i.call(this,r,u,t.extend({viewModelType:w},f));this._requiredIcon=h.Content.SvgStartup.requiredField;this._circleIcon=k.StatusBadge.Solid.Info({isLogo:!0});
this._checkIcon=k.Check({palette:4});this._typeString=p[this.options.type];this._balloonHoverTimeoutHandle=null;this.element.addClass(this.options.type===3?n.classes.requiredWidget:n.classes.widget).addClass(y[this._typeString]).html(nt).find("."+n.classes.balloon).addClass(y[this._typeString]);this._bindDescendants();this._initializeBalloonWidget();this._initializeKoDependencies();this._attachEvents()}return __extends(e,i),e.prototype.dispose=function(){if(!this._checkExistsOrRegisterDestroyId(i.prototype.dispose)){this._balloonViewModel&&(this._balloonViewModel=null);this._detachEvents();this._cleanElement();for(var n in y)this.element.removeClass(y[n]);i.prototype.dispose.call(this)}},r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype._initializeKoDependencies=function(){var t=this,i=this._balloonViewModel,r=this.ltm,f=this.options;u.computed(r,f.link,(function(n){i.link(n)}));this._balloonViewModel.visible.subscribe(
r,f.balloonVisible);u.computed(this.ltm,i.visible,(function(n){n||(t._balloonPinned=!1)}));u.computed(r,f.isTabbable,(function(n){t.tabindex(n?0:-1)}));u.computed(r,this.$tabIndex,(function(i){t.element.findByClassName(n.classes.anchor).attr("tabindex",i)}));i.box((function(){return a.getBox(t.element.findByClassName(n.classes.anchor))}));u.computed(r,f.balloonVisible,(function(r){if(t._scrollableParents&&(t._scrollableParents.off(d,t._parentScrollHandler),t._scrollableParents=null,t._parentScrollHandler=null),r){t._scrollableParents=c.getScrollableParents(t.element,!0);t._scrollableParents.on(d,t._parentScrollHandler=function(){t._scrollOrResizeWindow()})}i.visible(r);t.element.toggleClass(n.classes.balloonVisible,r)}));u.isObservable(f.content)?f.content.subscribe(r,(function(n){i.content(n)})):i.content(this.options.content);this.$disabled.subscribe(r,(function(n){if(n!==i.disabled()){i.disabled(n);t._balloonPinned=!1;var r=t.options;n&&r.balloonVisible()&&r.balloonVisible(!1)}}));f.position.subscribe(
r,(function(n){i.position(n)}))},e.prototype._initializeBalloonWidget=function(){var r=this,e=this.element.find("div."+n.classes.balloon),i=this._balloonViewModel=new a.ViewModel,f;i.visible(this.options.balloonVisible());i.content(u.unwrap(this.options.content));i.position(this.options.position());i.horizontalOffset=this._getOffset("horizontal");i.verticalOffset=this._getOffset("vertical");i.closeOtherBalloons=!0;f=new a.Widget(e,i);this.ltm.registerForDispose([f,function(){e[0].addEventListener("click",(function(n){(n.target===r.element[0]||t.contains(r.element[0],n.target))&&(i.visible(!1),r._balloonPinned=!1,n.stopPropagation())}),!0)},]);this.balloonTextElemId=f.balloonTextElemId;this.element.children("div."+n.classes.anchor).attr("aria-describedby",this.balloonTextElemId)},e.prototype._attachEvents=function(){var i=this;this._detachEvents();this._mouseEnterHandler=function(){i._mouseEnter()};this._mouseLeaveHandler=function(){i._mouseLeave()};this._anchorClickHandler=function(n){n.preventDefault(
);i._anchorClick(n)};this._anchorFocusInHandler=function(){i._anchorFocusIn()};this._anchorFocusOutHandler=function(){i._anchorFocusOut()};this._keyDownHandler=function(n){i._keyDown(n)};this.element.find("."+n.classes.anchor).on("click",this._anchorClickHandler).end().on(s.default.focusin,this._anchorFocusInHandler).on(s.default.focusout,this._anchorFocusOutHandler).on(s.default.keydown,this._keyDownHandler).on(s.default.mouseenter,this._mouseEnterHandler).on(s.default.mouseleave,this._mouseLeaveHandler);t(v).on(s.default.resize,this._resizeEventHandler=function(){i._scrollOrResizeWindow()}).on(s.default.mousedown,this._documentMouseDownHandler=function(n){i._documentMouseDown(n)})},e.prototype._detachEvents=function(){var i=this.element.findByClassName(n.classes.anchor);this._mouseEnterHandler&&(this.element.off(s.default.mouseenter,this._mouseEnterHandler),this._mouseEnterHandler=null);this._mouseLeaveHandler&&(this.element.off(s.default.mouseleave,this._mouseLeaveHandler),this._mouseLeaveHandler=
null);this._anchorClickHandler&&(i.off("click",this._anchorClickHandler),this._anchorClickHandler=null);this._anchorFocusInHandler&&(this.element.off(s.default.focusin,this._anchorFocusInHandler),this._anchorFocusInHandler=null);this._anchorFocusOutHandler&&(this.element.off(s.default.focusout,this._anchorFocusOutHandler),this._anchorFocusOutHandler=null);this._keyDownHandler&&(this.element.off(s.default.keydown,this._keyDownHandler),this._keyDownHandler=null);this._resizeEventHandler&&(t(v).off(s.default.resize,this._resizeEventHandler),this._resizeEventHandler=null);this._documentMouseDownHandler&&(t(v).off(s.default.mousedown,this._documentMouseDownHandler),this._documentMouseDownHandler=null)},e.prototype._mouseEnter=function(){var n=this;this._balloonPinned||this._balloonHoverTimeoutHandle||(this._balloonHoverTimeoutHandle=v.setTimeout((function(){n.options.balloonVisible(!0);n._clearBalloonHoverTimeout()}),200))},e.prototype._anchorClick=function(n){n.preventDefault();var t=this.options;
t.stopClickPropagation()&&n.stopPropagation();this._balloonPinned?(t.balloonVisible(!1),this._balloonPinned=!1):(t.balloonVisible(!0),this._balloonPinned=!0)},e.prototype._mouseLeave=function(){this._clearBalloonHoverTimeout();this._balloonPinned||this.options.balloonVisible(!1)},e.prototype._keyDown=function(n){(n.keyCode===13||n.keyCode===32)&&(n.stopImmediatePropagation(),this.options.balloonVisible(!0),n.preventDefault())},e.prototype._clearBalloonHoverTimeout=function(){this._balloonHoverTimeoutHandle&&(v.clearTimeout(this._balloonHoverTimeoutHandle),this._balloonHoverTimeoutHandle=null)},e.prototype._anchorFocusIn=function(){this.element.findByClassName(n.classes.anchorTarget).addClass("azc-fill-heavy")},e.prototype._anchorFocusOut=function(){var t=this;this.element.findByClassName(n.classes.anchorTarget).removeClass("azc-fill-heavy");setTimeout((function(){var n=document.activeElement;n!==null&&t.element.has(n).length===0&&(t.options.balloonVisible(!1),t._balloonPinned=!1)}),1)},e.
prototype._scrollOrResizeWindow=function(){this._balloonPinned=!1;this.options.balloonVisible(!1)},e.prototype._documentMouseDown=function(n){n.target===this.element[0]||t.contains(this.element[0],n.target)||(this._balloonPinned=!1,this.options.balloonVisible(!1))},e.prototype._isImageShown=function(){return f[this._typeString].showImage},e.prototype._isRequired=function(){return f[this._typeString].required},e.prototype._isCheckPopulated=function(){return this.element.hasClass("azc-dockedballoon-validation")},e.prototype._getOffset=function(n){return{preferred:f[this._typeString].offsets?f[this._typeString].offsets[n].preferred:0,alternate:f[this._typeString].offsets?f[this._typeString].offsets[n].alternate:0}},e})(l.Widget);n.Widget=b;u.bindingHandlers.azcDockedBalloon=o.getBindingHandler(b);n.DismissAllBalloons=tt})(v||(v={})),v}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-button{display:inline-flex;align-items:center;justify-content:center;border-width:1px;border-style:solid;box-sizing:border-box;overflow:hidden;min-width:60px;font-size:12px;padding:2px 22px 3px;height:23px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;text-align:center}.azc-button:focus{outline-width:1px}.azc-button img{margin-right:3px}.azc-button svg{height:100%;width:100%}")})
);define("Viva.Controls/Controls/Forms/Viva.Button",["require","exports","o","ko","$","../Base/Viva.Base","MsPortalImpl/Base/JQueryHelper","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var u=jQuery,t,s,h;(function(n){n[n.Initial=0]="Initial";n[n.Hover=1]="Hover";n[n.Active=2]="Active"})(n.MouseState||(n.MouseState={}));t=n.MouseState;s=(function(n){function i(){n.apply(this,arguments);this.submit=!1;this.selector=r.observable(null);this.toggle=r.observable(!1);this.pressed=r.observable(!1);this.state=r.observable(t.Initial);this.click=u.noop;this.uri=r.observable({});this.text=r.observable({});this.tabindex=r.observable(0);this.visible=r.observable(!0);this.isDefault=r.observable(!1)}return __extends(i,n),i})(f.ViewModel);n.ViewModel=s;h=(function(n){function f(t,i,r){var f=this,e;n.call(this,t,i,u.extend({viewModelType:s},r));this.element.addClass(
"azc-button fxt-button").attr({role:"button",type:"button"}).on("click",this._clickHandler=function(n){return f._click(n)}).on("mousedown",this._mouseDownHandler=function(){f._mouseDown()}).on("mouseenter",this._mouseEnterHandler=function(){f._mouseEnter()}).on("mouseleave",this._mouseLeaveHandler=function(){f._mouseLeave()});if(!this.element.is("button")){e=!1;this.element.on("keydown",this._keyDownHandler=function(n){var t=function(){f.element.trigger("click",n)};n.which===13&&t();e=!1;n.which===32&&(e=!0,n.stopPropagation())}).on("keyup",this._keyUpHandler=function(n){e&&n.which===32&&(e=!1,f.element.trigger("click",n),n.stopPropagation())})}this._initializeComputeds()}return __extends(f,n),f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement("azc-button fxt-button fxs-inner-dotted-border azc-button-default fxs-portal-button-primary fxs-button-default fxs-button-disabled azc-disabled"),this.element.removeAttr("role tabindex aria-pressed aria-disabled aria-label"),
this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null),this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null),this._mouseDownHandler&&(this.element.off("mousedown",this._mouseDownHandler),this._mouseDownHandler=null),this._removeMouseUpHandler(),this._keyUpHandler&&(this.element.off("keyup",this._keyUpHandler),this._keyUpHandler=null),this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),n.prototype.dispose.call(this))},i.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype._initializeComputeds=function(){var n=this,t=this.ltm,u=this.options,i=this.element;this.$tabIndex.subscribeAndRun(t,(function(n){i.attr("tabindex",n)}));r.computed(t,(function(){u.toggle()?i.attr("aria-pressed",
u.pressed()):i.removeAttr("aria-pressed")}));r.computed(t,(function(){var t=u.selector();n._previousSelector!==t&&n._previousImg&&n._previousImg.attr({src:"",alt:""});n._previousSelector=t;n._previousImg=i.find(t).attr({src:n._getUri(),alt:n._getAlt()})}));r.computed(t,(function(){var t=n.$disabled();i.toggleClass("fxs-button-disabled azc-disabled",t).toggleClass("fxs-inner-dotted-border",!t).attr("aria-disabled",t).filter(":button").prop("disabled",t)}));r.computed(t,(function(){var n=u.isDefault();i.toggleClass("azc-button-default fxs-portal-button-primary",n).toggleClass("fxs-button-default",!n)}));r.computed(t,(function(){e.toggle(i,u.visible()!==!1)}));u.tabindex.subscribeAndRun(t,(function(t){n.tabindex(t)}))},f.prototype._click=function(n){return this.$disabled()?!1:(this.options.pressed(!this.options.pressed()),this.options.click&&this.options.click.call(this.element,n),this.options.submit&&this.element.submit(),!0)},f.prototype._getAlt=function(){var n,i,r,u;return(n=this.options.text(),
typeof n=="string")?n:n?(i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase(),i[u]||null):null},f.prototype._getObject=function(n){return this.options.toggle()&&n.normal&&n.pressed&&(n=this.options.pressed()?n.pressed:n.normal),n.enabled&&n.disabled&&(n=this.$disabled()?n.disabled:n.enabled),n},f.prototype._getUri=function(){var n,i,r,u;return(n=this.options.uri(),typeof n=="string")?n:n?(i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase(),i[u]||null):null},f.prototype._mouseDown=function(){var n=this;this.element.addClass("azc-button-state-active");this.options.state(t.Active);this._removeMouseUpHandler();this._body&&this._body.length===1||(this._body=u("body"));this._body.on("mouseup",this._mouseUpHandler=function(){n.element.removeClass("azc-button-state-active");n.options.state(t.Initial);n.element.hasClass("azc-button-state-hover")?n._mouseEnter():n._mouseLeave();n._removeMouseUpHandler()})},f.prototype._mouseEnter=function(){this.element.addClass("azc-button-state-hover");
this.options.state()!==t.Active&&this.options.state(t.Hover)},f.prototype._mouseLeave=function(){this.element.removeClass("azc-button-state-hover");this.options.state()!==t.Active&&this.options.state(t.Initial)},f.prototype._removeMouseUpHandler=function(){this._mouseUpHandler&&(this._body.off("mouseup",this._mouseUpHandler),this._mouseUpHandler=null)},f})(f.Widget);n.Widget=h;r.bindingHandlers.azcButton=o.getBindingHandler(h,{controlsDescendantBindings:!1})})(s||(s={})),s}));define("MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget",["require","exports","f","ko","$","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.DockedBalloon","Viva.Controls/Controls/Viva.Balloon","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(t){var w=h.ProvenanceContainer,v=i.ViewModels,b=v.Forms.SubLabelPosition,
s=jQuery,it=window,rt="azc-text-label",k="azc-text-sublabel",d="msportalfx-tooltip-overflow",ut="azc-text-sublabel-neighbor",y="fxc-left-label",g="fxc-right-sublabel",ft="azc-form-labelcontainer",et="azc-required-balloon",ot="azc-checkBoxField-inlineLabelContainer",nt="fxs-hidden-important",st="msportalfx-form-formelement",ht="azc-formElementContainer",ct="azc-formElementSubLabelContainer",tt="fxc-has-sublabel",p="<div/>",lt="<label/>",at="azc-validationBelowCtrl",u=r.unwrap,a=r.isObservable,vt=(function(){function t(n,t){this._disposables=[];this.ltm=n;this._options=t;this._initializeRequiredComputed();this.ltm.registerForDispose(this)}return t.prototype._initializeRequiredComputed=function(){var t=this,n=this._options.validations;n&&(this.required=r.pureComputed((function(){var i=u(n)||[];return i.firstIndex((function(n){return!!n&&!!n.type&&n.type===1}))>=0&&!!u(t._options.label)})))},t.prototype.appendWidgetToDom=function(n,t){var r=this,i=this._options,e,f;i.subLabel?(e=s(p).addClass(ct).
append(t),n.append(e)):n.append(t);i.subLabel&&(a(i.subLabel)&&i.subLabel.subscribe(this.ltm,(function(t){n.toggleClass(tt,t.length>0)})),f=u(i.subLabel),f&&f.length>0&&n.addClass(tt));this._disposables.push(n.setEvents([l.default.keydown,function(n){if(n.which===112)return r.toggleBalloon(),!1;n.which===27&&r.toggleBalloon(!1)}],[l.default.focusout,function(){it.setTimeout((function(){r._disposables.length&&!s.contains(n[0],document.activeElement)&&r.toggleBalloon(!1)}))}]))},t.prototype.insertLabelBefore=function(n,t){var r,i;t===void 0&&(t={});r=this._options.subLabel&&!t.inlineLabel?n.parent():n;this.labelContainer=this._createLabelContainer(t.inlineLabel?ot:ft);i=this.labelContainer;i&&(t.inlineLabel?r.after(i):r.before(i),t.emptyLabel||this._appendLabelContent(i))},t.prototype._createLabelContainer=function(n){var i=null,t=this._options;return(t.label||t.infoBalloonContent||t.infoBalloonLinkContent)&&(i=s(p).addClass(n).addClass(rt),r.reactor(this.ltm,(function(){var n=(u(t.label)||u(
t.infoBalloonContent)||t.infoBalloonLinkContent())&&u(t.labelPosition)!==v.Forms.LabelPosition.Hidden;i.toggleClass(nt,!n);i.attr("aria-hidden",n?null:!0)}))),i},t.prototype._appendLabelContent=function(t){var ot=this,b=this._options,tt=b.label,ft=v.Forms.LabelPosition,k,ut,it,h,d,g,rt,l;tt&&(this.labelId="azc-form-guid-"+i.getUniqueId(),k=s("<label id='"+this.labelId+"' for='"+this.labelId+"-for'><\/label>"),ut=function(){var i=c.sanitizeHTML(new w(u(tt),n),!0).sanitizedMarkup;k.html(i);i&&(k.parent()[0]||t.append(k),r.applyBindingsToDescendants(r.contextFor(k[0]),k[0]))},this.required&&(it=s(p).addClass(et),h=null,this.required.subscribeAndRun(this.ltm,(function(n){n&&!h&&(h=new o.ViewModel,h.type=3,a(h.content)&&h.content(e.requiredField),h.isTabbable(!1),ot.ltm.registerForDispose(new o.Widget(it,h)),t.prepend(it));f.toggle(it,n)}))),a(b.labelPosition)?b.labelPosition.subscribeAndRun(this.ltm,(function(n){t.parent().toggleClass(y,n===ft.Left)})):t.parent().toggleClass(y,b.labelPosition===
ft.Left),a(tt)?tt.subscribeAndRun(this.ltm,(function(){ut()})):ut());d=b.infoBalloonContent;g=b.infoBalloonLinkContent;(d||g)&&(this.labelId=this.labelId||"azc-form-guid-"+i.getUniqueId(),this.balloonId=this.labelId+"-balloon",rt=s("<div id='"+this.balloonId+"'/>"),l=new o.ViewModel,l.type=0,l.position(1),l.isTabbable(!1),d&&(l.content=d),g&&(l.link=g),this._widget=new o.Widget(rt,l),this.balloonTextElemId=this._widget.balloonTextElemId,this.ltm.registerForDispose(this._widget),t.append(rt),r.reactor(this.ltm,(function(){rt.toggleClass(nt,!u(d)&&!u(g))})))},t.prototype.insertSubLabelAfter=function(t){var i=this,u=this._options,f;u.subLabel&&(f=r.utils.wrap(u.subLabel),this._subLabelElement=s(lt).addClass(k).addClass(d),f.subscribeAndRun(this.ltm,(function(r){i._subLabelElement.html(r?c.sanitizeHTML(new w(r,n)).sanitizedMarkup:"");var u=i._subLabelElement.html().length>0;i.labelContainer&&i.labelContainer.toggleClass(ut,u);i._subLabelElement.attr("aria-hidden",u?null:!0);i._updateWidth(t)})),
t.after(this._subLabelElement),u.subLabelPosition&&(a(u.subLabelPosition)?u.subLabelPosition.subscribeAndRun(this.ltm,(function(n){i._rightSublabel=n===b.Right;i._updateWidth(t)})):(this._rightSublabel=u.subLabelPosition===b.Right,this._updateWidth(t))))},t.prototype.insertValidationMessageBelowControlAfter=function(n,t,i){t.element.addClass(at);var u=s("<label class='azc-validation-messages "+d+"' id='"+this.labelId+"-err' aria-live='polite' aria-atomic='true'><!-- ko foreach: items --><!-- ko if: state === 1 --><div data-bind=\"untrustedHtml: message\"><\/div><!-- /ko --><!-- /ko --><\/label>");n.after(u);r.applyBindings({items:i},u[0])},t.prototype.toggleBalloon=function(n){if(this._widget&&this._widget.options&&this._widget.element.filter(":visible").length){var t=this._widget.options.balloonVisible;i.isNullOrUndefined(n)&&(n=!t());t(n)}},t.prototype._updateWidth=function(n){var t="style",i=n.parent(),r=i.findByClassName(ht),u=n.closest("."+st),f;this._subLabelElement.html().length>0&&
this._rightSublabel?(u.addClass(g),f=i.findByClassName(k).width()+1,r.attr(t,"width: calc(100% - "+f+"px)")):(r.attr(t,""),u.removeClass(g))},t.prototype.dispose=function(){var n=this.labelContainer,t=this._subLabelElement;n&&(n.parent().removeClass(y),n.remove());t&&t.remove();i.disposeDisposable(this._disposables);this._disposables=[]},t})();t.LabelAndBalloonWidgetHelper=vt})(a||(a={})),a}));define("_generated/Less/Viva.Controls/Controls/Base/Viva.ValidationPlacements.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-validatableControl .azc-dockedballoon-validation,.azc-validatableControl-valid-validated .azc-dockedballoon-anchor::before,div.azc-validationBelowCtrl .azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,div.azc-validationBelowCtrl.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation{display:none}.azc-dropdown.azc-validatableControl-invalid,.azc-editableCombo.azc-validatableControl-invalid,.azc-inputbox.azc-validatableControl-invalid,.azc-inputbox.azc-validatableControl-pending,.azc-inputbox.azc-validatableControl-valid-validated{padding-right:14px}.azc-dropdown.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-editableCombo.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-pending div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-valid-validated div.azc-dockedballoon.azc-dockedballoon-validation{display:inline-block;width:14px;margin-right:-14px}.azc-checkBox.azc-validatableControl-invalid .azc-dockedballoon-validation{display:inline-block}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid,div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid .azc-validatableControl-invalid{padding-right:0}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid.azc-validation-border{border-width:2px;border-style:solid;border-color:#e81123;width:100%}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid.azc-validation-border.azc-optionPicker{width:calc(100% - 4px)}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid .azc-validation-border{border-width:2px;border-style:solid;border-color:#e81123;width:100%}.fxc-group-dropdown.azc-validationBelowCtrl .azc-validatableControl-invalid div.azc-validation-border{border-width:2px;border-style:solid;border-color:#e81123;width:100%;width:calc(100% - 12px);padding-right:0}.fxc-group-dropdown.azc-validationBelowCtrl .azc-validatableControl-invalid .fxc-group-dropdown-arrow:before{right:10px}.fxc-group-dropdown.fxc-dropdown-filter.azc-validationBelowCtrl:not(.fxc-dropdown-multiselect) .azc-validatableControl-invalid{height:25px}.fxc-group-dropdown.fxc-dropdown-filter.azc-validationBelowCtrl:not(.fxc-dropdown-multiselect) .azc-validatableControl-invalid .azc-validation-border{width:100%;height:25px;padding-top:2px;padding-bottom:3px}.azc-validation-messages{clear:both;line-height:15px;margin-top:5px;color:#b40e1b}.azc-validation-messages.azc-show-validation{display:block}.azc-validatableControl.azc-textBox{box-sizing:border-box}.azc-validatableControl-invalid .azc-dockedballoon-validation .azc-dockedballoon-anchor{padding-top:3px;line-height:normal}.azc-checkBox .azc-dockedballoon-validation .azc-dockedballoon-anchor{padding:0 2px 0 0}.azc-validatableControl-invalid .azc-inputbox-wrapper{display:inline-block}.azc-validatableControl-pending{overflow:visible;position:relative}.azc-validatableControl-pending .azc-dockedballoon-validation .azc-dockedballoon-anchor:before{content:url(Content/static/azc-validatableControl-pending.gif);position:absolute;top:4px;right:3px}.azc-validatableControl-pending .azc-dockedballoon-validation .azc-dockedballoon-anchor,.azc-validatableControl-valid-validated .azc-dockedballoon-validation .azc-dockedballoon-anchor{cursor:default;padding:1px 1px 0 0}.fxc-selector-requiredBalloon .azc-dockedballoon-anchor{padding:0}.azc-validatableControl-pending .azc-inputbox-wrapper,.azc-validatableControl-valid-validated .azc-inputbox-wrapper{display:inline-block;margin:0;padding:0;border-width:0;text-decoration:none;border-right-color:transparent;float:left}.azc-validatableControl-pending .azc-dockedballoon-validation,.azc-validatableControl-valid-validated .azc-dockedballoon-validation{border-width:1px 1px 1px 0;border-style:solid;outline:0}.azc-inputbox.azc-validatableControl-pending .azc-inputbox-wrapper .azc-input,.azc-inputbox.azc-validatableControl-valid-validated .azc-inputbox-wrapper .azc-input{border-right-width:0}.azc-validatableControl-valid-validated .azc-dockedballoon-validation .azc-dockedballoon-anchor svg{display:block;height:10px;width:10px;margin-top:5px}")})
);define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.Base",["require","exports","ko","../../../Util/Viva.Util","../../../../_generated/Less/Viva.Controls/Controls/Base/Viva.ValidationPlacements.css"],(function(n,t,i,r){"use strict";var u;return (function(n){var t=(function(){function n(){this._destroyIds=[]}return n.prototype._checkExistsOrRegisterDestroyId=function(n){return r.existsOrRegisterId(this._destroyIds,n)},n.prototype.isDestroyed=function(){return this._destroyIds.length>0},n.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||(this._errorMessage&&(this._errorMessage.dispose(),this._errorMessage=null),this._disposeSubscriptions())},n.prototype.initialize=function(n,t){var r=this;this._element=n;this._validatable={enableValidation:t.enableValidation,valid:t.valid,validationState:t.validationState,validators:t.validators};this._errorMessage||(this._errorMessage=i.computed((function(){var u="",i=r._validatable.validators(),n,t;if(i)for(n=0;n<i.length;
n++)if(t=i[n],!t.valid()&&t.message()){u=t.message();break}return u})));this._subscriptions||this._initializeSubscriptions()},n.prototype.onErrorMessageChanged=function(){},n.prototype.onValidationStateChanged=function(){},n.prototype._initializeSubscriptions=function(){var n=this;this._subscriptions=this._subscriptions||[];this._disposeSubscriptions();this.onValidationStateChanged(this._validatable.validationState());this._subscriptions.push(this._validatable.validationState.subscribe((function(t){n.onValidationStateChanged(t)})));this.onErrorMessageChanged(this._errorMessage());this._subscriptions.push(this._errorMessage.subscribe((function(t){n.onErrorMessageChanged(t)})))},n.prototype._disposeSubscriptions=function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},n})();n.Base=t})(u||(u={})),u}));define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css",["require","exports","o","ko","$","./Viva.Base"],(function(n,t,i,r,u,f){"use strict";
var e;return (function(n){var t=[],e="azc-validatableControl-none",o="azc-validatableControl-invalid",s="azc-validatableControl-pending",i="azc-validatableControl-valid-validated",h="data-validatable-control-valid",l="data-validatable-control-validation-state",c;t[0]="none";t[1]="invalid";t[2]="valid";t[3]="pending";c=(function(n){function f(){n.apply(this,arguments);this._input=null;this._valid=r.computed(u.noop)}return __extends(f,n),f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([e,o,s,i].join(" ")),this._input&&this._input.removeAttr(h),this._valid&&(this._valid.dispose(),this._valid=null))},f.prototype.initialize=function(t,u){var f=this;n.prototype.initialize.call(this,t,u);this._valid=r.computed((function(){return f._validatable.enableValidation()&&f._validatable.validators().length>0&&f._validatable.validationState()===2}));this._subscriptions.push(this._valid.subscribe(
(function(n){f._element.toggleClass(i,n)})));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());this._setValidationAttribute(this._validatable.validationState())},f.prototype.onValidationStateChanged=function(n){var t=this._element;t.toggleClass(e,n===0);t.toggleClass(o,n===1);t.toggleClass(s,n===3);t.toggleClass(i,this._valid());this._setValidationAttribute(n)},f.prototype._setValidationAttribute=function(n){this._input&&(this._input.attr(h,n===2||this._validatable.validators().length===0),this._input.attr(l,t[n]))},f})(f.Base);n.Css=c})(e||(e={})),e}));define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.DockedBalloon",["require","exports","o","ko","../Viva.Validators","../../Viva.DockedBalloon","./Viva.Base"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var u=jQuery,t={length:4},i;t[0]="none";t[1]="invalid";t[2]="valid";t[3]="pending";i=(function(n){function i(t){n.call(
this);this._inputSelector="input, select";this._settings=t}return __extends(i,n),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._detachEvents(),this._widget&&(this._widget.dispose(),this._widget=null),this._element&&this._widgetElement&&(r.cleanNode(this._widgetElement[0]),this._widgetElement.remove()),this._errorMessagesListWidget&&(this._errorMessagesListWidget.dispose(),this._errorMessagesListWidget=null))},i.prototype.onValidationStateChanged=function(i){if(n.prototype.onValidationStateChanged.call(this,i),!this._widgetElement){if(i===0)return;this._createDockedBalloon()}if(this._widgetElement.removeClass("fxs-bg-error"),this._inputElement)switch(i){case 0:case 1:this._widgetElement.addClass("fxs-bg-error");case 2:case 3:this._widgetViewModel.disabled(!this._validationStateBalloonOptions[t[i]].balloonVisible)}},i.prototype._setInputSelector=function(n){this._inputSelector=n},i.prototype._createDockedBalloon=
function(){this._inputElement=this._element.find(this._inputSelector);this._widgetElement||(this._widgetElement=u("<div />"));this._widgetViewModel=new f.ViewModel;this._widgetViewModel.content=this._errorMessage;this._widgetViewModel.isTabbable(!1);this._initializeValidationStateDockedBalloonOptions(this._settings);this._element.append(this._widgetElement);this._widgetViewModel.type=2;var n=this._element.innerHeight();this._widget=new f.Widget(this._widgetElement,this._widgetViewModel);this._widgetElement.css("height",n);this._attachEvents();this.onValidationStateChanged(this._validatable.validationState())},i.prototype._initializeValidationStateDockedBalloonOptions=function(n){var i=function(n){return n!==undefined&&n!==null},u=function(n){return{balloonVisible:n}};if(this._validationStateBalloonOptions={none:u(!1),invalid:u(!0),valid:u(!1),pending:{}},n&&n.validationStateBalloonOptions){var r=n.validationStateBalloonOptions,f=r.none,e=r.invalid,o=r.valid,s=r.pending,t=this._validationStateBalloonOptions;
f&&(t.none.balloonVisible=i(f.balloonVisible)?f.balloonVisible===!0:t.none.balloonVisible);e&&(t.invalid.balloonVisible=i(e.balloonVisible)?e.balloonVisible===!0:t.invalid.balloonVisible);o&&(t.valid.balloonVisible=i(o.balloonVisible)?o.balloonVisible===!0:t.valid.balloonVisible);s&&(t.pending.balloonVisible=i(s.balloonVisible)?s.balloonVisible===!0:t.pending.balloonVisible)}},i.prototype._attachEvents=function(){var n=this;this._detachEvents();this._inputElementFocusHandler=function(){n._onInputElementFocus()};this._inputElementBlurHandler=function(){n._onInputElementBlur()};this._widgetAnchorElementClickHandler=function(n){n.preventDefault()};this._element.find("input,select").on("focus",this._inputElementFocusHandler).on("blur",this._inputElementBlurHandler);this._widgetElement.find("a").on("click",this._widgetAnchorElementClickHandler)},i.prototype._detachEvents=function(){this._inputElementFocusHandler&&(this._inputElement.off("focus",this._inputElementFocusHandler),this._inputElementFocusHandler=
null);this._inputElementBlurHandler&&(this._inputElement.off("blur",this._inputElementBlurHandler),this._inputElementBlurHandler=null);this._widgetAnchorElementClickHandler&&(this._widgetElement.find("a").off("blur",this._widgetAnchorElementClickHandler),this._widgetAnchorElementClickHandler=null)},i.prototype._onInputElementFocus=function(){this._widget&&!this._validatable.valid()&&this._widget.options.balloonVisible(!0)},i.prototype._onInputElementBlur=function(){this._widget&&this._widget.options.balloonVisible(!1)},i.defaultOptions={validationStateBalloonOptions:{pending:{balloonVisible:!1}}},i})(e.Base);n.DockedBalloon=i})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow",["require","exports","o","./Grid1.Impl"],(function(n,t,i,r){"use strict";var u;return (function(n){var t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getName=function(){return"Focusable"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);
n.FocusableRowExtension=t})(u||(u={})),u}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-activateableRow tr.azc-grid-row td[data-activatable=true]{font-family:az_ea_font,wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif}.azc-grid-activateableRow .azc-grid-activateonselected tr.azc-grid-row:not([aria-disabled=true]),.azc-grid-activateableRow tr.azc-grid-row:not([aria-disabled=true]) td[data-activatable=true],.azc-grid-link{cursor:pointer}')}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate",["require","exports","u","o","ko","$","./Viva.Grid1.SelectableRow","../../../Util/Viva.Util","./Viva.Grid1","MsPortalImpl/Base/Base.EventTypes","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";
var c;return (function(n){var v=MsPortalFx,f=v.isNullOrUndefined,i=e.RowSelectionMode,t=jQuery,y="keypress.",c="azcActivation",p="azc-grid-virtualFocus",l="tbody tr[data-grid-activateable=true]",w=l+":not([aria-disabled=true])",a=w+" ["+o.Constants.dataActivatableAttribute+"=true]",b=w+", "+a,d="tbody tr[data-grid-activateable=true]:not([aria-disabled=true])",g='css: { "fxs-portal-selected fxs-portal-activated": activated() }',nt='css: { "azc-grid-activateonselected": $ctl.getPlugin("azc-grid-activateableRow")._activateOnSelected }',tt='attr: { "data-grid-activateable": "true", "data-grid-row-activated": activated() ? "true" : "false" }',it='css: { "azc-grid-link": !$disabled() && link() && link().uri }',rt='attr: { "data-activatable": activatable(), "data-grid-cell-activated": $parent.activated() === $data.itemKey ? "true" : "false" }',ut=v.disposeDisposable,k;n.windowOpen=function(n,t){window.open(n,t)};k=(function(s){function v(n){s.call(this);this._disposables=[];this._options=n=n||{
};this._activatedColumnKey=n.activatedColumnKey||u.observable();this._primaryActivateColumnKey=n.primaryActivateColumnKey||u.observable();this._activateOnSelected=n.activateOnSelected||u.observable(!1);this._preserveSelection=u.observable(!1);this._activatedRow=null;this._selfActivation=!1}return __extends(v,s),r.defineProperty(v.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),v.prototype.getActivatedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return!f(n.activated.peek())}))},v.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("bodyRowsCore"),t="data-bind",f=[tt,it,g],i,r;u.addAttribute("tr",t,f);i=n.getHtmlTemplate("bodyCell");i.addAttribute("td",t,[rt]);r=n.getHtmlTemplate("table");r.addAttribute("table",t,[nt])},v.prototype.getDefaultRowMetadataProperties=function(){return{activated:u.observable(null),activatedInfo:u.observable(null),link:u.observable(null),useDefaultActivation:u.observable(!0)}},
v.prototype.getDefaultColumnProperties=function(){return{activatable:u.observable(!!this.options.activateRow)}},v.prototype.afterAttachEvents=function(){var i=this,n=this;this._disposables.push(this._widget.element.setEvents(["click.azcActivationCell",a,function(t){n._handleActivationKeyPressOrClick(t,this)}],[y+"azcActivationRow",d,function(t){n._handleActivationKeyPressOrClick(t,this)}],[y+"azcActivationCell",a,function(t){n._handleActivationKeyPressOrClick(t,this);t.stopPropagation()}],["rowSelect."+c,function(t,i){n._onRowSelect(t,i)}],["focus."+c,b,function(n){var i=t(n.currentTarget);i.closest(l).addClass(p)}],["blur."+c,b,function(n){var i=t(n.currentTarget);i.closest(l).removeClass(p)}],["beforeRowSelect."+c,function(n,t){i._onBeforeRowSelect(n,t)}]))},v.prototype.afterCreate=function(){var n=this,t=this._widget.ltm,i=this._widget.options;this._selectableRowExtension=this._widget.getPlugin(e.SelectableRowExtension.Name);this._widget._getAllRowMetadata().filter((function(n){return!f(
n.activated.peek())&&n.selected.peek()})).forEach((function(n){n.activated(null)}));u.computed(t,(function(){var t=i.columns();n._firstColumnKey=t&&t.length>0?t[0].itemKey:null}));i.items.map(t,(function(t,i){var r=n._widget.getRowMetadata(i),u=!1;r.selected.subscribe(t,(function(t){var i=n._activateOnSelected();if(t&&i)n._activateRow(r);else if(i&&!u)try{u=!0;r.activated(null)}finally{u=!1}}));r.activated.subscribe(t,(function(t){var i=!f(t);if(i){if(!u&&!n._selfActivation)try{u=!0;n._activateOnSelected()&&r.selected(!0);n._activatedColumnKey.peek()!==t&&n._activatedColumnKey(t)}finally{u=!1}n._activatedRow=r}}))}));u.computed(t,(function(){n._widget.element.toggleClass("azc-grid-selectionActivates",n._activateOnSelected())}));this._widget._getAllRowMetadata().forEach((function(t){t.activated()&&(n._activatedRow=t,n._activateOnSelected()&&t.selected(!0))}))},v.prototype.getOrder=function(){return 40},v.prototype.getDependencies=function(){return[new e.SelectableRowExtension(this.options)]},v.prototype.
beforeDestroy=function(){ut(this._disposables);this._disposables=[]},v.prototype.getName=function(){return v.Name},v.prototype.shouldNotAllowSelectAll=function(){return this._activateOnSelected()},v.prototype.shouldNotChangeSelection=function(n,r){var f=this.options,u=f.mode?f.mode():i.Off,c=u===i.MultipleAdd||u===i.MultipleReplace,e,s;if(!!f.activateRow&&c&&!f.hideMultiSelectCheckbox&&r.type===h.default.click&&t(r.target).closest("td").attr("data-activatable")==="true")return!0;if(u===i.MultipleReplace){if(t(n).attr("aria-selected")==="true"&&!(r.shiftKey||r.ctrlKey)&&(e=t(r.target),s=e.attr(o.Constants.dataActivatableAttribute)==="true"?e:e.closest("["+o.Constants.dataActivatableAttribute+"=true]"),s.length>0&&t.contains(n,s[0])))return!0}else if(u===i.Single||u===i.AlwaysSingle)return r.ctrlKey||r.shiftKey;return!1},v.prototype.previous=function(){return this._selectableRowExtension.previous()},v.prototype.next=function(){return this._selectableRowExtension.next()},v.prototype._changeActivation=
function(n,r){var s=this.options,f=u.dataFor(n),a=t(r.currentTarget),y=a.closest(".azc-grid-cell"),k=t(n).find(".azc-grid-cell"),d=y[0]?y:k,g=u.dataFor(d[0]),p=f.selected.peek(),nt=f.activated.peek(),w=!1,e=g.itemKey,c,l,v,b;if(p&&(r.ctrlKey||r.shiftKey)&&nt===e&&(w=!0),s.activateRow||p||r.type!=="keypress"||(c=o.cloneEvent(r,"keydown"),c.which=32,t.extend(c,{which:32,target:n,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey}),t(n).trigger(c),r.stopPropagation(),r.preventDefault()),w||(this._activatedInfo=a.attr(o.Constants.dataActivateInfoAttribute),this._activatedColumnKey(e)),l=this._activatedRow,l!==null&&l!==f&&l.activated(null),f!==null)if(s.activateRow)f.activated()||s.activateRow(f);else if(v=f.useDefaultActivation,!v||v())try{this._selfActivation=!0;b=s.mode()!==i.MultipleAdd||!(f.activated()!==e&&f.selected());this._activatedColumnKey(e);f.activated(e);b||r.stopPropagation()}finally{this._selfActivation=!1;a.trigger(h.default.fxensurebladevisible,{})}},v.prototype._handleActivationKeyPressOrClick=
function(n,i){if(n.type!==h.default.keypress||n.which===13&&!n.ctrlKey||n.which===10&&n.ctrlKey||n.which===32&&!this.options.activateRow){var r=t(i).closest("tr[data-grid-activateable=true]");r.length>0&&this._changeActivation(r[0],n)}},v.prototype._onBeforeRowSelect=function(n,t){if(this._activateOnSelected()){var i=t&&t.selected,r=i&&i.selected;r&&r()&&this._activateRow(i)}},v.prototype._onRowSelect=function(t,i){var u=i.selected,r,f;u&&(r=u.link&&u.link(),r&&(f=r.uri,f&&(n.windowOpen(f,r.target),this._selectableRowExtension.unselectAllRows())))},v.prototype._activateRow=function(n){this._lastActivatedRow&&this._lastActivatedRow.activated(null);this._lastActivatedRow=n;var t=this._activatedColumnKey();f(t)&&(t=this._primaryActivateColumnKey()||this._firstColumnKey);f(t)||n.activated()===t||n.useDefaultActivation&&!n.useDefaultActivation()||n.activated(t)},v.Name="azc-grid-activateableRow",v})(s.Extension);n.SelectableRowActivateExtension=k})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow",
["require","exports","f","i","o","ko","./Grid1.Extensibility","./Grid1.FocusableRow","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate","../../../../MsPortalImpl/Base/Base.Selectable2.ClickContext","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";var y;return (function(n){var p=i.ViewModels,w=p.Controls.Lists.Grid,t=h.RowSelectionMode,u=i.isNullOrUndefined,y=(function(n){function e(){n.apply(this,arguments);this._lifetime=new r.TriggerableLifetimeManager}return __extends(e,n),e.prototype.beforeDestroy=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},e.prototype.getExtension=function(n){var l=this,u=n,r=f.observable(t.Off),i=u&&u.selectableRow,e,o,s,h;if(i){s=i.selectionMode||0;switch(s){case 1:r(t.Single);break;case 2:r(t.MultipleReplace);break;case 3:r(t.MultipleAdd);break;default:r(t.
Off)}this._activatedColumnKey=i.activatedColumnKey;this._primaryActivateColumnKey=i.primaryActivateColumnKey;this._activateOnSelected=i.activateOnSelected;e=i.disableRequireSingleModeAssistKey;o=i.enableSelectableCursor||f.observable(!1)}return this._activatedColumnKey||(this._activatedColumnKey=f.observable()),this._primaryActivateColumnKey||(this._primaryActivateColumnKey=f.observable()),this._activateOnSelected||(this._activateOnSelected=f.observable(!1)),u.onRowClicked&&(h=function(n){var t=l._selectable2ClickHandler;if(t)t.onClick({item:n.item,metadata:n})}),this._vivaSelectableRowActivation=new c.SelectableRowActivateExtension({mode:r,disableSelectAll:i.disableSelectAll,activatedColumnKey:this._activatedColumnKey,primaryActivateColumnKey:this._primaryActivateColumnKey,activateOnSelected:this._activateOnSelected,disableRequireSingleModeAssistKey:e,enableSelectableCursor:o,hasNextSelectableItem:f.observable(!1),hasPreviousSelectableItem:f.observable(!1),activateRow:h})},e.prototype.
getActivatedColumnKey=function(){return this._activatedColumnKey.peek()||this._primaryActivateColumnKey.peek()},e.prototype.initializeExtension=function(){var c=this,n=this._widget,u=n.options.extensionsOptions,r=this._lifetime,f,e,o=u.onRowClicked,s,t;o&&(s=this._selectable2ClickHandler=l.getListSelectableWithClickHandler(n.options.selectableData,$(n.element),o),s.activationState.subscribe(r,(function(n){var r=n.previous,i,t;r&&r.metadata.activated(null);i=n.current;i&&(t=i.metadata,(!t.useDefaultActivation||t.useDefaultActivation())&&t.activated(c.getActivatedColumnKey()))})));t=n._instance.element;t.on(h.EventTypes.RowSelect,f=function(t,r){var o,s,e,f,h;t.stopPropagation();o=u.selectableRow.rowSelect;o&&o(t,r);s=r._reason;(s===4||s===2)&&(n._instance._ariaLive(""),e=r.selected,f="",e?(f=e.ariaLabel&&e.ariaLabel(),f=i.isNullOrWhiteSpace(f)?a.Grid.rowSelected:a.Grid.rowSelectedTemplate.format(f)):(h=r.unselected[0],f=h.ariaLabel&&h.ariaLabel(),f=i.isNullOrWhiteSpace(f)?a.Grid.rowUnselected:
a.Grid.rowUnselectedTemplate.format(f)),n._instance._ariaLive(f))});r.registerForDispose((function(){t.off(h.EventTypes.RowSelect,f)}));t.on(h.EventTypes.RowClick,e=function(t,i){var f=$(t.target),e=i.rowMetadata,r=f.closest("a"),o=r&&$(i.item).find(r).length>0,u;if(!o){var s=n.options.extensionsOptions,h=s.selectableRow,c=h.selectionMode===1;c&&(t.ctrlKey||t.shiftKey)&&(t.stopPropagation(),t.preventDefault(),u=n.options.selectableData,$(t.target).trigger(v.default.fxopeninnewtab,{selectableSet:u,item:e.item}))}});r.registerForDispose((function(){t.off(h.EventTypes.RowClick,e)}))},e.prototype.getName=function(){return"Selectable"},e.prototype.getOrder=function(){return 1},e.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},e.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var i=this;return this._widget.options.selectableData.selectableItems.subscribe((function(){i._widget._connectMetadataAndDisposeSubscriptions(n,t)}))},e.prototype.disallowConnectRowMetadataProperties=
function(n,t){var r=-1,u=this._widget.options,i;return(u.selectableData.selectableItems().some((function(n,i){return n.data===t.item?(r=i,!0):!1})),r>=0)?(i=-1,u.items().some((function(t,r){return t===n?(i=r,!0):!1})),i===-1)?!1:r!==i:!0},e.prototype.connectRowMetadataProperties=function(n,t,i){var v=this,s=this._widget,h=[],c=s.options.selectableData.selectableItems().first((function(t){return t.data===n})),l=t,r=i,a,e=function(n){h.push.apply(h,n)},o=s._twoWayBinding.bind(s);return r.link&&l.link&&e(o(r.link,l.link)),e(o(c.isSelected,t.selected)),e(o(t.selected,r.selected)),e([a=f.computed({read:function(){var n=r.activated();return!(n===null||n===undefined)},write:function(n){var t,i;n?r.activated()||(t=v.getActivatedColumnKey(),u(t)&&(i=s.options.columns().first((function(n){return n.activatable&&n.activatable()})),t=u(i)?null:i.itemKey),u(t)||r.activated(t)):r.activated(null)}})]),e(o(t.activated,r.activated)),e(o(c.isActivated,a)),e(o(t.disabled,r.disabled)),e(o(t.useDefaultActivation,r.
useDefaultActivation)),h},e})(s.GridExtension);n.SelectableRowExtension=y;e.registerPlugin(w.Extensions.SelectableRow,y)})(y||(y={})),y}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow",["require","exports","f","o","ko","../../../Util/Viva.Util","./Viva.Grid1","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var t=i.disposeDisposable,s=(function(n){function i(t){n.call(this);this._disposables=[];t=this._options=t||{};t.disabled===undefined&&(t.disabled=u.observable(!1))}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterAttachEvents=function(){var i=this._options,t=this._widget,n="rowRightClick";this._disposables.push(t.element.setEvents([o.default.fxcontextmenurequest+".azcGrid","tbody[class!=azc-grid-empty] tr",function(r){var e;i.disabled()||(e={rowMetadata:u.dataFor(this),clientX:r.clientX,clientY:r.clientY},t.trigger(
n,f.cloneEvent(r,n),e,r.target),t.options.events(n,e))}],["keydown.azcGrid",function(i){switch(i.which){case 121:if(i.shiftKey){var r=$(i.target).closest("tr")[0],e=$(r).offset(),o={rowMetadata:u.dataFor(r),clientX:e.left+r.offsetWidth-232,clientY:e.top+10};t.trigger(n,f.cloneEvent(i,n),o,i.target);t.options.events(n,o);i.preventDefault();i.stopPropagation()}}}]))},i.prototype.beforeDestroy=function(){t(this._disposables);this._disposables=[]},i.prototype.getName=function(){return i.Name},i.Name="azc-grid-rightClickableRow",i})(e.Extension);n.RightClickableRowExtension=s})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow",["require","exports","f","o","ko","$","./Grid1.Extensibility","./Grid1.SelectableRow","MsPortalImpl/UI/Commands/UI.Commands.Base","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,
o,s,h,c,l,a){"use strict";var v;return (function(n){var r=i.ViewModels,s=r.Controls,v=s.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._rightClickHandler&&(this._widget._instance.element.off("rowRightClick",this._rightClickHandler),this._rightClickHandler=null)},t.prototype.getExtension=function(n){var t=n;return this._commands=t.controlCommands,new c.RightClickableRowExtension},t.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowRightClick",this._rightClickHandler=function(t,i){return n._triggerRightClickEvent(t,i)})},t.prototype.getName=function(){return"RightClickableRow"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new o.SelectableRowExtension]},t.prototype._triggerRightClickEvent=function(n,t){var u=this._widget.options,e=u.selectableData,i=t.rowMetadata,r;return!!i&&!!i.item?(this._updateSelectionFollowingRightClick(i),i.
disabled()||this._widget._extensionTrigger("shouldHideContextMenu",i).some((function(n){return!!n})))?!1:(r=f.Event(a.default.fxrightclick),r.clientX=t.clientX,r.clientY=t.clientY,f(n.target).trigger(r,this._getCommandRightClickEventArgs(e,i.item)),n.preventDefault(),n.stopPropagation(),!0):!1},t.prototype._updateSelectionFollowingRightClick=function(n){var i;if(!n.selected()){var t=this._widget,u=t.options,r=u.selectableData.selectableItems();r.forEach((function(n){n.isSelected(!1)}));i=r.first((function(i){return!t.getRowMetadata(i.data).disabled()&&i.data===n.item}));i&&(i.isSelected(!0),t._instance.getPlugin(l.FocusableRowExtension.Name).focusRowByRowMetadata(n))}},t.prototype._getCommandRightClickEventArgs=function(n,t){var o=this._widget,y=n.selectableItems().filter((function(n){return n.isSelected()})),l=y.map((function(n){return n.data})),s=l[0],a=o.getRowMetadata(t),h,i,r,v,c,e;return s&&(i=u.unwrap(s.commandGroup),r=u.unwrap(s.commandGroupOwner),v=l.some((function(n){return u.unwrap(n.commandGroup)!==
i||u.unwrap(n.commandGroupOwner)!==r})),v&&(i=null,r=null)),h={selectableSet:n,deleteRowCommandTitle:null,markForDelete:null},o._extensionTrigger("enableRowDelete",a).some((function(n){return!!n}))&&o._extensionTrigger("getListDataForRightClick",a).forEach((function(n){f.extend(h,n)})),c={entityType:1,commandGroup:i,commandGroupOwner:r,viewModel:t,listData:h},e=this._commands&&this._commands(),e&&e.length&&f.extend(c,{controlCommands:e}),c},t})(h.GridExtension);n.RightClickableRowExtension=t;e.registerPlugin(v.Extensions.RightClickableRow,t)})(v||(v={})),v}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-contextMenuShortcut .azc-grid-contextMenuShortcut-col{width:32px}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled=true]) td.azc-grid-contextMenuShortcut-cell{padding:0 4px 0 0;text-align:center}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled=true]) td.azc-grid-contextMenuShortcut-cell a{width:100%;height:28px;font-size:23px;margin-right:2px;text-decoration:none;line-height:14px}.azc-grid-contextMenuShortcut table tbody .azc-row-disabled .azc-grid-contextMenuShortcut-cell a{display:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut",["require","exports","o","ko","MsPortalImpl/Resources/ImplScriptResources","./Viva.Grid1.SelectableRow","../../../Util/Viva.Util","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var a=MsPortalFx,t=jQuery,s="azc-grid-contextMenuShortcut-cell",h="tbody tr[data-grid-selectable=true]:not([aria-disabled=true]) .azc-grid-contextMenuShortcut-cell a",v='attr: { "data-grid-contextmenushortcut": true }',y="<col class='azc-grid-contextMenuShortcut-col' />",p="<th aria-hidden='true' class='azc-grid-contextMenuShortcut-header'><\/th>",c="<td role='gridcell' class='"+s+" azc-br-muted'><a class='msportalfx-inherit-color fxs-portal-svg' href=\"\" role='button' title='"+u.ContextMenu.ariaLabel+"' aria-label='"+u.ContextMenu.ariaLabel+"' data-bind='attr: { tabindex: focused() ? 0: -1}'>&#8230<\/a><\/td>",
l="azcGridContextMenuShortcut",w="click."+l,b="keydown."+l,k=(function(n){function u(t){n.call(this);this._options=t||{}}return __extends(u,n),i.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.prototype.afterSetTemplates=function(n){var i=n.getHtmlTemplate("bodyRowsCore"),r=n.getHtmlTemplate("header"),u=n.getHtmlTemplate("colgroup"),t=n.getHtmlTemplate("editableBodyRowsCorePerColumn");i.addAttribute("tr","data-bind",[v]).append("tr",c);r.append("tr",p);u.append("colgroup",y);a.isNullOrUndefined(t)||t.append("tr",c)},u.prototype.afterAttachEvents=function(){var n=this._widget,i=function(i){var f=t(i.target),o=f.offset(),s=f.closest("tr")[0],h={rowMetadata:r.dataFor(s),clientX:o.left,clientY:o.top},u="rowContextMenuShortcutClick";n.trigger(u,e.cloneEvent(i,u),h,s);n.options.events(u,h);i.preventDefault()},u=function(n){(n.which===32||n.which===13)&&(i(n),n.stopPropagation(),n.preventDefault())};this._widget.ltm.registerForDispose(
[this._widget.element.setEvents([w,h,i],[b,h,u])])},u.prototype.getOrder=function(){return 40},u.prototype.getDependencies=function(){return[new f.SelectableRowExtension]},u.prototype.beforeDestroy=function(){this._detachEvents&&this._detachEvents()},u.prototype.getName=function(){return u.Name},u.prototype.shouldNotChangeSelection=function(n,i){var r=t(i.target),u=r.closest("tr").attr("aria-selected")==="true",f=!!r.closest("."+s).length;return u&&f?!0:!1},u.prototype.getAdditionalColumns=function(){return 1},u.Name="azc-grid-contextMenuShortcut",u})(o.Extension);n.ContextMenuShortcutExtension=k})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut",["require","exports","f","o","./Grid1.Extensibility","./Grid1.RightClickableRow","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(
this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._onClick&&(this._widget._instance.element.off("rowContextMenuShortcutClick",this._onClick),this._onClick=null)},t.prototype.getExtension=function(){return new o.ContextMenuShortcutExtension},t.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowContextMenuShortcutClick",this._onClick=function(t,i){var r=n._widget.getPlugin("RightClickableRow");return r?r._triggerRightClickEvent(t,i):!1})},t.prototype.getName=function(){return"ContextMenuShortcut"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new f.RightClickableRowExtension]},t})(e.GridExtension);n.ContextMenuShortcutExtension=t;u.registerPlugin(r.Extensions.ContextMenuShortcut,t)})(s||(s={})),s}));define("MsPortalImpl/Controls/Helpers/Validation",["require","exports","i","Viva.Controls/Controls/Base/Viva.Validators"],(function(n,t,i,r){"use strict";var u;return (function(n){function u(
n){var i,u;switch(n.type){case 0:i=new r.Invalid(n);break;case 2:i=new r.Match(n);break;case 3:i=new r.NotMatch(n);break;case 4:i=new r.Contains(n);break;case 5:i=new r.NotContains(n);break;case 6:i=new r.ContainsCharacters(n);break;case 7:i=new r.NotContainsCharacters(n);break;case 8:i=new r.HasDigit(n);break;case 9:i=new r.HasLetter(n);break;case 10:i=new r.HasUpperCaseLetter(n);break;case 11:i=new r.HasLowerCaseLetter(n);break;case 12:i=new r.HasPunctuation(n);break;case 13:i=new r.Equals(n);break;case 22:i=new r.CaseInsensitiveComparison(n);break;case 23:i=new r.LocaleAwareCaseInsensitiveComparison(n);break;case 14:i=new r.LengthRange(n);break;case 15:i=new r.MinLength(n);break;case 16:i=new r.MaxLength(n);break;case 1:i=new r.Required(n);break;case 17:i=new r.Numeric(n);break;case 18:i=new r.ValueRange(n);break;case 19:i=new r.MinValue(n);break;case 20:i=new r.MaxValue(n);break;case 21:u=t.getMetadataId(n);i=new r.CustomAsyncValidator(n,u);break;case 24:i=new r.Uri(n)}return i&&n.
isEmptyValid&&(i.isEmptyValid=n.isEmptyValid),i}function f(n,t){for(var i,r=n.validators(),u=0;u<t.length;u++)for(i=0;i<r.length;i++)if(t[u]===r[i].fxViewModel){r.splice(i,1);break}n.validators(r)}var t=i.Po;n.convertValidation=u;n.removeValidations=f})(u||(u={})),u}));define("_generated/Less/MsPortalImpl.Controls/Fields/Fields.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxs-bladestyle-context .azc-form-labelcontainer,.fxs-hubPane .azc-form-labelcontainer{color:#fff}.azc-checkBoxField.azc-checkBoxField-inlineLabel div.azc-checkBox{display:inline-block;width:auto}.azc-checkBoxField-inlineLabel .azc-form-labelcontainer{display:none}.azc-checkBoxField-inlineLabel .azc-text-label{margin-left:6px}.azc-checkBoxField-inlineLabel label{line-height:16px;max-width:100%}.azc-checkBoxField-inlineLabelContainer{display:inline-block;max-width:calc(100% - 17px - 6px)}.fxc-CheckBoxField .azc-formElementSubLabelContainer{min-height:17px}.fxc-hide-check .azc-validatableControl-valid-validated div.azc-dockedballoon-anchor{display:none}")})
);define("MsPortalImpl.Controls/Fields/Base/Field",["require","exports","f","o","ko","./FormValidation","./LabelAndBalloonWidget","../../Controls/Base/Loadable","Viva.Controls/Controls/Base/Viva.Validators","../../../MsPortalImpl/Base/Telemetry","MsPortalImpl/Controls/Helpers/Validation","../../../_generated/Less/MsPortalImpl.Controls/Fields/Fields.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){var w=i.Base,b=w.Diagnostics.Telemetry,k=e.LabelAndBalloonWidgetHelper,d="azc-input",a="msportalfx-form-formelement",g="azc-formElementSubLabelContainer",nt="azc-formElementContainer",s="fxc-hide-check",v="aria-label",l="aria-labelledby",t="aria-describedby",y="focusin.focusTelemetry",p="focusout.focusTelemetry",tt=(function(n){function e(t,i,r){var u=this;n.call(this,t,i,r);this.options._msPortalFxClearValidation((function(){return u._clearValidation()}));this.options._msPortalFxTriggerValidation((function(){return u.triggerValidation()}));this.valid=this.options.valid;this.
_initializeWidgets();this._attachTelemetryEvents()}return __extends(e,n),e.prototype._initializeField=function(){this.element.addClass(a);this._widgetInstances=[];this._createContent()},e.prototype._initializeWidgets=function(){var n=this;this._labelHelper=new k(this.ltm,this.options);this._required=this._labelHelper.required;this._initializeField();u.isObservable(this.options.hideValidationCheck)?this.options.hideValidationCheck.subscribeAndRun(this.ltm,(function(t){n.element.toggleClass(s,t)})):this.element.toggleClass(s,this.options.hideValidationCheck);this._createLabelAndSubLabel();f.markFormFieldElement(this.element[0],this.options,this.validatableViewModel,this)},e.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._widgetInstances=null,this.element.removeClass(a),this.element.removeClass(s),this._container&&this._container.remove(),this._disposeOfTelementryEvents(),n.prototype.dispose.call(this))},r.defineProperty(e.prototype,"options",{
get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"validatableViewModel",{get:function(){return this._widgets[0].validatableViewModel},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"validatableWidget",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getPerformValidationFromViewModel=function(){return this.options.performValidation()===null||this.options.performValidation()},e.prototype.addValidations=function(){var n=this;u.unwrap(this.options.validations).forEach((function(t){var i=c.convertValidation(t);i&&n.validatableViewModel.validators.push(i)}))},e.prototype.removeValidations=function(n){c.removeValidations(this.validatableViewModel,n)},e.prototype.linkValidatableControlViewModels=function(){var n=this,t;this.linkFieldViewModels();this.validatableViewModel.valid.subscribe(this.ltm,(function(t){n.validatableViewModel.validators().some((function(n){return!n.valid()}));n.options.valid(t)}));this.addValidations(
);u.isObservable(this.options.validations)&&this.options.validations.subscribeArrayEdits(this.ltm,(function(t){var i=[],r=[];t.forEach((function(n){if(n.status==="added"){var t=c.convertValidation(n.value);t&&r.push(t)}else n.status==="deleted"&&i.push(n.value)}));n.validatableViewModel.validators(n.validatableViewModel.validators().concat(r));i.length&&n.removeValidations(i)}));this.validatableViewModel.enableValidation=this.options.enableValidation;this.validatableViewModel.enableValidation.subscribe(this.ltm,(function(t){t||n.validatableViewModel.validators().forEach((function(n){n.validationState(0)}))}));t=this.options.validationResults;this.validatableViewModel.validationResults.subscribe((function(n){t(n)}))},e.prototype.validateField=function(n){this.getPerformValidationFromViewModel()&&(this.validatableViewModel.enableValidation()?this.validatableWidget.validate(n):(this.validatableViewModel.enableValidation(!0),this.validatableWidget.validate(!0)))},e.prototype.setupValidationBindings=
function(){var n=this;this.options.validate.subscribe(this.ltm,(function(){n.validateField(!0)}));this.options.ensureValidation.subscribe(this.ltm,(function(){n.validateField()}));this.options.performValidation.subscribeAndRun(this.ltm,(function(t){n.options.performValidation()!==null&&(n.validatableViewModel.enableValidation(t),t&&n.validatableWidget&&n.validatableWidget.validate(!0))}))},e.prototype.linkFieldViewModels=function(){var n=this;this.options.enabled.subscribeAndRun(this.ltm,(function(t){n.validatableViewModel.disabled(!t)}));this.validatableViewModel.loading=this.options.loading;this.validatableViewModel.dirty=this.options.dirty},e.prototype.appendControl=function(n){return this._container.append(n),this},e.prototype.triggerValidation=function(){var u=this,t=[],i=this.validatableViewModel&&this.validatableViewModel.validators&&this.validatableViewModel.validators(),n,r;if(!this.$disabled()&&i&&i.length>0)this.validateField(!0),n=!0,i.forEach((function(i){var r=i.validationState(),
f,e;r===3?(f=Q.defer(),t.push(f.promise),e=u.ltm.createChildLifetime(),i.validationState.subscribe(e,(function(n){(n===1||n===2)&&(f.resolve(n===2),e.dispose())}))):(r===1||r===2)&&(n=n&&r===2)})),t.push(Q(n));else return Q(!0);return r=Q.defer(),Q.all(t).then((function(n){r.resolve(!n.some((function(n){return!n})))})),r.promise},e.prototype._getLabelId=function(){return this._labelHelper.labelId},e.prototype._getBalloonId=function(){return this._labelHelper.balloonId},e.prototype._getBalloonTextElemId=function(){return this._labelHelper.balloonTextElemId},e.prototype._addWidget=function(n){n&&this._widgetInstances.push(n)},e.prototype._createContent=function(){this._createControlsContainer()},e.prototype._createControlsContainer=function(){this._container=$("<div/>").addClass(nt);this._labelHelper.appendWidgetToDom(this.element,this._container);this._container.toggleClass(g,!this.options.subLabel)},e.prototype._createLabelAndSubLabel=function(){this._attachLabelAndSubLabel()},e.prototype._attachLabelAndSubLabel=
function(n){var e,o,h;n===void 0&&(n={});e=this._labelHelper;o=this.options;e.labelId=e.labelId||"azc-form-guid-"+i.getUniqueId();n.inhibitLabel||e.insertLabelBefore(n.insertLabelBefore||this._container,n);!n.emptyLabel&&o.showValidationMessagesBelowControl&&e.insertValidationMessageBelowControlAfter(this._container,this,o.validationResults);n.inhibitSubLabel||e.insertSubLabelAfter(n.insertSubLabelAfter||this._container);var r=this.element.findByClassName(n.controlClassName||d),f=n.toAriaLabel||r,y=f.attr(l)||"",p=n.ariaLabel||u.observable();u.computed(this.ltm,[o.label,p],(function(n,t){if(t=(t||"").trim(),f.removeAttr(l).removeAttr(v),t)f.attr(v,t);else{n=(n||"").trim();var i=(y+" "+(n?e.labelId||"":"")).trim();i&&f.attr(l,i)}}));var c=f.attr(t)||"",s=i.getUniqueId(),a=e.labelId+"-err";u.computed(this.ltm,[o.infoBalloonContent,o.infoBalloonLinkContent],(function(n,i){var r=[o.showValidationMessagesBelowControl?a:s],u;c&&r.push(c);n=(n||"").trim();(n||i)&&r.push(e.balloonTextElemId);u=r.
join(" ").trim();u?f.attr(t,u):f.removeAttr(t)}));r.attr("id")||r.attr("id",e.labelId+"-for");this._required&&this._required.subscribeAndRun(this.ltm,(function(n){r.attr("aria-required",n?n:null)}));this.options.valid&&this.options.valid.subscribeAndRun(this.ltm,(function(n){return r.attr("aria-invalid",!n)}));this.options.valid&&!o.showValidationMessagesBelowControl&&r.length>0?(h=$("<div aria-live='polite' aria-atomic='true' class='fxs-hide-accessible-label' id='"+s+"'><\/div>"),$(r[0]).parent().append(h),r!==f&&r.attr(t,((r.attr(t)||"")+" "+s).trim()),this.validatableViewModel&&this.validatableViewModel.validationResults.subscribeAndRun(this.ltm,(function(n){var t=n.filter((function(n){return n.state!==0&&!n.valid})).map((function(n){return n.message})).join(" ").trim();h.text(t);f.attr("aria-errormessage",t||null);f!==r&&r.attr("aria-errormessage",t||null)}))):o.showValidationMessagesBelowControl&&r!==f&&r.each((function(n,i){var r=$(i);r.attr(t,[r.attr(t)||"",a].join(" ").trim())}))},e.prototype.
_clearValidation=function(){return this.validatableViewModel&&this.validatableViewModel.validators().forEach((function(n){n.validationState(0)})),Q()},e.prototype._attachTelemetryEvents=function(){var n=this;if(this.options.telemetryKeys&&this.options.telemetryKeys.focus)this.element.on(y+" "+p,(function(t){n.element.has(t.relatedTarget).length||b.trace({source:h.Source.FormControl,action:h.Action.FormFocused,actionModifier:n.options.telemetryKeys.focus})}))},e.prototype._disposeOfTelementryEvents=function(){this.element.off(y+" "+p)},e})(o.Widget);n.FieldWidget=tt})(l||(l={})),l}));define("MsPortalImpl.Controls/Fields/TextField",["require","exports","f","o","ko","./Base/Field","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css","Viva.Controls/Controls/Base/ValidationPlacements/Viva.DockedBalloon","../Controls/Lists/Base/Controls.Lists.ActionHandler"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var l=jQuery,t="azc-textField",
c="fxc-TextField",a=(function(n){function f(t,i,r){n.call(this,t,i,r)}return __extends(f,n),f.prototype._initializeField=function(){n.prototype._initializeField.call(this);this.element.addClass(t).addClass(c);this.textFieldInit()},f.prototype._createLabelAndSubLabel=function(){this._attachLabelAndSubLabel({ariaLabel:this._options.ariaLabel})},f.prototype.dispose=function(){this._textBoxWidget&&(this._textBoxWidget.dispose(),this._textBoxWidget=null,this._textBoxViewModel=null);this._cleanElement(t,c);n.prototype.dispose.call(this)},r.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(f.prototype,"validatableViewModel",{get:function(){return this._textBoxViewModel},enumerable:!0,configurable:!0}),r.defineProperty(f.prototype,"validatableWidget",{get:function(){return this._textBoxWidget},enumerable:!0,configurable:!0}),f.prototype.textFieldInit=function(){var n=this,t;this._textBoxViewModel=new e.ViewModel;this._textBoxViewModel.
events={};this._textBoxViewModel.validationPlacements.push(new o.Css);this._textBoxViewModel.validationPlacements.push(new s.DockedBalloon(s.DockedBalloon.defaultOptions));this.options.actionHandler&&(this._actionHandler=h.getOrCreateActionHandler(u.unwrap(this.options.actionHandler)),u.isObservable(this.options.actionHandler)&&this.options.actionHandler.subscribe(this.ltm,(function(t){n._actionHandler=h.getOrCreateActionHandler(t)})),this._textBoxViewModel.events.enterPressed=function(){var t=n._actionHandler();t&&u.unwrap(n.options.actionsEnabled)&&t.activateFirstItem()},this._textBoxViewModel.events.downPressed=function(){var t=n._actionHandler();t&&u.unwrap(n.options.actionsEnabled)&&t.focusFirstItem()},this._textBoxViewModel.events.focus=function(){var t=n._actionHandler();t&&u.unwrap(n.options.actionsEnabled)&&t.pseudoFocusFirstItem()},this._textBoxViewModel.events.blur=function(){var t=n._actionHandler();t&&t.pseudoBlurFirstItem()},this._actionHandler.subscribe(this.ltm,(function(t)
{t&&n._textBoxViewModel.focused()&&t.pseudoFocusFirstItem()})));t=l("<div />");this.appendControl(t);this.linkTextBoxViewModels();this._addWidget(this._textBoxWidget=new e.Widget(t,this._textBoxViewModel));this.setupValidationBindings();this.options.value.subscribeAndRun(this.ltm,(function(t){n.element.findByClassName("azc-input").toggleClass("fxc-inputhasvalue",!!t)}));this.options.showValidationsAsPopup&&i.require("MsPortalImpl/Controls/Helpers/ValidationPopup").then((function(t){n._popupWidget=new t.Widget(n.ltm,{targetElement:n.element.find(".azc-inputbox-wrapper"),widget:n,validationResults:n._textBoxViewModel.validationResults})}))},f.prototype.linkTextBoxViewModels=function(){var n=this;this._textBoxViewModel.value=this.options._msPortalFxWidgetValue;this._textBoxViewModel.placeholder(this.options.emptyValueText());this.options.emptyValueText.subscribe(this.ltm,(function(t){n._textBoxViewModel.placeholder(t)}));this._textBoxViewModel.valueUpdateTrigger=this.options.valueUpdateTrigger;this.
_textBoxViewModel.readonly=u.utils.wrap(this.options.readonly);this._textBoxViewModel.spellcheck=u.utils.wrap(this.options.spellcheck);this._textBoxViewModel.onEnterPressed=function(t){if(n.options&&n.options.onEnterPressed)n.options.onEnterPressed(t)};this.linkValidatableControlViewModels()},f})(f.FieldWidget);n.Widget=a})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow",["require","exports","f","o","a","ko","./Grid1.Extensibility","./Grid1.FocusableRow","../../../Fields/Base/FormValidation","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","../../../Fields/TextField"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function r(n,t){return t=f.unwrap(t),u(t)||n.length<t}function p(n){switch(n){case t.Created:return 1;case t.Deleted:return 3;case t.Updated:return 2;case t.None:default:return 0}}function w(n,t){return n===t||n&&t&&n[l]&&n[l]===t[l]}var b=i.Base,k=b.Diagnostics,t=i.Data.EditState,d=i.ViewModels,
a=d.Controls.Lists.Grid,g=a.Format,nt=a.HtmlBindingsType,u=i.isNullOrUndefined,tt=new k.Log("ImplGrid.EditableRowExtension"),y=c.EditableRowExtension.Name,l,v;n.getVivaEditableRowState=p;l="__gridGuid";v=(function(n){function i(){n.apply(this,arguments);this._creatingEmptyRow=!1}return __extends(i,n),i.prototype.beforeDestroy=function(){var n=this._detach;n&&n()},i.prototype.getExtension=function(n){var i=n,t=i.editableRow||{},r={placement:t.placement,allowEditExistingItems:!!t.allowEditExistingItems,allowEditCreatedItems:!!t.allowEditCreatedItems,newRowAriaLabel:t.newRowAriaLabel};return this._editableExtn=new c.EditableRowExtension(r)},i.prototype.initializeExtension=function(){var e=this,o=this._widget,h=o.ltm,n=o.options,c=o._instance,t=c.getPlugin(y),k=n.extensionsOptions,l=k.editableRow,s=l.maxBufferedRows,i=t.createdItems,a=this._ensureValidation.bind(this),p={rowAdd:function(i,r){r.preventExitEditing();a(r.targets,t,(function(){n.rowAdd&&n.rowAdd(i,r);r.editableRow.rowMetadata.editing(
!1)}))},rowEdit:function(u,f){var h=f.editableRow,o=h.rowMetadata,c,v;o.emptyRow(!1);h.existingItem||(c=n.createdItems().some((function(n){return w(n,o.item)})),c||l.addCreated(o.item));a(null,t);v=l.placement||0;v===0&&r(i(),s)&&e._ensureNewRow(t)}},b=c.element,v;b.on(p);this._detach=function(){e._detach=null;b.off(p)};v=l.validate;v&&v.subscribe(h,(function(){a(o.element,t)}));f.utils.arrayPushAll(i,n.createdItems());n.addEmptyRow.subscribeAndRun(h,(function(n){if(n&&r(i(),s)){var t=c.getRowMetadata(n);t.editing(!0);t.emptyRow(!0);i.push(n)}}));n.createdItems.subscribeArrayEdits(h,(function(n){if(n=f.utils.adjustArrayEdits(n),n.length){var h=i(),l=!1;i.valueWillMutate();n.forEach((function(n){var i=!u(n.moved),r,f,t;n.status==="added"?(r=h.some((function(t){return w(t,n.value)})),(i||!r)&&h.splice(n.index,0,n.value)):n.status==="deleted"&&(f=h.splice(n.index,1)[0],i||(l=!0,t=c.getRowMetadata(f),t.editing(!1),t.editState(0)))}));i.valueHasMutated();l&&(r(h,s)&&e._ensureNewRow(t),e._ensureValidation(
o.element,t))}}));f.isObservable(s)&&s.subscribe(h,(function(n){return e._onMaxBufRowsChange(n)}))},i.prototype.getName=function(){return"EditableRow"},i.prototype.getOrder=function(){return 1},i.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},i.prototype.columnAdded=function(n,t){var i=this._widget,r,f=n.editableFormat;r=u(f)?i._getFormatter(g.HtmlBindings,{htmlBindingsType:nt.TextBox}):i._getFormatter(f,n.editableFormatOptions||{});t.editableFormatter=r},i.prototype.columnRemoved=function(){},i.prototype.connectRowMetadataProperties=function(n,i,r){var u=this,e=[];return e.push(f.computed((function(){var n=r.editState();f.ignoreDependencies((function(){var r=p(n);i.editState(r);i.editing(n===t.Created||n===t.Updated);r===3&&u._ensureValidation(u._widget.element,u._widget._instance.getPlugin(c.EditableRowExtension.Name))}))}))),e},i.prototype.getAdditionalItems=function(){return this._editableExtn.createdItems()},i.prototype.registerSubscriptionsToConnectMetadataProperties=
function(n,t){var i=this;return this._editableExtn.createdItems.subscribe((function(){i._widget._connectMetadataAndDisposeSubscriptions(n,t)}))},i.prototype.enableRowDelete=function(){var n=this._widget.options.extensionsOptions;return n.editableRow.enableRowDelete!==!1},i.prototype.shouldHideContextMenu=function(n){return n.item===this._getEmptyRowItem()},i.prototype.getListDataForRightClick=function(){var n={},i=this._widget.options.extensionsOptions,t=i.editableRow;return n.deleteRowCommandTitle=t.deleteRowCommandTitle,n.markForDelete=function(n){t.markForDelete(n)},n},i.prototype._ensureValidation=function(n,i,u){var e=this,f=this._widget.options.extensionsOptions;n&&(s.gatherFormFieldViewModels(n).forEach((function(n){var i=n.rowMetadata;i.editState&&i.editState()!==t.None&&n.performValidation()!==null&&n.performValidation(!0)})),u&&s.ensureFormFieldValidation(n,!1).then((function(n){if(n){u();var t=f.editableRow;t.placement===1&&r(i.createdItems(),t.maxBufferedRows)&&e._ensureNewRow(i)}
})));s.ensureFormFieldValidation(this._widget.element,!1).then((function(n){var t=f.editableRow;t.valid&&t.valid(n)}))},i.prototype._getEmptyRowItem=function(){var n=this;return this._editableExtn.createdItems().first((function(i){return n._widget.getRowMetadata(i).editState()===t.None}))},i.prototype._ensureNewRow=function(n){var i=this,t;if(!this._creatingEmptyRow){if(t=this._widget.options.extensionsOptions,t.editableRow.enableRowAdd===!1)return;this._emptyNewRowExists(n)||(this._creatingEmptyRow=!0,t.editableRow.create().finally((function(){i._creatingEmptyRow=!1})))}},i.prototype._emptyNewRowExists=function(n){var t=this;return n.createdItems().some((function(n){var i=t._widget._instance.getRowMetadata(n);return i.emptyRow()}))},i.prototype._onMaxBufRowsChange=function(n){var o=this._widget,t=o._instance.getPlugin(y),i=t.createdItems(),f=i.length,e=this._emptyNewRowExists(t);!e&&r(i,n)?this._ensureNewRow(t):e&&!u(n)&&f>n&&t.createdItems.splice(f-1,1)},i})(h.GridExtension);n.EditableRowExtension=
v;e.registerPlugin(a.Extensions.EditableRow,v)})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-searchBox{position:relative;display:inline-block;font-size:12px;padding-right:30px;height:23px}.azc-searchBox-button-state-hidden .azc-button,.azc-searchBox-state-hidden{display:none}.azc-searchBox ::-ms-clear{display:none}.azc-searchBox .azc-button{height:23px;width:23px;min-width:23px;font-size:16px;line-height:normal;vertical-align:top;margin-left:0;padding:0;border:none;top:0;position:absolute}.azc-searchBox-button-state-hidden{padding-right:0}.azc-searchBox-button-icon{position:absolute;top:-1px;left:6px}.azc-searchBox-wrapper{width:100%;height:100%;position:relative;float:left;padding:0}.azc-searchBox-input{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.azc-searchBox-input .azc-textBox-wrapper{padding-right:0;width:100%}.azc-searchBox-input .azc-textBox-wrapper input{display:inline-block;padding-right:0}.azc-searchBox-search-icon{position:absolute;width:14px;height:14px;top:4px;left:6px;pointer-events:none;display:none}.azc-searchBox-search-icon-visible .azc-searchBox-search-icon{display:block}.azc-searchBox-search-icon-visible .azc-textBox-wrapper input{padding-left:24px}")})
);define("Viva.Controls/Controls/Forms/Viva.SearchBox",["require","exports","o","ko","$","../Base/Viva.ValueUpdateTrigger","./Viva.TextBox","./Viva.Button","../Base/Viva.ValidatableControl","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Generated/SvgStartupDefinitions","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Base/Base.SvgHelper","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var v;return (function(n){var b=c.Content.SvgStartup,u=jQuery,t="azc-searchBox",k="azc-searchBox-state-hover",y="azc-searchBox-state-hidden",p="azc-searchBox-button-state-hidden",d="__azc-searchBox",g="<div class='azc-searchBox-wrapper' data-bind='css: { \"azc-searchBox-search-icon-visible\": data.searchIconVisible }'><div class='azc-searchBox-search-icon fxs-portal-svg-secondary msportalfx-svg-flip-horizontal' aria-hidden='true'>"+a.getSvgDataWithInheritPalette(b.search)+"<\/div><div class='azc-searchBox-input' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div><\/div><button data-bind='azcButton: $ctl._buttonViewModel'><div class='azc-searchBox-button-icon'>&times;<\/div><\/button>",
nt=0,w=(function(n){function t(){n.apply(this,arguments);this.queryString=r.observable("");this.visible=r.observable(!0);this.closeButtonVisible=r.observable(!0);this.searchIconVisible=r.observable(!0);this.placeholder=r.observable("Search...")}return __extends(t,n),t})(s.ViewModel),v;n.ViewModel=w;v=(function(n){function s(i,r,s){var h=this;n.call(this,i,r,u.extend({viewModelType:w},s));this.element.addClass(t).html(g);this._name=this.options.name||d+nt++;this._button=this.element.find("button");this._input=this.element.find(".azc-searchBox-input");this.options.keyDownEvent=this.options.keyDownEvent||u.noop;this._textBoxViewModel=new e.ViewModel;this._textBoxViewModel.value=this.options.queryString;this._textBoxViewModel.valueUpdateTrigger=f.ValueUpdateTrigger.Input;this._textBoxViewModel.placeholder=this.options.placeholder;this._buttonViewModel=new o.ViewModel;this._buttonViewModel.isDefault(!0);this._buttonViewModel.visible=this.options.closeButtonVisible;this._attachEvents();this._initializeComputeds(
);this._bindDescendants();this._afterCreate();this.options.placeholder&&this.options.placeholder.subscribeAndRun(this.ltm,(function(n){n&&h._input.find(".azc-input").attr("aria-label",n)}));this.options.ariaControls&&this._input.find(".azc-input").attr("aria-controls",this.options.ariaControls)}return __extends(s,n),s.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(t,k,y,p),n.prototype.dispose.call(this))},i.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),s.prototype._getElementToFocus=function(){var n=this.element.find("input");return n.length?n[0]:null},s.prototype._initializeComputeds=function(){var n=this;this._addDisposablesToCleanUp(r.computed((function(){var t=n.$disabled();n._buttonViewModel.disabled(t);n._textBoxViewModel.disabled(t);n._textBoxViewModel.dirty(n.options.dirty())})));this._addDisposablesToCleanUp(r.computed((function(){n.element.
toggleClass(y,!n.options.visible())})));this._addDisposablesToCleanUp(r.computed((function(){n.element.toggleClass(p,!n.options.closeButtonVisible())})))},s.prototype._attachEvents=function(){var n=this;this._detachEvents();this._buttonClickHandler=function(){n.options.queryString("");n.options.visible(!1)};this._inputKeyDownHandler=function(t){u.contains(n._input[0],document.activeElement)&&(h.getModifierKeys(t)===0&&t.which===27&&(n.options.queryString(""),t.preventDefault()),n.options.keyDownEvent(t))};this._button.on("click."+t,this._buttonClickHandler);this.element.on("keydown.azcSearchBox",this._inputKeyDownHandler)},s.prototype._detachEvents=function(){this._buttonClickHandler&&(this._button.off("click."+t,this._buttonClickHandler),this._buttonClickHandler=null);this._inputKeyDownHandler&&(this.element.off("keydown.azcSearchBox",this._inputKeyDownHandler),this._inputKeyDownHandler=null)},s})(s.Widget);n.Widget=v;r.bindingHandlers.azcSearchBox=l.getBindingHandler(v)})(v||(v={})),v}));define(
"_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-filterable.azc-grid.azc-grid-headerHidden:not(.azc-grid-groupable) .azc-grid-filterable-searchBox{margin-bottom:14px}.azc-grid-filterable.azc-grid.azc-grid-filterable-active .azc-grid-reorderRow-cell div{visibility:hidden}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox{display:block}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox.azc-searchBox-state-hidden{display:none}.azc-grid-filterable.azc-grid .azc-grid-filterable-match{font-style:normal}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable",["require","exports","f","o","ko","$","./Viva.Grid1.FocusableRow","./Viva.Grid1.Formatters","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","../../Forms/Viva.SearchBox","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css"],
(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){var a=window,p=" ",v="azc-grid-filterable-active",t="azc-grid-filterable",w="<div class='azc-grid-filterable-searchBox' data-bind='azcSearchBox: $ctl.getPlugin(\""+t+"\")._searchBoxVM'><\/div>"+("<div aria-live='polite' aria-atomic='true' class='fxs-hide-accessible-label' aria-hidden='true' data-bind='text: $ctl.getPlugin(\""+t+"\")._ariaLive'><\/div>"),y="###EXISTING_TEMPLATE_BODY_CORE###",b='<!-- ko ifnot: $ctl.getPlugin("'+t+'").options.serverFilter() -->'+('<!-- ko if: $ctl.getPlugin("'+t+'").filterActive() -->')+('<!-- ko if: $ctl.getPlugin("'+t+'").results().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").results() } --><!-- /ko -->')+"<\/tbody><!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+t+'").results().length -->')+"<!-- ko if: data.items().length --><tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko -->"+
('<!-- ko if: $ctl.getPlugin("'+t+'").options.serverFilter() || !$ctl.getPlugin("'+t+'").filterActive() -->')+y+"<!-- /ko -->",k="(['|\"]?)([\"|']?trustedHtml[\"|']?:)(.*),",d="$1$2 "+('$ctl.getPlugin("'+t+'").filterActive() ')+('? $ctl.getPlugin("'+t+'")._filterableCellFormat($parentContext.$parentContext.$index, $index, $parent, $data) ')+": $3,",g='<em class="azc-grid-filterable-match fxs-highlight">$&<\/em>',nt=(function(n){function s(t){n.call(this);this._options=f.extend(this._getDefaultFilterableOptions(),t);this._results=u.observableArray();this._filterActive=u.observable(!1);this._displayedCols=[];this._colMap={};this._colNumMap={};this._resultTokenMap={};this._ariaLive=u.observable("")}return __extends(s,n),r.defineProperty(s.prototype,"filterActive",{get:function(){return this._filterActive},enumerable:!0,configurable:!0}),r.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(s.prototype,"results",{get:function(
){return this._results},enumerable:!0,configurable:!0}),s.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("table"),f=n.getTemplate("bodyCore"),e=b.replace(y,f),t=n.getTemplate("bodyCellContent"),i=new RegExp(k),r=t;t.match(i)&&(r=t.replace(i,d));u.prepend(".azc-grid-container",w);n.setTemplate({bodyCore:e,bodyCellContent:r})},s.prototype.afterCreate=function(){var n=this,t=this._widget;[function(){n._searchBoxVM.visible(n._options.searchBoxVisible())},function(){var t=f.trim(n._searchBoxVM.queryString());n._queryTimeout&&a.clearTimeout(n._queryTimeout);n._queryTimeout=a.setTimeout((function(){n._queryTimeout=null;n._resetResults();n._filterHandler(t)}),n.options.valueUpdateDelayTimeout())},function(){var i=t.options.columns();n._colMap={};n._colNumMap={};i.forEach((function(t,i){n._colMap[t.itemKey]=t;n._colNumMap[t.itemKey]=i;n._displayedCols.push(t.itemKey)}))},function(){t.element.toggleClass(v,n._filterActive())},function(){t.options.items();n._filterActive.peek()&&n._results(
n._getResultItems(n._parseQueryString(n._searchBoxVM.queryString.peek())))}].forEach((function(i){u.computed(i,n,{disposeWhenNodeIsRemoved:t.element[0]})}));t.ltm.registerForDispose(this.options.serverFilter.subscribe((function(){n._resetAndFilterResults(f.trim(n._searchBoxVM.queryString()))})))},s.prototype.beforeCreate=function(){var n=this;this._searchBoxVM=new l.ViewModel;this._searchBoxVM.queryString=this.options.queryString;this._searchBoxVM.closeButtonVisible=this.options.searchBoxCloseButtonVisible;this._searchBoxVM.placeholder=this.options.searchBoxPlaceholder;this._searchBoxVM.ariaControls=this._widget.id;this._searchBoxVM.keyDownEvent=function(t){var r=n._widget.getPlugin(e.FocusableRowExtension.Name),i=c.getModifierKeys(t);r&&t.which===9&&(i===0||i===4)&&r._focus(t);i===0&&t.which===13&&n._resetAndFilterResults(f.trim(n._searchBoxVM.queryString()))}},s.prototype.beforeDestroy=function(){this._widget.element.removeClass(v)},s.prototype.getDefaultRowMetadataProperties=function(){
return{}},s.prototype.getName=function(){return s.Name},s.prototype.getOrder=function(){return 100},s.prototype.shouldNotAllowDrag=function(){return this._widget.element.hasClass(v)?!0:!1},s.prototype._parseQueryString=function(n){for(var i=n.split(p),t=0;t<i.length;t++)this._resultTokenMap[i[t]]=[];return i},s.prototype._resetAndFilterResults=function(n){this._queryTimeout&&(a.clearTimeout(this._queryTimeout),this._queryTimeout=null,this._resetResults());this._filterHandler(n)},s.prototype._filterHandler=function(n){var t=this;this.options.serverFilter()&&this.options.filterCallback()?Q(this.options.filterCallback()(n)).then((function(){t._ariaLive(h.Grid.serverFilterAriaLive.format(n))})):n===""?(this._filterActive(!1),this._ariaLive(h.Grid.noFilterAriaLive.format(this._widget.options.items()))):(this._filterActive(!0),this._results(this._getResultItems(this._parseQueryString(i.encodeHtml(n)))),this._ariaLive(h.Grid.filterAriaLive.format(this._results().length,n)))},s.prototype._getResultItems=
function(n){var t=this,o=this._getSearchableColumns(),r,s,h=[],u=[],i,f,e;return this._widget.options.items().forEach((function(c,l){for(u=[],f=0;f<o.length;f++)if(r=o[f],c.hasOwnProperty(r))for(s=t._getFormattedItemValue(c[r],{item:c,rowMetadata:t._widget.getRowMetadata(c),rowNumber:function(){return l},columnNumber:function(){return t._colNumMap[r]},column:t._colMap[r]}),e=0;e<n.length;e++)i=n[e],s.toLowerCase().indexOf(i.toLowerCase())!==-1&&(u.indexOf(i)===-1&&u.push(i),t._resultTokenMap[i].indexOf(c)===-1&&t._resultTokenMap[i].push(c));u.length===n.length&&h.push(c)})),h},s.prototype._filterableCellFormat=function(n,t,i,r){var o=i.item,s=r.itemKey,l=o[s],a={item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r},f=this._getFormattedItemValue(l,a),v=this._getSearchableColumns(),h,u,e=[],c;for(u in this._resultTokenMap)h=this._resultTokenMap.hasOwnProperty(u)&&this._resultTokenMap[u].indexOf(o)!==-1&&v.indexOf(s)!==-1,h&&e.push(this._regexStringEscape(u));return e.length&&(c="("+
e.join("|")+")",f=this._highlightMatches(f,c)),f},s.prototype._highlightMatches=function(n,t){var i=n;return i.replace(new RegExp(t,"gi"),g)},s.prototype._regexStringEscape=function(n){var t=new RegExp("([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~\\\\])","g");return n.replace(t,"\\$1")},s.prototype._getFormattedItemValue=function(n,t){var i,r;if(t.column&&t.column.filterFormatter)r=t.column.filterFormatter(n,t);else{i=u.toJS(n);switch(typeof i){case"object":r=o.text(JSON.stringify(i),t);break;default:r=o.text(i,t)}}return r},s.prototype._getSearchableColumns=function(){return this.options.searchableColumns().length?this.options.searchableColumns():this._displayedCols},s.prototype._resetResults=function(){this._results.removeAll();this._resultTokenMap={}},s.prototype._getDefaultFilterableOptions=function(){return{searchableColumns:u.observableArray(),searchBoxVisible:u.observable(!0),searchBoxPlaceholder:u.observable(h.Viva.Grid.Filterable.placeholder),searchBoxCloseButtonVisible:u.observable(!0),
queryString:u.observable(""),serverFilter:u.observable(!1),filterCallback:u.observable(null),valueUpdateDelayTimeout:u.observable(300)}},s.Name=t,s})(s.Extension);n.FilterableExtension=nt})(a||(a={})),a}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable",["require","exports","f","o","ko","./Grid1.Extensibility","./Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,h=300,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getExtension=function(n){var r=n,t=r&&r.filterable,i;return t&&(i={searchBoxCloseButtonVisible:t.searchBoxCloseButtonVisible||u.observable(!0),searchBoxPlaceholder:t.searchBoxPlaceholder||u.observable(o.Viva.Grid.Filterable.placeholder),searchBoxVisible:t.searchBoxVisible||u.observable(!0),searchableColumns:t.searchableColumns||u.observableArray(),queryString:
t.queryString||u.observable(""),serverFilter:t.serverFilter||u.observable(!1),valueUpdateDelayTimeout:t.valueUpdateDelayTimeout||u.observable(h)}),this._options=i,new s.FilterableExtension(i)},t.prototype.getName=function(){return"Filterable"},t.prototype.getOrder=function(){return 0},t.prototype.columnAdded=function(n,t){t.filterFormatter=null;var i=n.filterableFormat;i!==undefined&&(t.filterFormatter=this._widget._getFormatter(i,n.filterableFormatOptions||{}))},t})(e.GridExtension);n.FilterableExtension=t;f.registerPlugin(r.Extensions.Filterable,t)})(h||(h={})),h}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover",["require","exports","u","o","ko","$","./Viva.Grid1.FocusableRow","../../../Util/Viva.Util","./Viva.Grid1"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var t=MsPortalFx,i=window,h='css: { "azc-external-hovered": $data === $ctl.getPlugin("azc-grid-hoverableRow")._hoveredRowMetadata() }',c=t.disposeDisposable,l=(function(n){function s(
t){n.call(this);this._disposables=[];this._options=t||{};this._hoverIDKey=this._options.hoverIDKey||u.observable();this._hoveredID=this._options.hoveredID||u.observable();this._hoveredRowMetadata=u.observable(null);this._backupIdMax=0}return __extends(s,n),r.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),s.prototype.beforeCreate=function(){this._focusableRowExtension=this._widget.getPlugin(e.FocusableRowExtension.Name);this._focusableRowExtension.externalHover=!0},s.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[h])},s.prototype.getDefaultRowMetadataProperties=function(){return{hovered:u.observable(!1)}},s.prototype.afterAttachEvents=function(){var t=this,n=this,i=this._widget.element;this._disposables.push(i.setEvents(["rowFocus.azcHovered",function(t,i){n._onRowFocus(t,i)}],["mouseenter.azcHovered","> .azc-grid-container .azc-grid-full > tbody > tr.azc-grid-row:not([aria-disabled=true])",
function(i){var r;!t._preventMouseHandler&&i.currentTarget&&(r=u.dataFor(i.currentTarget),n._hoveredRowMetadata(r))}],["mouseleave.azcHovered",function(){t._preventMouseHandler||n._hoveredRowMetadata(null)}],["focus.azcHovered",function(t){if(!n._hoveredRowMetadata()){var i=void 0;t.currentTarget&&(i=u.dataFor(t.currentTarget),n._hoveredRowMetadata(i),n._focusedByEvent=!0)}}],["blur.azcHovered","tbody.azc-grid-groupdata",function(){n._focusedByEvent&&n._hoveredRowMetadata()&&(n._hoveredRowMetadata(null),n._focusedByEvent=!1)}]))},s.prototype.afterCreate=function(){var n=this,i,r,t;this._rebuildIdRowMetadaMap();t=this._widget;t.options.items.subscribeArrayChanges(t.ltm,(function(f){r=u.unwrap(f[n._hoverIDKey()]);r||(r=(n._backupIdMax++).toString());i=t.getRowMetadata(f);i.hoverID=r;n._idRowMetadataMap[r]=i}),(function(r){i=t.getRowMetadata(r);delete n._idRowMetadataMap[i.hoverID]}));t._addDisposablesToCleanUp([this._hoveredID.subscribe((function(t){n.hoverRowByHoverId(t)})),this._hoveredRowMetadata.
subscribe((function(t){var i=t?t.hoverID:null;i!==n._hoveredID.peek()&&n._hoveredID(i)}))])},s.prototype.getOrder=function(){return 30},s.prototype.getDependencies=function(){return[new e.FocusableRowExtension(this.options)]},s.prototype.beforeDestroy=function(){c(this._disposables);this._disposables=[];this._resetPreventMouseHandlerTimer()},s.prototype.getName=function(){return s.Name},s.prototype.hoverRowByHoverId=function(n){var t=this._getRowMetadataFromHoverID(n);this.hoverRowByRowMetadata(t)},s.prototype.hoverRowByRowMetadata=function(n,i){if(this._hoveredRowMetadata.peek()!==n){if(this._inHoverRowByRowMetadata){console.error(" FocusableRowHoverExtension hoverRowByRowMetadata go into recursive called. Please verify."+t.getCurrentCallStack(!0));return}try{if(this._inHoverRowByRowMetadata=!0,this._hoveredRowMetadata(n),n){var r={hovered:n};this._widget.trigger("rowHover",i?o.cloneEvent(i,"rowHover"):f.Event("rowHover"),r);this._widget.options.events("hover",r)}}finally{this._inHoverRowByRowMetadata=
!1}}},s.prototype._resetPreventMouseHandlerTimer=function(){this._preventMouseHandler=!1;this._preventMouseHandlerTimer!==null&&(i.clearTimeout(this._preventMouseHandlerTimer),this._preventMouseHandler=null)},s.prototype._onRowFocus=function(n,t){var u=this,r;this._focusedByEvent=!!n;this._focusedByEvent&&(this._resetPreventMouseHandlerTimer(),this._preventMouseHandler=!0,this._preventMouseHandlerTimer=i.setTimeout((function(){u._resetPreventMouseHandlerTimer()}),250));t.focused?(r=t.focused,this.hoverRowByRowMetadata(r,n)):this.hoverRowByRowMetadata(null)},s.prototype._getRowMetadataFromHoverID=function(n){var i;return t.isNullOrUndefined(n)||(i=this._idRowMetadataMap[n]),i||null},s.prototype._rebuildIdRowMetadaMap=function(){var i=this,r=this._widget._getAllRowMetadata(),f=this._hoverIDKey.peek(),n,t={};this._backupIdMax=0;r.forEach((function(r){n=u.unwrap(r.item[f]);n=n?n.toString():(i._backupIdMax++).toString();t[n]=r;r.hoverID=n}));this._idRowMetadataMap=t},s.Name="azc-grid-hoverableRow",
s})(s.Extension);n.FocusableRowHoverExtension=l})(h||(h={})),h}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover",["require","exports","f","o","ko","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var i=n,t=i.hoverable||{};return new o.FocusableRowHoverExtension({focusable:t.focusable||u.observable(!0),hoverIDKey:t.hoverIDKey||u.observable(),hoveredID:t.hoveredID||u.observable()})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"FocusableRowHover"},t.prototype.getOrder=function(){return 0},t})(e.GridExtension);n.FocusableRowHoverExtension=t;f.registerPlugin(r.Extensions.Hoverable,t)})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings",
["require","exports","f","o","../../Base/Formatters","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","../../../../MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","../../../../MsPortalImpl/Base/Base.ImplUtils"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function w(t,i,u,f){var e=i||"";switch(t){case r.MultiselectDropDown:case r.TextBox:case r.CheckBox:case r.DropDown:case r.GroupDropDown:case r.CheckBoxRowSelection:return"<div data-bind='formElement: $data' data-grid-formelement='"+r[t]+"'><\/div>"}return u||(e=s.sanitizeHTML(new y(e,n,f),{}).sanitizedMarkup),e}function v(n,t,i){switch(t){case r.MultiselectDropDown:return c.multiselectDropDown(n,i);case r.TextBox:return c.textBox(n,i);case r.CheckBox:return c.checkBox(n,i);case r.DropDown:return c.dropDown(n,i);case r.GroupDropDown:return c.groupDropDown(n,i);case r.CheckBoxRowSelection:return c.rowSelectionCheckBox(n);case r.Default:default:return function(n,t,
i){return{value:t,settings:i}}}}var y=h.ProvenanceContainer,a=i.ViewModels.Controls.Lists.Grid,p=a.Format,r=a.HtmlBindingsType,c=u.ControlViewModels,l;t.getHtmlBindingsViewModel=v;l=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getName=function(){return"FormatterHtmlBindings"},t.prototype.getOrder=function(){return 0},t.prototype.getSafeFormatter=function(n,t,i){switch(n){case p.HtmlBindings:var r=this._widget&&this._widget.element;return o.htmlBindings(w(t.htmlBindingsType,t.htmlBindingsTemplate,i,r),v(this._widget.ltm,t.htmlBindingsType,t.htmlBindingsData))}return null},t})(e.GridExtension);t.FormatterHtmlBindingsExtension=l;f.defaultPlugins.push(l)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-groupable.azc-grid.azc-grid-headerHidden .azc-grid-groupdata:first-of-type .azc-grid-groupheader td{border-top-width:0}.azc-grid-groupable.azc-grid .azc-grid-groupdata:first-of-type .azc-grid-groupheader td{border-top-width:1px}.azc-grid-groupable.azc-grid .azc-grid-groupdata .azc-grid-groupheader td{padding-top:15px;font-size:10px;font-family:az_ea_font,wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif;text-transform:uppercase;border-top-width:0}.azc-grid-groupable.azc-grid .azc-grid-groupdata .azc-grid-groupheader:hover{background-color:inherit}.azc-grid-groupable.azc-grid .azc-grid-groupdata tr:not(.azc-grid-groupheader) td.azc-grid-cell:first-of-type{padding-left:30px}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable",["require","exports","f","u","o","ko","$","./Viva.Grid1.Formatters","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function l(n){return n=e(n),a(n)?"":n}function k(n,t,i){var r=[],u=[];return t===0?u=n:(n.forEach((function(n){n.sortFormatter?r.push(n.sortFormatter(e(n.value))):r.push(e(n.value))})),i?r.sort(i):r.sort(),t===2&&r.reverse(),r.forEach((function(t){n.forEach((function(n){var i=n.sortFormatter?n.sortFormatter(e(n.value)):e(n.value);t.toString()===i.toString()&&u.push(n)}))}))),u}function d(n,t,i){var r,u,f;n.options.items().forEach((function(e){r="";f=l(e[i]);t.forEach((function(n){u=l(n.value);f.toString()===u.toString()&&(r=u)}));n.getRowMetadata(e).groupId(r)}))}function g(n,t){if(t===null||t===r)throw new Error("groupId cannot be null or undefined when fetching group items.");
return v((function(){var i=[],u=e(t).toString(),r;return n.options.items().forEach((function(t){r=l(n.getRowMetadata(t).groupId);r.toString()===u&&i.push(t)})),i}))}var a=i.isNullOrUndefined,c=f.observable,v=f.computed,e=f.toJS,y=jQuery,t="azc-grid-groupable",b="<!-- ko if: data.items().length -->"+('<!-- ko foreach: $ctl.getPlugin("'+t+'").groups -->')+"<tbody class='azc-grid-groupdata' role='rowgroup' data-bind='attr: { \"aria-label\": ariaLabel }' ><tr aria-hidden='true' class='azc-grid-groupheader'>"+("<td class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+t+"\")._headerCellFormat(formatter, value), attr: { colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+('<!-- ko if: $ctl.getPlugin("'+t+'").getItemsByGroup(value)().length -->')+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").getItemsByGroup(value)() } --><!-- /ko -->')+"<!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+t+'").getItemsByGroup(value)().length -->')+"<tr role='row'><td role='gridcell' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: $vm.noRowsMessage' class='azc-br-muted'><\/td><\/tr><!-- /ko --><\/tbody><!-- /ko -->"+
('<!-- ko if: $ctl.getPlugin("'+t+'").getItemsByGroup("")().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='row' class='azc-grid-groupheader'>"+("<td rol='gridcell' class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+t+'").options.noGroupLabel(), attr: { "aria-label": $ctl.getPlugin("'+t+"\").options.noGroupLabel(), colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").getItemsByGroup("")() } --><!-- /ko -->')+"<\/tbody><!-- /ko --><!-- /ko -->",p=(function(){function n(n,t,i,r){this.value=n;this.formatter=t||o.text;this.sortFormatter=i;this.ariaLabel=r}return n})(),w;n.Group=p;w=(function(n){function i(t){n.call(this);this._groupItems={};this._options=y.extend(this._getDefaultGroupOptions(),t);a(this._options.groups)&&(this._options.groups=c(null))}return __extends(i,n),u.defineProperty(i.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),u.
defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){n.setTemplate("bodyCore",b)},i.prototype.beforeCreate=function(){var n=this,t=function(t,i,r){var u=[],e=[],o=[];return i.forEach((function(n){var i=l(n[t]),r=i.toString();e.indexOf(r)===-1&&(u.push(i),e.push(r))})),u.forEach((function(t){var i=f.observable();n._options&&n._options.getGroupAriaLabel?Q(n._options.getGroupAriaLabel(t)).then((function(n){i(n)})):i(t&&t.toString());o.push(new p(t,r,null,i))})),o};this._groups=v((function(){var i=[],r=n.options.groups(),u;return r?i=r:(u=n.options.headerFormatter||o.text,i=t(n.options.groupKey(),n._widget.options.items(),u)),d(n._widget,i,n.options.groupKey()),k(i,n.options.sortOrder(),n.options.sortFunction)}))},i.prototype.beforeDestroy=function(){var n=this;this._groups&&(this._groups.dispose(),this._groups=null);this._groupItems&&(u.getOwnPropertyNames(this._groupItems).forEach((function(t){var i=n.
_groupItems[t];i&&(y.isFunction(i.dispose)&&i.dispose(),n._groupItems[t]=null)})),this._groupItems=null)},i.prototype.getItemsByGroup=function(n){return n=e(n),this._groupItems[n]||(this._groupItems[n]=g(this._widget,n)),this._groupItems[n]},i.prototype.getDefaultRowMetadataProperties=function(){return{groupId:c("")}},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 70},i.prototype._getDefaultGroupOptions=function(){return{groupKey:c(""),headerFormatter:o.text,groups:c(null),noGroupLabel:function(){return h.Viva.Grid.Groupable.noGroupLabel},sortOrder:c(1),sortFunction:null}},i.prototype._headerCellFormat=function(n,t){return n(t)},i.Name=t,i})(s.Extension);n.GroupableExtension=w})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable",["require","exports","f","o","ko","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable","MsPortalImpl/Resources/ImplScriptResources"],
(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function o(n){var i,r=t.SortFunction;switch(n){case r.DateTime:i=function(n,t){var i=new Date(n).getTime(),r=new Date(t).getTime();return i<r?-1:i>r?1:0};break;case r.SettingListGroupOrder:i=function(n,t){var i=h.Part.SettingList.Group.support;return n===i?-1:t===i?1:0};break;default:i=null}return i}var t=i.ViewModels.Controls.Lists.Grid,r=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var f=n||{},i=this._widget,e=i.element[0],t=f.groupable,r=t.getGroupAriaLabel&&t.getGroupAriaLabel.bind(f);return new s.GroupableExtension({groupKey:t.groupKey,headerFormatter:i._getFormatter(t.headerFormat,t.headerFormatOptions),groups:u.computed((function(){var n;return t&&t.groups&&(n=[],t.groups().forEach((function(t){var o=i._getFormatter(t.format,t.formatOptions),e=null,f;t.sortFormat&&(e=i._getFormatter(t.sortFormat,t.sortFormatOptions));
f=u.observable();r?Q(r(t.value)).then((function(n){f(n)})):f(t.value&&t.value.toString());n.push(new s.Group(t.value,o,e,f))}))),n}),this,{disposeWhenNodeIsRemoved:e}),noGroupLabel:i._getFormatter(t.noGroupLabelFormat,t.noGroupLabelFormatOptions),sortFunction:o(t.sortFunction),sortOrder:u.computed((function(){var n=1;return t&&t.sortOrder&&(n=t.sortOrder()),n}),this,{disposeWhenNodeIsRemoved:e}),getGroupAriaLabel:r})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"Groupable"},t.prototype.getOrder=function(){return 0},t.prototype.connectRowMetadataProperties=function(n,t,i){var r=[];return r.push.apply(r,this._widget._twoWayBinding(i.groupId,t.groupId)),r},t})(e.GridExtension);n.GroupableExtension=r;n.getSortFunction=o;f.registerPlugin(t.Extensions.Groupable,r)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-hierarchical-cell-flexcontainer{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.azc-grid-hierarchical-cell-flexcontainer .azc-grid-cellContent{flex:1 1 auto}.azc-grid-hierarchical-header>a{padding-left:26px}.azc-grid-hierarchical-icon,.azc-grid-hierarchical-indent{display:inline-block;flex:0 0 auto;width:16px;height:16px;top:3px}.azc-grid-hierarchical-icon-collapsed,.azc-grid-hierarchical-icon-expanded{width:0;height:0;background:0 0;border-style:solid;border-right-color:transparent!important;border-bottom-color:transparent!important}.azc-grid-hierarchical-icon-collapsed{margin-top:3px;margin-left:5.5px;border-width:5px 0 5px 5px;border-top-color:transparent!important}.azc-grid-hierarchical-icon-expanded{margin-top:5.5px;margin-left:3px;border-width:5px 5px 0;border-left-color:transparent!important}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical",["require","exports","f","o","ko","$","./Viva.Grid1","./Viva.Grid1.FocusableRow","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.EventTypes","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){var f=h.Grid.Accessibility,l=jQuery,v='css: { "azc-grid-hierarchical-toplevel": item.depth() === 0 }',y='css: { "azc-grid-hierarchical-header": hierarchical }',a="tr[data-grid-focusable]",p=".azc-grid-hierarchical-icon[data-grid-expandable]",t="azc-grid-hierarchical",w=f.Expander.ariaDetail,b="<div class='azc-grid-hierarchical-cell-flexcontainer'><!-- ko if: hierarchical --><!-- ko foreach: new Array($parent.item.depth()) --><div class='azc-grid-hierarchical-indent'><\/div><!-- /ko -->"+("<div class='azc-grid-hierarchical-icon' data-bind='if: $ctl.getPlugin(\""+t+
'")._isExpandable($parent.item), clickBubble: false, attr: { "aria-label": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "expander" : null, "aria-details": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "'+w+'" : null, "aria-expanded": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? $parent.item.expanded().toString() : "undefined", "data-grid-expandable": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "true" : null, tabindex: $ctl.getPlugin("'+t+"\")._isExpandable($parent.item) ? $tabIndex() : $focusIndex() }'>")+'<div data-bind=\'css: {"azc-grid-hierarchical-icon-collapsed": !$parent.item.expanded(), "azc-grid-hierarchical-icon-expanded": $parent.item.expanded() }\'><\/div><\/div><!-- /ko --><div class=\'azc-grid-cellContent\' data-bind=\'css: { "azc-grid-cell-ellipse": $data.enableEllipse, "azc-grid-cell-fullheight": $data.fullHeight }, trustedHtml: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)\'><\/div><\/div>',k=i.disposeDisposable,
d=(function(n){function t(t){n.call(this);this._disposables=[];this._options=l.extend(this._getDefaultHierarchicalOptions(),t)}return __extends(t,n),r.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("headerCell");i.addAttribute("th","data-bind",[y]);t.addAttribute("tr","data-bind",[v]);n.setTemplate("bodyCellContent",b)},t.prototype.afterCreate=function(){},t.prototype.afterAttachEvents=function(){var t=this,n=!0,i=this.options;this._disposables.push(this._widget.element.setEvents([c.default.keydown+".azcGrid",a,function(r){var o=l(r.target),e=o.closest(a),f=u.dataFor(e[0]),h=f?f.item:null,c=s.getModifierKeys(r);if(c===0&&e&&e.length>0){switch(r.which){case 37:n=t._expandOrCollapse(i,f,!1);break;case 39:n=t._expandOrCollapse(i,f,!0);break;case 13:case 32:n=t._expandOrCollapse(i,f,!h.expanded());break;default:n=!1}n&&(r.preventDefault(
),r.stopPropagation())}}],[c.default.click+".azcGrid",p,function(r){var o=l(r.target),f=o.closest(a),e=u.dataFor(f[0]),s=e?e.item:null;f&&f.length>0&&(n=t._expandOrCollapse(i,e,!s.expanded()));n&&(r.preventDefault(),r.stopPropagation())}]))},t.prototype.beforeDestroy=function(){k(this._disposables);this._disposables=[]},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 18},t.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},t.prototype.getDefaultColumnProperties=function(){return{hierarchical:!1}},t.prototype.shouldNotAllowSelectAll=function(){return!0},t.prototype._expandOrCollapse=function(n,t,i){var r=t?t.item:null,u=n.hierarchy;return r&&this._isExpandable(r)?(i?r.expanded()||(u.expand(t.item),this._widget._ariaLive(f.expanded)):r.expanded()&&(u.collapse(t.item),this._widget._ariaLive(f.collapsed)),!0):!1},t.prototype._getDefaultHierarchicalOptions=function(){return{hierarchy:null}},t.prototype._isExpandable=function(n){return n.
expandable&&(n.expandable()===!0||n.expandable()===undefined)},t.Name="azc-grid-hierarchical",t})(e.Extension);n.HierarchicalExtension=d})(l||(l={})),l}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getExtension=function(n){var t=n,i=t&&t.hierarchical;return new e.HierarchicalExtension(i)},t.prototype.initializeExtension=function(){},t.prototype.beforeDestroy=function(){},t.prototype.getName=function(){return"Hierarchical"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.HierarchicalExtension=t;u.registerPlugin(r.Extensions.Hierarchical,t)})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Viva.Pager.css",["require","exports",
"module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-pager{margin-top:3px}.azc-pager .fxs-portal-border{border:1px solid;margin-left:3px}.azc-pager .fxs-portal-border svg{height:12px;width:12px}.azc-pager [role=navigation]{list-style:none;margin:0;padding:0;overflow:auto}.azc-pager-arrow,.azc-pager-input,.azc-pager-page{float:left;text-align:center}.azc-pager-arrow:last-child,.azc-pager-input:last-child,.azc-pager-page:last-child{margin-right:0}.azc-pager-arrow[aria-disabled=true],.azc-pager-input[aria-disabled=true],.azc-pager-page[aria-disabled=true]{opacity:.2!important}.azc-pager-link{display:block;padding:0 11px;font-size:11px;line-height:22px;color:inherit!important;text-decoration:none}.azc-pager-arrow-link{padding:0;line-height:0}.azc-pager-arrow,.azc-pager-page{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-pager-arrow .fxs-portal-svg,.azc-pager-page .fxs-portal-svg{padding:4px}.azc-pager-input{width:50px}.azc-pager-input .azc-pager-input-textBox{height:23px;padding-right:0!important}.azc-pager-input input{text-align:center;border-right-width:1px!important}")})
);define("Viva.Controls/Controls/Viva.Pager",["require","exports","f","o","a","ko","$","./Base/Viva.Validators","./Base/ValidationPlacements/Viva.Css","./Forms/Viva.TextBox","./Base/Viva.Base","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../_generated/Less/Viva.Controls/Controls/Viva.Pager.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var v;return (function(n){function d(){return{previous:l.Pager.previous,next:l.Pager.next}}var u=jQuery,e="azc-pager",v="azc-pager-arrow",y="azc-pager-arrow-previous",p="azc-pager-arrow-next",t="azc-pager-input-textBox",k="<ul role='navigation' aria-label='"+l.Grid.pagination+"'><!-- ko if: $ctl._longPager --><li class='azc-pager-input'>"+("<div class='"+t+"' aria-label='"+l.Pager.currentPage+"' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div>")+"<\/li><li class='azc-pager-page'>"+("<a class='azc-pager-link' role='button' aria-label='"+l.Pager.lastPage+'\' data-bind=\'text: data.numberOfPages, attr: { "data-page-id": data.numberOfPages(), href: $ctl._isCurrentPage(data.numberOfPages()) ? null : "" }\'><\/a>')+
'<\/li><!-- /ko --><!-- ko ifnot: $ctl._longPager --><!-- ko foreach: $ctl._pages --><li class=\'azc-pager-page fxs-portal-hover\' data-bind=\'css: {"fxs-portal-selected": $ctl._isCurrentPage($data)}, attr: { "aria-selected": $ctl._isCurrentPage($data) ? "true" : "false" }\'><a class=\'azc-pager-link\' role=\'button\' data-bind=\'text: $data, attr: {"aria-label": $ctl._ariaLabel($data), "data-page-id": $data, href: $ctl._isCurrentPage($data) ? null : "" }\'><\/a><\/li><!-- /ko --><!-- /ko --><!-- ko if: $ctl._showArrows -->'+("<li class='fxs-portal-border fxs-portal-hover "+v+" "+y+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageFirst() ? "true" : "false" }\'>')+"<a class='azc-pager-link azc-pager-arrow-link' role='button' data-bind='attr: { title: data.text.previous, \"aria-label\": data.text.previous, href: $ctl._isCurrentPageFirst() ? null : \"\" }'><div class='msportalfx-svg-flip-horizontal fxs-portal-svg' data-bind='image: MsPortalFx.Base.Images.Shell.Chevron()'><\/div><\/a><\/li>"+
("<li class='fxs-portal-border fxs-portal-hover "+v+" "+p+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageLast() ? "true" : "false" }\'>')+"<a class='azc-pager-link azc-pager-arrow-link' role='button' data-bind='attr: { title: data.text.next, \"aria-label\": data.text.next, href: $ctl._isCurrentPageLast() ? null : \"\" }'><div class='fxs-portal-svg' data-bind='image: MsPortalFx.Base.Images.Shell.Chevron()'><\/div><\/a><\/li><!-- /ko --><\/ul>",w=(function(n){function t(t){t===void 0&&(t={});n.call(this);this.currentPage=t.currentPage||f.observable(1);this.numberOfPages=t.numberOfPages||f.observable(1);this.maxPages=t.maxPages||f.observable(20);this.text=t.text;this.ariaLive=t.ariaLive||f.observable("")}return __extends(t,n),t})(c.ViewModel),i,b;n.ViewModel=w;i=(function(n){function i(t,i,r){n.call(this,t,i,u.extend({viewModelType:w},r));this.options.text=this.options.text||d();this.element.addClass(e).html(k);var f=new h.ViewModel,c=f.validators;this._textBoxViewModel=f;f.validationPlacements.
push(new s.Css);c.push(new o.ValueRange(null,1,this.options.numberOfPages));c.push(new b);this._attachEvents();this._initializeComputeds();this._bindDescendants()}return __extends(i,n),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(e),n.prototype.dispose.call(this))},r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"_longPager",{get:function(){return this.options.numberOfPages()>this.options.maxPages()},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"_showArrows",{get:function(){return this.options.numberOfPages()>1},enumerable:!0,configurable:!0}),i.prototype._ariaLabel=function(n){return l.Pager.page.format(n)},i.prototype._initializeComputeds=function(){var t=this,n=this.options,i=this._textBoxViewModel;this._pages=f.observableArray();this._addDisposablesToCleanUp(f.computed((function(){var r=t._pages.
peek(),i,u;for(t._pages.valueWillMutate(),r.splice(0,r.length),i=1,u=Math.min(n.numberOfPages(),n.maxPages());i<=u;i++)r.push(i);t._pages.valueHasMutated()})));i.events={enterPressed:function(t){i.validationState()===2&&n.currentPage(parseInt(t,10))}};this._addDisposablesToCleanUp(f.computed((function(){i.value(n.currentPage().toString())})))},i.prototype._attachEvents=function(){var n=this,i;this._detachEvents();i=this.options;this.element.on("click","ul li.azc-pager-page a[href]",this._clickPageEventHandler=function(t){var r=parseInt(u(t.currentTarget).data("page-id"),10);i.currentPage(r);t.preventDefault();n.options.ariaLive("");n.options.ariaLive(l.Pager.loadPageNumber.format(r))}).on("click","ul li."+y+" a[href]",this._clickArrowPreviousEventHandler=function(t){i.currentPage(i.currentPage()-1);t.preventDefault();n.options.ariaLive("");n.options.ariaLive(l.Pager.loadPrev)}).on("click","ul li."+p+" a[href]",this._clickArrowNextEventHandler=function(t){i.currentPage(i.currentPage()+1);t.
preventDefault();n.options.ariaLive("");n.options.ariaLive(l.Pager.loadNext)}).on("blur","."+t+" input",this._inputBlurEventHandler=function(){n._textBoxViewModel.value(i.currentPage().toString());n._textBoxViewModel.validationState(2)})},i.prototype._detachEvents=function(){var n=this.element,f=this._clickPageEventHandler,i,r,u;f&&(n.off("click",f),this._clickPageEventHandler=null);i=this._clickArrowPreviousEventHandler;i&&(n.off("click",i),this._clickArrowPreviousEventHandler=null);r=this._clickArrowNextEventHandler;r&&(n.off("click",r),this._clickArrowNextEventHandler=null);u=this._inputBlurEventHandler;u&&(n.off("blur","."+t+" input",u),this._inputBlurEventHandler=null)},i.prototype._isCurrentPage=function(n){return n===this.options.currentPage()},i.prototype._isCurrentPageFirst=function(){return 1===this.options.currentPage()},i.prototype._isCurrentPageLast=function(){return this.options.numberOfPages()===this.options.currentPage()},i})(c.Widget);n.Widget=i;b=(function(n){function t(
t){n.call(this,null,t)}return __extends(t,n),t.prototype._validate=function(n){return/^[0-9]*$/.test(n)?2:1},t})(o.Validator);f.bindingHandlers.azcPager=a.getBindingHandler(i)})(v||(v={})),v}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer{display:block;height:38px;text-decoration:none;text-align:center}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreLabel{font-size:12px;line-height:38px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon{display:inline-block;margin-top:10px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon:before{content:url(Content/static/azc-validatableControl-pending.gif)}.azc-grid-pageable.azc-grid .azc-grid-pageable-pager{float:right}.azc-grid-pageable.azc-grid.azc-grid-pageable-onePage .azc-grid-pageable-pager{display:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable",["require","exports","f","o","ko","$","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function w(){return{label:u.observable(o.Grid.loadMore),showLabel:u.observable(!0),loading:u.observable(!1)}}var t="azc-grid-pageable",h=t+"-loadMoreContainer",c="."+h+"[href]",l=t+"-onePage",s=t+"-full",a='<!-- ko ifnot: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel --><a aria-label=\''+o.Grid.loadMoreAriaLabel+'\' class=\'azc-grid-pageable-loadMoreContainer\' data-bind=\'attr: { href: $ctl.getPlugin("azc-grid-pageable").options.loading() ? null : "#", "aria-controls": $ctl.id }, visible: $ctl.getPlugin("azc-grid-pageable").options.showLabel\'><span class=\'azc-grid-pageable-loadMoreLabel\' data-bind=\'visible: !$ctl.getPlugin("azc-grid-pageable").options.loading(), text: $ctl.getPlugin("azc-grid-pageable").options.label\'><\/span><span class=\'azc-grid-pageable-loadMoreIcon\' data-bind=\'visible: $ctl.getPlugin("azc-grid-pageable").options.loading, css: { "azc-grid-pageable-showLoadingIcon": $ctl.getPlugin("azc-grid-pageable").options.loading }\'><\/span><\/a><!-- /ko --><!-- ko if: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel --><div class=\'azc-grid-pageable-pager\' data-bind=\'azcPager: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel\'><\/div><!-- /ko -->',
v="<!-- ko template: { name: ko.pureComputed(function () { return data.items().length ? 'bodyCore' : ($ctl.getPlugin(\"azc-grid-pageable\").options.loading() ? 'bodyCore' : 'bodyNoItems'); }), data: $data } --><!-- /ko -->",y=i.disposeDisposable,p=(function(n){function i(t){n.call(this);this._disposables=[];this._options=f.extend(w(),t)}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("table");t.append(".azc-grid-container",a);n.setTemplate("body",v)},i.prototype.afterCreate=function(){var t=this,n=this.options.pagerViewModel;n&&this._disposables.push(u.computed((function(){var i=t._widget.element;i.toggleClass(l,n.numberOfPages()===1);i.addClass(s)})))},i.prototype.afterAttachEvents=function(){var n=this;this._disposables.push(this._widget.element.setEvents(["click.azcPageableGrid",c,function(t){t.preventDefault();t.stopPropagation();var i=n.
options;!i.loading()&&i.onLoadMoreData&&i.onLoadMoreData()}]))},i.prototype.beforeDestroy=function(){y(this._disposables);this._disposables=[];this._widget.element.removeClass(s)},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 20},i.prototype.getTotalItems=function(){return u.observable(-1)},i.prototype.getFirstObservableRowIndexObservable=function(){var n=this;return u.pureComputed((function(){return n.options.pagerViewModel&&n.options.itemsPerPage?(n.options.pagerViewModel.currentPage()-1)*n.options.itemsPerPage()+1:1}))},i.prototype.shouldNotAllowSelectAll=function(){return!0},i.Name=t,i})(e.Extension);n.PageableExtension=p})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable",["require","exports","f","o","ko","./Grid1.Extensibility","./Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.Pager","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable"],
(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function v(n){var t,r;return n&&(t=n.metadata(),t&&(r=t.totalItemCount,!i.isNullOrUndefined(r)))?r:0}var a=i.ViewModels.Controls.Lists.Grid,t=a.PageableType,y=o.Grid,r=i.getUniqueId,l;n.DefaultItemsPagePage=10;l=(function(f){function e(){f.apply(this,arguments);this._options=null;this._type=null;this._dataNav=null;this._filterQS=u.observable(null);this._currentRequestId=null}return __extends(e,f),e.prototype.getExtension=function(f){var o=this,l=f,e=l&&l.pageable,h;if(e&&(this._dataNav=e.dataNavigator),!this._validateSequential()&&!this._validatePageable())throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");this._type=e.type;switch(e.type){case t.Pageable:h=e.pagerMaxPages;this._options={loading:u.observable(!1),pagerViewModel:new s.ViewModel({maxPages:!i.isNullOrUndefined(h)&&u.observable(h)}),itemsPerPage:e.itemsPerPage?e.itemsPerPage:u.observable(
n.DefaultItemsPagePage)};break;case t.Sequential:default:this._options={label:e.label?e.label:u.observable(y.loadMore),showLabel:e.showLabel?e.showLabel:u.observable(!0),loading:u.observable(!1),onLoadMoreData:function(){o._currentRequestId=r();o._onLoadMoreData(o._currentRequestId).catch((function(){}))}}}return new c.PageableExtension(this._options)},e.prototype.initializeExtension=function(){if(!(this._type===t.Sequential&&this._validateSequential()||this._type===t.Pageable&&this._validatePageable()))throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");var n=this._filterableExtn=this._widget._instance.getPlugin(h.FilterableExtension.Name);n&&n.options.serverFilter()&&this._filterQS(n.options.queryString())},e.prototype.resetExtension=function(){var n=this,i=this._filterableExtn&&this._filterableExtn.options,r;return i&&!i.filterCallback()&&i.filterCallback((function(t){if(n._filterQS()!==t)return n._filterQS(t),
n.resetExtension()})),r=this._type===t.Sequential&&this._validateSequential()?this._resetAndLoadData():this._type===t.Pageable&&this._validatePageable()?this._resetLoadPage():Q(),r.catch((function(){})),r},e.prototype.beforeDestroy=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},e.prototype.getName=function(){return"Pageable"},e.prototype.getOrder=function(){return 0},e.prototype._validateSequential=function(){return this._dataNav&&!!this._dataNav.loadByContinuationToken},e.prototype._validatePageable=function(){return this._dataNav&&!!this._dataNav.loadBySkipTake},e.prototype._loadPage=function(){var n=this,i=r(),t=this._options;this._currentRequestId=i;var f=t.pagerViewModel.currentPage(),u=t.itemsPerPage(),e=this._getSortData();return t.loading(!0),Q(this._dataNav.loadBySkipTake((f-1)*u,u,this._filterQS(),e)).then((function(){if(n._currentRequestId===i){var t=n._dataNav.items();t=t?t.slice(0):[];n._widget.options.items(t)}})).finally((function(){n._currentRequestId===
i&&t.loading(!1)}))},e.prototype._attachSubscriptions=function(){var r=this,i,n;if(this._lifetime=this._widget.ltm.createChildLifetime(),this._type===t.Pageable){i=this._options;n=i.pagerViewModel;this._options.pagerViewModel.ariaLive=this._widget._instance._ariaLive;var f=v(this._dataNav),e=i.itemsPerPage(),o=n.currentPage(),s=n.numberOfPages();u.reactor(this._lifetime,(function(){var h=v(r._dataNav),t=i.itemsPerPage(),c=n.currentPage();u.ignoreDependencies((function(){if(t){var i=(h+t-1)/t|0||1;i!==s&&(s=i,n.numberOfPages(i))}(h!==f||t!==e||c!==o)&&(f=h,e=t,o=c,t&&c&&r._loadPage().catch((function(){})))}))}))}},e.prototype._resetCurrentPageSubscription=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null);this._options.pagerViewModel.currentPage(1);this._attachSubscriptions()},e.prototype._resetLoadPage=function(){return this._resetCurrentPageSubscription(),this._loadPage()},e.prototype._onLoadMoreData=function(n){var t=this,i=this._options;return i.loading(!0),Q(this._dataNav.
loadByContinuationToken()).then((function(){t._currentRequestId===n&&t._widget.options.items.push.apply(t._widget.options.items,t._dataNav.items())})).finally((function(){t._currentRequestId===n&&(i.loading(!1),t._dataNav.metadata()&&t._dataNav.metadata().continuationToken||i.showLabel(!1))}))},e.prototype._resetAndLoadData=function(){var n=this._getSortData();return this._currentRequestId=r(),this._dataNav.resetLoadByContinuationToken&&this._dataNav.resetLoadByContinuationToken(this._filterQS(),n),this._options.showLabel(!0),this._widget.options.items([]),this._onLoadMoreData(this._currentRequestId)},e.prototype._getSortData=function(){var n=this._widget.options.sortByList;return n?n():null},e})(e.GridExtension);n.PageableExtension=l;f.registerPlugin(a.Extensions.Pageable,l)})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-reorderRow.azc-grid table thead tr th:nth-child(2)>a{padding-left:0}.azc-grid-reorderRow col.azc-grid-reorderRow-col{width:16px}.azc-grid-reorderRow table tbody tr[draggable]{-webkit-user-drag:element}.azc-grid-reorderRow table tbody tr td.azc-grid-reorderRow-cell{padding-left:5px;padding-right:6px}.azc-grid-reorderRow table tbody tr td:nth-child(2){padding:0}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true]):hover td.azc-grid-reorderRow-cell div{margin-top:4px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true]):hover td.azc-grid-reorderRow-cell div:before{content:url(Content/static/azc.grid.reorderrowextension.handle-hover.svg);width:5px;height:17px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true])[aria-selected=true]:hover td.azc-grid-reorderRow-cell div:before{content:url(Content/static/azc.grid.reorderrowextension.handle-active.svg)}.azc-grid-reorderRow .azc-grid-reorderRow-line{position:absolute;width:100%;height:3px;display:none}.azc-grid-reorderRow.azc-grid-reorderRow-active .azc-grid-reorderRow-line{display:block}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow",["require","exports","f","o","ko","$","../../../Util/Viva.Util","./Viva.Grid1.FocusableRow","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var f=jQuery,l=window,t="azc-grid-reorderRow-active",c="azc-grid-reorderRow-enabled",a='attr: { "data-grid-reorder": true }',v="<div class='azc-grid-reorderRow-line azc-bg-muted'><\/div>",y="<col class='azc-grid-reorderRow-col' />",p="<th role='presentation' class='azc-grid-reorderRow-header'><\/th>",w="<td role='presentation' class='azc-grid-reorderRow-cell azc-br-muted'><div><\/div><\/td>",b="application/x-azc-grid-row",k="data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",h={},d=(function(n){function s(t){n.call(this);this._options=t=t||{};t.disabled===undefined&&(t.disabled=u.observable(!1));this._gridGuid=i.getUniqueId()}
return __extends(s,n),r.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),s.prototype.afterCreate=function(){var n=this;this._widget.element.append(v);u.computed((function(){n._widget.element.toggleClass(c,!n.options.disabled())}))},s.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("header"),r=n.getHtmlTemplate("colgroup");t.addAttribute("tr","data-bind",[a]).prepend("tr",w);i.prepend("tr",p);r.prepend("colgroup",y)},s.prototype.afterAttachEvents=function(){var n=this,r=this;this._widget.element.on("dragstart","[draggable]",this._dragstartEventHandler=function(t){if(!n._widget._extensionTrigger("shouldNotAllowDrag").some((function(n){return!!n}))){e.DataTransfer.isLegacyDataTransfer()&&l.getSelection().removeAllRanges();var f=i.getUniqueId(),o=t.target,r=new e.DataTransfer(t.originalEvent.dataTransfer),s=document.createElement("img");s.src=k;h[f]={rowMetadata:u.dataFor(o),element:o};
r.effectAllowed="move";r.setDragImage(s,-25,-25);r.setData(n._getMimeType(),f)}}).on("drop",this._dropEventHandler=function(t){var i=new e.DataTransfer(t.originalEvent.dataTransfer),u=i.types;if(u.some((function(t){return t===n._getMimeType()}))){i.dropEffect="move";var f=i.getData(n._getMimeType()).split(";"),o=f.map((function(n){return h[n].rowMetadata})),r={rowMetadata:o,clientX:t.originalEvent.pageX,clientY:t.originalEvent.pageY,position:n._positionLine(t)};t.preventDefault();setTimeout((function(){n._widget.trigger("rowReorder",e.cloneEvent(t,"rowReorder"),r);n._widget.options.events("reorder",r)}),0)}}).on("dragend",this._dragendEventHandler=function(){h={};n._widget.element.removeClass(t)}).on("mouseenter.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",this._mouseenterEventHandler=function(){r.options.disabled()||f(this).closest(".azc-grid-row").attr("draggable","true")}).on("mouseleave.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",
this._mouseleaveEventHandler=function(){f(this).closest(".azc-grid-row").removeAttr("draggable")});f("html").on("dragover",this._dragoverEventHandler=function(i){if(f.contains(n._widget.element[0],i.target)){var u=new e.DataTransfer(i.originalEvent.dataTransfer),r=u.types;r&&r.some((function(t){return t===n._getMimeType()}))&&(n._positionLine(i),i.preventDefault())}else n._widget.element.hasClass(t)&&n._widget.element.removeClass(t)})},s.prototype.getOrder=function(){return 21},s.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},s.prototype.beforeCreate=function(){var n=this,t=["azc-grid-editableRow"];this._widget.options.extensions.forEach((function(i){if(t.indexOf(i.getName())>=0)throw new Error("The extension "+i.getName()+" is not compatible with the extension "+n.getName()+".");}))},s.prototype.beforeDestroy=function(){this._widget.element.removeClass(t).removeClass(c);this._dragstartEventHandler&&(this._widget.element.off("dragstart",this._dragstartEventHandler),
this._dragstartEventHandler=null);this._dropEventHandler&&(this._widget.element.off("drop",this._dropEventHandler),this._dropEventHandler=null);this._dragendEventHandler&&(this._widget.element.off("dragend",this._dragendEventHandler),this._dragendEventHandler=null);this._dragoverEventHandler&&(this._widget.element.off("dragover",this._dragoverEventHandler),this._dragoverEventHandler=null);this._mouseenterEventHandler&&(this._widget.element.off("mouseenter.azcGrid",this._mouseenterEventHandler),this._mouseenterEventHandler=null);this._mouseleaveEventHandler&&(this._widget.element.off("mouseleave.azcGrid",this._mouseleaveEventHandler),this._mouseleaveEventHandler=null)},s.prototype.getName=function(){return s.Name},s.prototype.getAdditionalColumns=function(){return 1},s.prototype._getMimeType=function(){return(b+"-"+this._gridGuid).toLowerCase()},s.prototype._positionLine=function(n){var s=f(n.target),r=null,i,e;if(s.hasClass("azc-grid-reorderRow-line"))r=this._savedIndex;else if(f.contains(
this._widget.element[0],n.target)){if(this._widget.element.hasClass(t)||this._widget.element.addClass(t),i=s.closest("[data-grid-reorder=true]"),e=n.originalEvent,i.length===0){var h=this._widget.element.find("[data-grid-reorder=true]"),c=h.first(),v=h.last();i=e.pageY<=c.offset().top?c:v}r=i.index();var l=i.outerHeight(),o=i.offset(),u=i.position(),a=this._widget.element.find(".azc-grid-reorderRow-line");o.top=Math.floor(o.top);u.top=Math.floor(u.top);e.pageY-o.top<l/2?a.css("top",Math.round(u.top)):(a.css("top",Math.round(u.top+l)),r++);this._savedIndex=r}else this._widget.element.removeClass(t);return r},s.Name="azc-grid-reorderRow",s})(s.Extension);n.ReorderRowExtension=d})(h||(h={})),h}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow",["require","exports","f","o","a","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,
t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._handler&&(this._widget._instance.element.off("rowReorder",this._handler),this._handler=null)},t.prototype.getExtension=function(n){var t=n||{},i=t.reorderRow||{},r=i.disabled;return new o.ReorderRowExtension({disabled:r})},t.prototype.initializeExtension=function(){var t=this._widget,n=t.options;t._instance.element.on("rowReorder",this._handler=function(i,r){var b=n.extensionsOptions||{},h=b.reorderRow||{},k=h.automaticallyReorderRows,c=h.rowReorder,l=r.rowMetadata,y,f,s,p,w;if(k!==!1){var u=n.items.peek(),e=[],a=Math.min(u.length,Math.max(0,r.position)),v=0,o=!1;for(l.forEach((function(n){e.push(n.item)})),y=function(n){return e.indexOf(n)>=0?!0:!1},f=0,s=0;f<u.length;f++,s++)p=u[f],y(p)&&(o||(n.items.valueWillMutate(),o=!0),u.splice(f,1),f--,s<a&&v++);o&&(u.splice.apply(u,[a-v,0].concat(e)),n.items.valueHasMutated())}c&&(w={rowMetadata:l.map((function(n){return t.getRowMetadata(
n.item)})),position:r.position},c(i,w))})},t.prototype.getName=function(){return"ReorderRowExtension"},t.prototype.getOrder=function(){return 0},t})(e.GridExtension);n.ReorderRowExtension=t;f.registerPlugin(r.Extensions.ReorderRow,t)})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid.azc-grid-resizableColumn .azc-grid-tableContainer{position:relative}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle{position:absolute;right:-5px;top:0;height:40px;width:10px;cursor:ew-resize;z-index:1;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line{width:1px;height:100%;opacity:0}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-ghostLine{position:absolute;width:1px;top:0;z-index:1}.azc-grid.azc-grid-resizableColumn .azc-grid-show-handles .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line,.azc-grid.azc-grid-resizableColumn thead:hover .azc-grid-resizableColumn-handle-line,.azc-grid.azc-grid-resizableColumn.azc-grid-resizing .azc-grid-resizableColumn-handle-line{opacity:1}.azc-grid.azc-grid-resizableColumn.azc-grid-resizing *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-grid.azc-grid-resizableColumn .azc-grid-headerlabel:after{content:"\\a0"}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn",["require","exports","o","ko","$","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){function s(){return{resizable:r.observable(!0),resizeToPercent:r.observable(!0),minWidth:20}}var t=window,e="azc-grid-resizing",o="<!-- ko if: $ctl.getPlugin(\"azc-grid-resizableColumn\").options.resizable() && hasHandle() --><div class='azc-grid-resizableColumn-handle'><div class='azc-grid-resizableColumn-handle-line azc-bg-muted'><\/div><\/div><!-- /ko -->",h=(function(n){function f(t){n.call(this);this._options=u.extend(s(),t)}return __extends(f,n),i.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("headerCell");t.append("div",o)},f.prototype.afterCreate=function(){var n=this,t=this._widget.options.
columns();t.length>0&&(this._lastColumnObject=t[t.length-1],this._lastColumnObject.hasHandle(!1));this._columnsSubscription=this._widget.options.columns.subscribe((function(t){t.length&&(n._lastColumnObject&&n._lastColumnObject.hasHandle(!0),n._lastColumnObject=t[t.length-1],n._lastColumnObject.hasHandle(!1))}))},f.prototype.afterAttachEvents=function(){var n=this;this._widget.element.on("mousedown.azcGridResizableColumn",".azc-grid-resizableColumn-handle",this._mouseDownEventHandler=function(t){var e,i,f,o;(n._mouseDownPosition=t.pageX,n._handle=u(t.currentTarget),n._columns=n._widget.element.find("th"),e=n._handle.parent().closest("th"),f=r.dataFor(e[0]),t.preventDefault(),f.disableResizable())||(i=n._getNextResizableColumn(n._columns,n._widget.options.columns.indexOf(f)+1),i!==null)&&(o=r.dataFor(i[0]),r.isObservable(f.width)&&r.isObservable(o.width))&&n._resizeStart(e,i)})},f.prototype.getName=function(){return f.Name},f.prototype.getOrder=function(){return 16},f.prototype.beforeDestroy=
function(){this._mouseDownEventHandler&&(this._widget.element.off("mousedown.azcGridResizableColumn",this._mouseDownEventHandler),this._mouseDownEventHandler=null);this._mouseUpEventHandler&&(u(t.document).off("mouseup.azcGridResizableColumn",this._mouseUpEventHandler),this._mouseUpEventHandler=null);this._mouseMoveEventHandler&&(u(t.document).off("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler),this._mouseMoveEventHandler=null);this._columnsSubscription&&(this._columnsSubscription.dispose(),this._columnsSubscription=null);this._widget.element.removeClass(e)},f.prototype.getDefaultColumnProperties=function(){return{disableResizable:r.observable(!1),hasHandle:r.observable(!0)}},f.prototype._resizeStart=function(n,i){var f=this,h,w=this._widget.element.find(".azc-grid-tableHeader"),b=this._widget.element.find(".azc-grid-tableContent"),o=u("<div class='azc-grid-resizableColumn-ghostLine fxs-portal-selected'><\/div>"),s=this._widget.element.find(".azc-grid-tableContainer"),c=
n.offset().left+this._options.minWidth,l=i.offset().left+i.width()-this._options.minWidth,a,v,y,p;h=this._handle.find(".azc-grid-resizableColumn-handle-line");a=h.offset().left;v=this._tableOffset(s,a);o.offset({left:v});o.css("position","absolute");y=w.height();p=b.height();o.height(y+p);s.append(o);u(t.document).on("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler=function(n){var t=n.pageX,i=Math.min(Math.max(t,c),l);n.preventDefault();f._widget.element.addClass(e);o.offset({left:i})});u(t.document).one("mouseup.azcGridResizableColumn",this._mouseUpEventHandler=function(h){var a,w,b,v,k,y,d,p,nt=h.pageX,g=[],tt=Math.min(Math.max(nt,c),l),it=r.dataFor(i[0]),rt=r.dataFor(n[0]);u(t.document).off("mousemove.azcGridResizableColumn",f._mouseMoveEventHandler);f._mouseMoveEventHandler=null;f._widget.element.removeClass(e);o.remove();w=n.width();b=i.width();p=tt-f._mouseDownPosition;v=w+p;k=b-p;f._options.resizeToPercent()?(a=s.width(),d=f._convertToPercent(a,k),y=f._convertToPercent(
a,v),it.width(d)):(f._columns.each((function(n,t){var i=u(t),f=r.dataFor(t);f.hasOwnProperty("width")?g.push(i.width().toString()+"px"):i.width(i.width())})),f._widget.options.columns().forEach((function(n,t){n.width(g[t])})),y=v.toString()+"px");rt.width(y)})},f.prototype._getNextResizableColumn=function(n,t){var e=this._widget.options.columns(),u,o,f,i;if(t===e.length)u=null;else if(f=e[t],f.hasOwnProperty("disableResizable")&&!f.disableResizable()){for(i=0;i<n.length;i++)if(r.dataFor(n.eq(i)[0]).columnId===f.columnId){o=n.eq(i);break}u=o}else t++,u=this._getNextResizableColumn(n,t);return u},f.prototype._convertToPercent=function(n,t){if(n>0)return(t/n*100).toString()+"%"},f.prototype._tableOffset=function(n,t){return t-n.offset().left},f.Name="azc-grid-resizableColumn",f})(f.Extension);n.ResizableColumnExtension=h})(e||(e={})),e}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn"],
(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var t=n,i=t&&t.resizableColumn;return new e.ResizableColumnExtension(i)},t.prototype.getName=function(){return"ResizableColumn"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.ResizableColumnExtension=t;u.registerPlugin(r.Extensions.ResizableColumn,t)})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid.azc-grid-scrollable{width:100%;height:100%;overflow:hidden}.azc-grid.azc-grid-scrollable div.azc-grid-container{width:100%;height:100%;overflow:hidden;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer{width:100%;height:100%;overflow:hidden;padding-top:40px;position:relative;-webkit-flex:1 1 auto;flex:1 1 auto;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer div.azc-grid-tableScrollContainer{width:100%;height:100%;overflow:auto;-webkit-flex:1 1 auto;flex:1 1 auto}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer div.azc-grid-tableScrollContainer table.azc-grid-tableHeader{position:absolute;top:0;left:0}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer tr.azc-grid-scrollable-above+tr.azc-grid-row td{border-top-width:1px;border-top-style:solid}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable",["require","exports","f","o","ko","$","MsPortalImpl/Base/Base.FeatureDetection","MsPortalImpl/Base/Base.BrowserDetection","../../../Util/Viva.Resize","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function d(){return{dataProvider:null}}var c=window,y="<!-- ko template: { name: ko.pureComputed(function () { return  $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems().length ? 'bodyCore' : 'bodyNoItems'; }), data: $data } --><!-- /ko -->",p="<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='presentation' class='azc-grid-scrollable-above' aria-hidden='true'><\/tr><!-- ko foreach: $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems --><!-- ko template: { name: template, data: item() } --><!-- /ko --><!-- /ko --><\/tbody>",w="<tr role='row' class='azc-grid-scrollable-loading'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",
b="<tr role='row' class='azc-grid-scrollable-error'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",t=Math.floor,l=Math.min,k=i.disposeDisposable,a=(function(){function n(n,t,i){var r=this;this.index=n;this.item=u.observable(i);this.state=u.observable(t);this.template=u.pureComputed((function(){switch(r.state()){case 0:return"bodyRowsLoading";case 2:return"bodyRowsError";case 1:default:return"bodyRows"}}))}return n})(),v;n.AsyncItem=a;v=(function(n){function h(t){n.call(this);this._disposables=[];this._firstObservableRowIndex=u.observable(1);this._options=f.extend(d(),t);this.virtualScrolling&&(this.asyncItems=u.observableArray(),this._resetAsyncItemCache())}return __extends(h,n),r.defineProperty(h.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(h.prototype,"virtualScrolling",{get:function(){return!!this.options.dataProvider},enumerable:!0,configurable:!0}),h.prototype.afterCreate=
function(){var n=this,t=this._widget.element;this._scrollContainer=t.find(".azc-grid-tableScrollContainer");this._disposables.push(this._scrollContainer.setEvents(["scroll.azcGridScrollable",function(){n._update()}]));this.virtualScrolling&&(this._lastWidth=t.width(),this._lastHeight=t.height(),s.track(this._widget.ltm,t,(function(t,i){n._onResize(t,i)})),this.options.dataProvider.totalItemCount.subscribe(this._widget.ltm,(function(){n._activePageRequest||(n._resetAsyncItemCache(),n._update())})));this._update(!0)},h.prototype.afterSetTemplates=function(n){this.virtualScrolling&&n.setTemplate({body:y,bodyCore:p,bodyRowsLoading:w,bodyRowsError:b})},h.prototype.getDefaultColumnProperties=function(){return{}},h.prototype.beforeDestroy=function(){this._updateViewportAsyncTimeout&&(c.clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=null);k(this._disposables);this._disposables=[];this._asyncItemCache=null;this._activePageRequest=null},h.prototype.getName=function()
{return h.Name},h.prototype.getOrder=function(){return 15},h.prototype.getTotalItems=function(){return this.options.dataProvider&&this.options.dataProvider.totalItemCount?this.options.dataProvider.totalItemCount:null},h.prototype.getFirstObservableRowIndexObservable=function(){return this._firstObservableRowIndex},h.prototype.shouldNotAllowSelectAll=function(){return this.virtualScrolling},h.prototype.reset=function(){this._resetAsyncItemCache();this.virtualScrolling&&this._widget.options.items.removeAll();var n=this._scrollContainer;n&&(n.scrollLeft(0),n.scrollTop(0),this._update(!0))},h.prototype._onResize=function(n,t){t===this._lastHeight?n!==this._lastWidth&&(this._lastWidth=n,this._updateHeader()):(this._lastHeight=t,this._lastWidth=n,this._update())},h.prototype._resetAsyncItemCache=function(){this._asyncItemCache=[];this._asyncItemCache.length=2048},h.prototype._updateHeader=function(){var n=this._scrollContainer,t,r,u,f;n&&(t=n.find(".azc-grid-tableHeader"),t.length&&(r=-n.scrollLeft(
),t.css("left",r<0?r+"px":""),u=i.truncate(n[0].offsetWidth-n[0].clientWidth),t.css("width",u>0?"calc(100% - "+u+"px)":""),f=this._widget.options.showHeader?t.outerHeight()||40:0,n.parent(".azc-grid-tableContainer").css("padding-top",f+"px")))},h.prototype._update=function(n){this._updateHeader();this.virtualScrolling&&this._updateViewportAsync(n)},h.prototype._updateViewportAsync=function(n){var t=this,i;if(n)try{this._updateViewport(n);this._updateHeader()}catch(r){}else i=this._options.updateViewportAsyncDebounceTime||256,this._updateViewportAsyncTimeout&&c.clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=c.setTimeout((function(){if(t._updateViewportAsyncTimeout)try{t._updateViewport();t._updateHeader()}catch(n){}}),i)},h.prototype._getRowHeight=function(){var t,n;return n=this._scrollContainer.find(".azc-grid-full td"),n.length&&(t=n.outerHeight()),t||this._options.defaultRowHeight||36},h.prototype._getTotalScrollHeight=function(n,i){var r,u;return u=t(
h._maxElementHeightFactor*e.getMaxElementHeight()),r=t(n*i),l(r,u)},h.prototype._updateContentHeight=function(n){var t=this._widget.element.find(".azc-grid-tableContent");t.height(n)},h.prototype._updateAboveRowHeight=function(n){var t=this._scrollContainer.find(".azc-grid-scrollable-above");t.css("height",n||"")},h.prototype._updateViewport=function(n){var u=this,r,h,e,c,b,v,y,a,f,k,p,d,s,w,g;r=this.options.dataProvider.totalItemCount();(i.isNullOrUndefined(r)||n)&&(r=100);h=this._getRowHeight();e=this._getTotalScrollHeight(r,h);this._updateContentHeight(e);s=this._scrollContainer[0];c=o.isIe11?s.getBoundingClientRect().height:s.clientHeight;b=s.scrollTop||0;v=s.scrollHeight||e||c;c&&(y=t(r*(b/v)),a=Math.ceil(c/h),f=Math.max(y-a,0),k=l(y+a+a,r),p=k-f,d=t(v*(f/r)),this._updateAboveRowHeight(d),w=this._activePageRequest={},g=this._renderRows(f,p),this._request(w,g,f,p).finally((function(){w===u._activePageRequest&&(u._activePageRequest=null,r=u.options.dataProvider.totalItemCount(),e=u._getTotalScrollHeight(
r,h),u._updateContentHeight(e),u._updateHeader(),u._firstObservableRowIndex(f+1))})))},h.prototype._renderRows=function(n,t){for(var f=[],e=this._asyncItemCache,h,c,r=0;r<t;r++){var o=n+r,i=void 0,s=o%e.length;i=e[s];i&&i.index===o||(i=new a(o,0,null),e[s]=i,i.state()===2&&i.state(0));f.push(i)}return h=u.utils.compareArrays(this.asyncItems(),f,{sparse:!0}),c=u.utils.createArraySplices(h),u.utils.applyArraySplices(this.asyncItems,c),f},h.prototype._updateGridItems=function(n){var i,r,t;n&&n.length&&(t=this._widget.options,i=t.items.peek(),i?(r=[i.length,0],n.forEach((function(n){i.indexOf(n)<0&&r.push(n)})),r.length>2&&t.items.splice.apply(t.items,r)):t.items(n))},h.prototype._request=function(n,t,i,r){var u=this;return this.options.dataProvider.fetch(i,r).then((function(i){var r=[];t.forEach((function(n,t){var u=i[t];u?(n.item(u),n.state(1),r.push(u)):n.state(2)}));n===u._activePageRequest&&(t.length>i.length&&u.asyncItems.splice(i.length,t.length-i.length),u._updateGridItems(r))}),(function(
){t.forEach((function(n){n.state()!==1&&n.state(2)}))}))},h.prototype.shouldRetainRowMetadata=function(){return!0},h.prototype.scrollTo=function(n){this._scrollContainer[0].scrollTop=n/this._options.dataProvider.totalItemCount.peek()*this._scrollContainer[0].scrollHeight;this._updateViewport()},h.Name="azc-grid-scrollable",h._maxElementHeightFactor=.8,h})(h.Extension);n.ScrollableExtension=v})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable",["require","exports","f","o","ko","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments);this._filterQueryString=u.observable(null)}return __extends(t,n),t.prototype.getExtension=function(n){var i=this,r=n,e=r&&r.scrollable,f={dataProvider:null},t=this._dataNavigator=
e.dataNavigator;return t&&(f.dataProvider={totalItemCount:u.pureComputed((function(){var n,i=t.metadata();return i&&(n=i.totalItemCount),n})),fetch:function(n,r){var u=null,f=i._widget.options.sortByList;return f&&(u=f()),Q(t.loadBySkipTake(n,r,i._filterQueryString(),u)).then((function(){return t.items()}))}}),this._azcScrollableExtension=new s.ScrollableExtension(f)},t.prototype.initializeExtension=function(){var r=this,u=this._widget._instance.getPlugin(o.FilterableExtension.Name),n,t,i;u&&(n=this._filterQueryString,t=u.options,t.serverFilter()&&n(t.queryString()),i=t.filterCallback,i()||i((function(t){if(n()!==t){n(t);var i=r._dataNavigator;return i&&i.metadata(null),r.resetExtension()}})))},t.prototype.resetExtension=function(){var n=this;return Q().then((function(){n._azcScrollableExtension.reset()}))},t.prototype.beforeDestroy=function(){this._azcScrollableExtension=null},t.prototype.getName=function(){return"Scrollable"},t.prototype.getOrder=function(){return 0},t})(e.GridExtension);n.ScrollableExtension=
t;f.registerPlugin(r.Extensions.Scrollable,t)})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-sortableColumn .azc-grid-sortableColumn-target{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;cursor:pointer}.azc-grid-sortableColumn .fxc-ascending .msportalfx-descend,.azc-grid-sortableColumn .fxc-descending .msportalfx-ascend,.azc-grid-sortableColumn .fxc-none .msportalfx-ascend,.azc-grid-sortableColumn .fxc-none .msportalfx-descend{opacity:.25}.azc-grid-sortableColumn .azc-grid-sortableColumn-image-container{display:flex;-webkit-flex:0 0 auto;flex:0 0 auto;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;right:9px}.azc-grid-sortableColumn .azc-grid-sortableColumn-sortImage{width:11px;height:38px}.azc-grid-sortableColumn .azc-grid-headerlabel{-webkit-flex:1 1 calc(100% - 11px);flex:1 1 calc(100% - 11px);margin-right:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:15px}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn",["require","exports","f","o","ko","./Viva.Grid1.FocusableRow","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","../../../../MsPortalImpl/Generated/SvgStartupDefinitions","MsPortalImpl/Base/Base.EventTypes","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){var t="azc-grid-sortableColumn",a=t+"-target",l="."+a,v="<span role='columnheader' data-bind='attr: {class: $ctl.getPlugin(\""+t+'")._getSortClasses(sortOrder()), tabindex: $tabIndex, "aria-sort": $ctl.getPlugin("'+t+"\")._getAriaSort(sortOrder()), id: columnId }'><div class='azc-grid-headerlabel' data-bind='text: name'><\/div><div class='azc-grid-sortableColumn-image-container'>"+("<div class='azc-grid-sortableColumn-sortImage' data-bind='image: $ctl.getPlugin(\""+t+"\").sortIcon'>")+"<\/div><\/div><\/span>",
y=i.disposeDisposable,p=(function(n){function e(t){n.call(this);this.sortIcon=h.Content.SvgStartup.sortArrows;this._disposables=[];this._sortByList=[];this._options=t||{}}return __extends(e,n),e.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.afterSetTemplates=function(n){var t=n.getTemplate("headerCellContent");n.setTemplate("headerCellContent","<!-- ko if: sortable -->"+v+"<!-- /ko --><!-- ko ifnot: sortable -->"+t+"<!-- /ko -->")},e.prototype.afterCreate=function(){var n=this,u=this._options,t=this._widget,i=t.options,r=this._sortByList=i.sortByList();u.sortClientSide&&r.length&&this._sortCallback(r);i.sortByList.subscribe(t.ltm,(function(t){t!==n._sortByList&&n._sortCallback(t)}))},e.prototype._sortCallback=function(n){this._sortByList=n;this._widget.options.actions.sort(n);this._ariaLiveUpdate(n)},e.prototype.afterAttachEvents=function(){var
n=this,t=this._widget.getPlugin(f.FocusableRowExtension.Name),r=this._widget.element;this._disposables.push(r.setEvents([c.default.click,l,function(t){var f=u.dataFor(this),h=f.itemKey,r=n._sortByList.slice(),c=t.ctrlKey,s=f.sortOrder()===1?2:1,e={itemKey:f.itemKey,sortOrder:s},o;t.preventDefault();c?(o=i.findIndex(r,(function(n){return n.itemKey===h})),o>=0?r[o]=e:r.push(e)):(n._resetColumns(),r=[e]);f.sortOrder(s);n._sortCallback(r)}],[c.default.keydown,l,function(n){s.getModifierKeys(n)===0&&(n.which===13||n.which===32)&&($(this).trigger(c.default.click),n.preventDefault())}],["keydown.azc-grid-sortableColumn",l,t?function(n){var i=$(n.currentTarget),u=r.find(l).last();i[0]===u[0]&&n.which===9&&s.getModifierKeys(n)===0&&t._focusCurrentlyFocusableRow(n)}:null]))},e.prototype._ariaLiveUpdate=function(n){var r=this,t=[],f=n.map((function(n){return{displayName:i.find(r._widget.options.columns(),(function(t){return t.itemKey===n.itemKey})).name(),sortBy:n}})),u;f.forEach((function(n,i){i===0?t.
push(o.Viva.Grid.Sortable.sortingby):t.push(o.Viva.Grid.Sortable.then);var u=r._getAriaSort(n.sortBy.sortOrder)==="ascending"?o.Viva.Grid.Sortable.ascending:o.Viva.Grid.Sortable.descending;t.push(n.displayName,u)}));u=t.join(" ");this._widget._ariaLive(u)},e.prototype._resetColumns=function(){var n=this._widget.options,t=n.sortByList();t.length!==0&&n.columns().forEach((function(n){n.sortOrder(0)}))},e.prototype._getAriaSort=function(n){switch(n){case 1:return"ascending";case 2:return"descending"}return"none"},e.prototype._getSortClasses=function(n){return a+" fxc-"+this._getAriaSort(n)},e.prototype.getDefaultColumnProperties=function(){return{sortable:!0,sortOrder:u.observable(0)}},e.prototype.beforeDestroy=function(){y(this._disposables);this._disposables=[]},e.prototype.getName=function(){return e.Name},e.Name=t,e})(e.Extension);n.SortableColumnExtension=p})(l||(l={})),l}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn",["require","exports","f","o","./Grid1.Extensibility",
"./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments);this._dataNavigator=null}return __extends(t,n),t.prototype.getExtension=function(n){var i=n,r=i&&i.sortableColumn,t=r.dataNavigator;return t&&(this._dataNavigator=t),new e.SortableColumnExtension({sortClientSide:!t,sortCallback:r.sortCallback||null})},t.prototype.getName=function(){return"SortableColumn"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.SortableColumnExtension=t;u.registerPlugin(r.Extensions.SortableColumn,t)})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1",["require","exports","o","./Grid1.Impl","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable",
"MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn"],(function(n,t,i,r){"use strict";var u;return (function(n){var t,i,u;n.x=5;t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(r.GridExtension);
n.GridExtension=t;i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(r.Widget);n.Widget=i;u=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(r.TrustedWidget);n.TrustedWidget=u})(u||(u={})),u}))