/*
 * Rar Worker
 * based on bitjs, Binary Tools for JavaScript
 * https://code.google.com/p/bitjs/
 *
 * Copyright(c) 2011 Google Inc.
 * Available under the MIT license http://opensource.org/licenses/mit-license.php
 */
!function(){function a(a){var d,e,f=new Array(V),g=new Array(W);if(a.readBits(8-a.bitPtr&7),a.readBits(1))return void z("Error!  PPM not implemented yet");if(!a.readBits(1))for(d=X.length;d--;)X[d]=0;for(var h=0;h<V;++h){var i=a.readBits(4);if(15===i){var j=a.readBits(4);if(0===j)f[h]=15;else{for(j+=2;j-- >0&&h<V;)f[h++]=0;--h}}else f[h]=i}c(f,0,Y,V);var k=W;for(d=0;d<k;){var l=b(a,Y);if(l<16)g[d]=l+X[d]&15,d++;else if(l<18)for(e=16===l?a.readBits(3)+3:a.readBits(7)+11;e-- >0&&d<k;)g[d]=g[d-1],d++;else for(e=18===l?a.readBits(3)+3:a.readBits(7)+11;e-- >0&&d<k;)g[d++]=0}for(c(g,0,Z,R),c(g,R,$,S),c(g,R+S,_,T),c(g,R+S+T,aa,U),d=X.length;d--;)X[d]=g[d];return!0}function b(a,b){var c=b.DecodeLen,d=b.DecodePos,e=b.DecodeNum,f=65534&a.getBits(),g=f<c[8]?f<c[4]?f<c[2]?f<c[1]?1:2:f<c[3]?3:4:f<c[6]?f<c[5]?5:6:f<c[7]?7:8:f<c[12]?f<c[10]?f<c[9]?9:10:f<c[11]?11:12:f<c[14]?f<c[13]?13:14:15;a.readBits(g);var h=d[g]+(f-c[g-1]>>>16-g);return e[h]}function c(a,b,c,d){for(var e=c.DecodeLen,f=c.DecodePos,g=c.DecodeNum,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=0,k=0,l=g.length;l--;)g[l]=0;for(l=0;l<d;l++)h[15&a[l+b]]++;h[0]=0,i[0]=0,f[0]=0,e[0]=0;for(var m=1;m<16;++m)j=2*(j+h[m]),k=j<<15-m,k>65535&&(k=65535),e[m]=k,f[m]=f[m-1]+h[m-1],i[m]=f[m];for(m=0;m<d;++m)0!==a[m+b]&&(g[i[15&a[b+m]]++]=m)}function d(){z("ERROR!  RAR 1.5 compression not supported")}function e(a){var c,d,e,h=q.data.length,i=0;for(g(a);h>q.ptr;){var j=b(a,Z);if(j<256)q.insertByte(j);else if(j>269){e=J[j-=270]+3,(c=K[j])>0&&(e+=a.readBits(c));var k=b(a,$);d=O[k]+1,(c=P[k])>0&&(d+=a.readBits(c)),d>=8192&&(e++,d>=262144&&e++),s=e,r=ja[3&i++]=d,n(e,d)}else if(269!==j)if(256!==j)if(j<261){d=ja[i-(j-256)&3];var l=b(a,aa);e=J[l]+2,(c=K[l])>0&&(e+=a.readBits(c)),d>=257&&(e++,d>=8192&&(e++,d>=262144&&e++)),s=e,r=ja[3&i++]=d,n(e,d)}else j<270&&(d=M[j-=261]+1,(c=N[j])>0&&(d+=a.readBits(c)),s=2,r=ja[3&i++]=d,n(2,d));else r=ja[3&i++]=r,n(s,r);else g(a),f()}f()}function f(){var a=q.ptr-v;v=q.ptr,w+=a,B()}function g(a){var d,e,f,g,h=new Array(ea),i=new Array(4*fa);if(a.readBits(1),!a.readBits(1))for(g=ga.length;g--;)ga[g]=0;for(d=ba+ca+da,f=0;f<ea;f++)h[f]=a.readBits(4);for(c(h,0,Y,ea),f=0;f<d;){var j=b(a,Y);if(j<16)i[f]=j+ga[f]&15,f++;else if(16===j)for(e=a.readBits(2)+3;e-- >0&&f<d;)i[f]=i[f-1],f++;else for(e=17===j?a.readBits(3)+3:a.readBits(7)+11;e-- >0&&f<d;)i[f++]=0}for(c(i,0,Z,ba),c(i,ba,$,ca),c(i,ba+ca,aa,da),g=ga.length;g--;)ga[g]=i[g]}function h(c){var d,e,g,h,k=new Array(S),o=new Array(S),p=0,t=0,u=0;for(g=0;g<L.length;g++,t++)for(h=0;h<L[g];h++,u++,p+=1<<t)k[u]=p,o[u]=t;var v;ja=[0,0,0,0],r=0,s=0;for(var w=X.length;w--;)X[w]=0;for(a(c);;){var x=b(c,Z);if(x<256)q.insertByte(x);else if(x>=271){e=J[x-=271]+3,(v=K[x])>0&&(e+=c.readBits(v));var y=b(c,$);if(d=k[y]+1,(v=o[y])>0)if(y>9)if(v>4&&(d+=c.getBits()>>>20-v<<4,c.readBits(v-4)),ha>0)ha--,d+=ia;else{var z=b(c,_);16===z?(ha=Q-1,d+=ia):(d+=z,ia=z)}else d+=c.readBits(v);d>=8192&&(e++,d>=262144&&e++),m(d),l(e,d),n(e,d)}else if(256!==x){if(257!==x)if(258!==x)if(x<263){var A=x-259;for(d=ja[A],g=A;g>0;g--)ja[g]=ja[g-1];ja[0]=d;var B=b(c,aa);e=J[B]+2,(v=K[B])>0&&(e+=c.readBits(v)),l(e,d),n(e,d)}else x<272&&(d=M[x-=263]+1,(v=N[x])>0&&(d+=c.readBits(v)),m(d),l(2,d),n(2,d));else 0!==s&&n(s,r);else if(!j(c))break}else if(!i(c))break}f()}function i(b){f();var c=!1,d=!1;return b.readBits(1)?c=!0:(d=!0,c=!!b.readBits(1)),!(d||c&&!a(b))}function j(a){var b=a.readBits(8),c=(7&b)+1;7===c?c=a.readBits(8)+7:8===c&&(c=a.readBits(16));for(var d=[],e=0;e<c;e++)d.push(a.readBits(8));return k(b,d,c)}function k(a,b){return b.length>0&&z("Error! RarVM not supported yet!"),!0}function l(a,b){r=b,s=a}function m(a){ja.splice(3,1),ja.splice(0,0,a)}function n(a,b){var c=q.ptr-b;if(c<0){for(var d=ka.length;c<0;)c=ka[--d].data.length+c;for(;a--;)q.insertByte(ka[d].data[c++])}if(a>b)for(;a--;)q.insertByte(q.data[c++]);else q.insertBytes(q.data.subarray(c,c+a))}function o(a){var b=a.header.unpVer<=15?15:a.header.unpVer,c=a.header.LHD_SOLID,f=new p.io.BitStream(a.fileData.buffer,!0,a.fileData.byteOffset,a.fileData.byteLength);switch(q=new p.io.ByteBuffer(a.header.unpackedSize),z("Unpacking "+a.filename+" RAR v"+b),b){case 15:d(f,c);break;case 20:case 26:e(f,c);break;case 29:case 36:h(f,c)}return ka.push(q),q.data}var p=p||{};p.io=p.io||{},function(){p.BIT=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768];var a=[0,1,3,7,15,31,63,127,255];p.io.BitStream=function(a,b,c,d){if(!a||!a.toString||"[object ArrayBuffer]"!==a.toString())throw"Error! BitArray constructed with an invalid ArrayBuffer object";var e=c||0,f=d||a.byteLength;this.bytes=new Uint8Array(a,e,f),this.bytePtr=0,this.bitPtr=0,this.peekBits=b?this.peekBits_rtl:this.peekBits_ltr},p.io.BitStream.prototype.peekBits_ltr=function(b,c){if(b<=0||"number"!=typeof b)return 0;c=c||!1;for(var d,e=this.bytePtr,f=this.bitPtr,g=0,h=0,i=this.bytes;b>0;){if(e>=i.length)throw"Error!  Overflowed the bit stream! n="+b+", bytePtr="+e+", bytes.length="+i.length+", bitPtr="+f;var j=8-f;b>=j?(d=a[j]<<f,g|=(i[e]&d)>>f<<h,e++,f=0,h+=j,b-=j):(d=a[b]<<f,g|=(i[e]&d)>>f<<h,f+=b,h+=b,b=0)}return c&&(this.bitPtr=f,this.bytePtr=e),g},p.io.BitStream.prototype.peekBits_rtl=function(b,c){if(b<=0||"number"!=typeof b)return 0;c=c||!1;for(var d=this.bytePtr,e=this.bitPtr,f=0,g=this.bytes;b>0;){if(d>=g.length)throw"Error!  Overflowed the bit stream! n="+b+", bytePtr="+d+", bytes.length="+g.length+", bitPtr="+e;var h=8-e;b>=h?(f<<=h,f|=a[h]&g[d],d++,e=0,b-=h):(f<<=b,f|=(g[d]&a[b]<<8-b-e)>>8-b-e,e+=b,b=0)}return c&&(this.bitPtr=e,this.bytePtr=d),f},p.io.BitStream.prototype.getBits=function(){return((255&this.bytes[this.bytePtr])<<16)+((255&this.bytes[this.bytePtr+1])<<8)+(255&this.bytes[this.bytePtr+2])>>>8-this.bitPtr&65535},p.io.BitStream.prototype.readBits=function(a){return this.peekBits(a,!0)},p.io.BitStream.prototype.peekBytes=function(a,b){if(a<=0||"number"!=typeof a)return 0;for(;0!==this.bitPtr;)this.readBits(1);b=b||!1;var c=this.bytePtr,d=this.bytes.subarray(c,c+a);return b&&(this.bytePtr+=a),d},p.io.BitStream.prototype.readBytes=function(a){return this.peekBytes(a,!0)},p.io.ByteStream=function(a,b,c){var d=b||0,e=c||a.byteLength;this.bytes=new Uint8Array(a,d,e),this.ptr=0},p.io.ByteStream.prototype.peekNumber=function(a){if(a<=0||"number"!=typeof a)return-1;for(var b=0,c=this.ptr+a-1;c>=this.ptr;)b<<=8,b|=this.bytes[c],--c;return b},p.io.ByteStream.prototype.readNumber=function(a){var b=this.peekNumber(a);return this.ptr+=a,b},p.io.ByteStream.prototype.peekSignedNumber=function(a){var b=this.peekNumber(a),c=Math.pow(2,8*a-1),d=2*c;return b>=c&&(b-=d),b},p.io.ByteStream.prototype.readSignedNumber=function(a){var b=this.peekSignedNumber(a);return this.ptr+=a,b},p.io.ByteStream.prototype.peekBytes=function(a,b){if(a<=0||"number"!=typeof a)return null;var c=this.bytes.subarray(this.ptr,this.ptr+a);return b&&(this.ptr+=a),c},p.io.ByteStream.prototype.readBytes=function(a){return this.peekBytes(a,!0)},p.io.ByteStream.prototype.peekString=function(a){if(a<=0||"number"!=typeof a)return"";for(var b="",c=this.ptr,d=this.ptr+a;c<d;++c)b+=String.fromCharCode(this.bytes[c]);return b},p.io.ByteStream.prototype.readString=function(a){var b=this.peekString(a);return this.ptr+=a,b},p.io.ByteBuffer=function(a){if("number"!=typeof a||a<=0)throw"Error! ByteBuffer initialized with '"+a+"'";this.data=new Uint8Array(a),this.ptr=0},p.io.ByteBuffer.prototype.insertByte=function(a){this.data[this.ptr++]=a},p.io.ByteBuffer.prototype.insertBytes=function(a){this.data.set(a,this.ptr),this.ptr+=a.length},p.io.ByteBuffer.prototype.writeNumber=function(a,b){if(b<1)throw"Trying to write into too few bytes: "+b;if(a<0)throw"Trying to write a negative number ("+a+") as an unsigned number to an ArrayBuffer";if(a>Math.pow(2,8*b)-1)throw"Trying to write "+a+" into only "+b+" bytes";for(var c=[];b-- >0;){var d=255&a;c.push(d),a>>=8}this.insertBytes(c)},p.io.ByteBuffer.prototype.writeSignedNumber=function(a,b){if(b<1)throw"Trying to write into too few bytes: "+b;var c=Math.pow(2,8*b-1);if(a>=c||a<-c)throw"Trying to write "+a+" into only "+b+" bytes";for(var d=[];b-- >0;){var e=255&a;d.push(e),a>>=8}this.insertBytes(d)},p.io.ByteBuffer.prototype.writeASCIIString=function(a){for(var b=0;b<a.length;++b){var c=a.charCodeAt(b);if(c<0||c>255)throw"Trying to write a non-ASCII string!";this.insertByte(c)}}}(),p.archive=p.archive||{},function(){p.base=function(a,b){var c=arguments.callee.caller;if(c.superClass_)return c.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var d=Array.prototype.slice.call(arguments,2),e=!1,f=a.constructor;f;f=f.superClass_&&f.superClass_.constructor)if(f.prototype[b]===c)e=!0;else if(e)return f.prototype[b].apply(a,d);if(a[b]===c)return a.constructor.prototype[b].apply(a,d);throw Error("goog.base called from a method of one name to a method of a different name")},p.inherits=function(a,b){function c(){}c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a},p.archive.UnarchiveEvent=function(a){this.type=a},p.archive.UnarchiveEvent.Type={START:"start",PROGRESS:"progress",EXTRACT:"extract",FINISH:"finish",INFO:"info",ERROR:"error"},p.archive.UnarchiveInfoEvent=function(a){p.base(this,p.archive.UnarchiveEvent.Type.INFO),this.msg=a},p.inherits(p.archive.UnarchiveInfoEvent,p.archive.UnarchiveEvent),p.archive.UnarchiveErrorEvent=function(a){p.base(this,p.archive.UnarchiveEvent.Type.ERROR),this.msg=a},p.inherits(p.archive.UnarchiveErrorEvent,p.archive.UnarchiveEvent),p.archive.UnarchiveStartEvent=function(){p.base(this,p.archive.UnarchiveEvent.Type.START)},p.inherits(p.archive.UnarchiveStartEvent,p.archive.UnarchiveEvent),p.archive.UnarchiveFinishEvent=function(){p.base(this,p.archive.UnarchiveEvent.Type.FINISH)},p.inherits(p.archive.UnarchiveFinishEvent,p.archive.UnarchiveEvent),p.archive.UnarchiveProgressEvent=function(a,b,c,d,e,f){p.base(this,p.archive.UnarchiveEvent.Type.PROGRESS),this.currentFilename=a,this.currentFileNumber=b,this.currentBytesUnarchivedInFile=c,this.totalFilesInArchive=f,this.currentBytesUnarchived=d,this.totalUncompressedBytesInArchive=e},p.inherits(p.archive.UnarchiveProgressEvent,p.archive.UnarchiveEvent),p.archive.UnarchiveExtractEvent=function(a){p.base(this,p.archive.UnarchiveEvent.Type.EXTRACT),this.unarchivedFile=a},p.inherits(p.archive.UnarchiveExtractEvent,p.archive.UnarchiveEvent),p.archive.Unarchiver=function(a,b){this.ab=a,this.pathToBitJS_=b||"",this.listeners_={};for(var c in p.archive.UnarchiveEvent.Type)this.listeners_[p.archive.UnarchiveEvent.Type[c]]=[]},p.archive.Unarchiver.prototype.worker_=null,p.archive.Unarchiver.prototype.getScriptFileName=function(){throw"Subclasses of AbstractUnarchiver must overload getScriptFileName()"},p.archive.Unarchiver.prototype.addEventListener=function(a,b){a in this.listeners_&&this.listeners_[a].indexOf(b)===-1&&this.listeners_[a].push(b)},p.archive.Unarchiver.prototype.removeEventListener=function(a,b){if(a in this.listeners_){var c=this.listeners_[a].indexOf(b);c!==-1&&this.listeners_[a].splice(c,1)}},p.archive.Unarchiver.prototype.handleWorkerEvent_=function(a){(a instanceof p.archive.UnarchiveEvent||a.type)&&this.listeners_[a.type]instanceof Array?(this.listeners_[a.type].forEach(function(b){b(a)}),a.type===p.archive.UnarchiveEvent.Type.FINISH&&this.worker_.terminate()):console.log(a)},p.archive.Unarchiver.prototype.start=function(){var a=this,b=this.pathToBitJS_+this.getScriptFileName();b&&window.Modernizr.webworkers&&(this.worker_=new Worker(b),this.worker_.onerror=function(a){throw console.log("Worker error: message = "+a.message),a},this.worker_.onmessage=function(b){"string"==typeof b.data?console.log(b.data):a.handleWorkerEvent_(b.data)},this.worker_.postMessage({file:this.ab}))},p.archive.Unarchiver.prototype.stop=function(){this.worker_&&this.worker_.terminate()},p.archive.Unzipper=function(a,b){p.base(this,a,b)},p.inherits(p.archive.Unzipper,p.archive.Unarchiver),p.archive.Unzipper.prototype.getScriptFileName=function(){return"unzip.js"},p.archive.Unrarrer=function(a,b){p.base(this,a,b)},p.inherits(p.archive.Unrarrer,p.archive.Unarchiver),p.archive.Unrarrer.prototype.getScriptFileName=function(){return"unrar.js"},p.archive.Untarrer=function(a,b){p.base(this,a,b)},p.inherits(p.archive.Untarrer,p.archive.Unarchiver),p.archive.Untarrer.prototype.getScriptFileName=function(){return"untar.js"}}();var q,r,s,t="",u=0,v=0,w=0,x=0,y=0,z=function(a){postMessage(new p.archive.UnarchiveInfoEvent(a))},A=function(a){postMessage(new p.archive.UnarchiveErrorEvent(a))},B=function(){postMessage(new p.archive.UnarchiveProgressEvent(t,u,v,w,x,y))},C="0123456789ABCDEF",D=function(a){return C[a>>4]+C[15&a]},E=function(a){return C[a>>12&15]+C[a>>8&15]+C[a>>4&15]+C[15&a]},F=115,G=116,H=123,I=function(a){var b=a.bytePtr;switch(z("Rar Volume Header @"+a.bytePtr),this.crc=a.readBits(16),z("  crc="+this.crc),this.headType=a.readBits(8),z("  headType="+this.headType),this.flags={},this.flags.value=a.peekBits(16),z("  flags="+E(this.flags.value)),this.headType){case F:this.flags.MHD_VOLUME=!!a.readBits(1),this.flags.MHD_COMMENT=!!a.readBits(1),this.flags.MHD_LOCK=!!a.readBits(1),this.flags.MHD_SOLID=!!a.readBits(1),this.flags.MHD_PACK_COMMENT=!!a.readBits(1),this.flags.MHD_NEWNUMBERING=this.flags.MHD_PACK_COMMENT,this.flags.MHD_AV=!!a.readBits(1),this.flags.MHD_PROTECT=!!a.readBits(1),this.flags.MHD_PASSWORD=!!a.readBits(1),this.flags.MHD_FIRSTVOLUME=!!a.readBits(1),this.flags.MHD_ENCRYPTVER=!!a.readBits(1),a.readBits(6);break;case G:this.flags.LHD_SPLIT_BEFORE=!!a.readBits(1),this.flags.LHD_SPLIT_AFTER=!!a.readBits(1),this.flags.LHD_PASSWORD=!!a.readBits(1),this.flags.LHD_COMMENT=!!a.readBits(1),this.flags.LHD_SOLID=!!a.readBits(1),a.readBits(3),this.flags.LHD_LARGE=!!a.readBits(1),this.flags.LHD_UNICODE=!!a.readBits(1),this.flags.LHD_SALT=!!a.readBits(1),this.flags.LHD_VERSION=!!a.readBits(1),this.flags.LHD_EXTTIME=!!a.readBits(1),this.flags.LHD_EXTFLAGS=!!a.readBits(1),a.readBits(2),z("  LHD_SPLIT_BEFORE = "+this.flags.LHD_SPLIT_BEFORE);break;default:a.readBits(16)}switch(this.headSize=a.readBits(16),z("  headSize="+this.headSize),this.headType){case F:this.highPosAv=a.readBits(16),this.posAv=a.readBits(32),this.flags.MHD_ENCRYPTVER&&(this.encryptVer=a.readBits(8)),z("Found MAIN_HEAD with highPosAv="+this.highPosAv+", posAv="+this.posAv);break;case G:this.packSize=a.readBits(32),this.unpackedSize=a.readBits(32),this.hostOS=a.readBits(8),this.fileCRC=a.readBits(32),this.fileTime=a.readBits(32),this.unpVer=a.readBits(8),this.method=a.readBits(8),this.nameSize=a.readBits(16),this.fileAttr=a.readBits(32),this.flags.LHD_LARGE?(z("Warning: Reading in LHD_LARGE 64-bit size values"),this.HighPackSize=a.readBits(32),this.HighUnpSize=a.readBits(32)):(this.HighPackSize=0,this.HighUnpSize=0,4294967295===this.unpackedSize&&(this.HighUnpSize=2147483647,this.unpackedSize=4294967295)),this.fullPackSize=0,this.fullUnpackSize=0,this.fullPackSize|=this.HighPackSize,this.fullPackSize<<=32,this.fullPackSize|=this.packSize,this.filename=a.readBytes(this.nameSize);for(var c=0,d="";c<this.filename.length;c++)d+=String.fromCharCode(this.filename[c]);if(this.filename=d,this.flags.LHD_SALT&&(z("Warning: Reading in 64-bit salt value"),this.salt=a.readBits(64)),this.flags.LHD_EXTTIME)for(var e=a.readBits(16),f=0;f<4;++f){var g=e>>4*(3-f);if(0!==(8&g)){0!==f&&a.readBits(16);for(var h=3&g,i=0;i<h;++i)a.readBits(8)}}for(this.flags.LHD_COMMENT&&z("Found a LHD_COMMENT");b+this.headSize>a.bytePtr;)a.readBits(1);z("Found FILE_HEAD with packSize="+this.packSize+", unpackedSize= "+this.unpackedSize+", hostOS="+this.hostOS+", unpVer="+this.unpVer+", method="+this.method+", filename="+this.filename);break;default:z("Found a header of type 0x"+D(this.headType)),a.readBytes(this.headSize-7)}},J=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224],K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5],L=[4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,14,0,12],M=[0,4,8,16,32,64,128,192],N=[2,2,3,4,5,6,6,6],O=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576,32768,49152,65536,98304,131072,196608,262144,327680,393216,458752,524288,589824,655360,720896,786432,851968,917504,983040],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,16,16,16,16,16,16,16,16,16,16,16,16],Q=16,R=299,S=60,T=17,U=28,V=20,W=R+S+U+T,X=new Array(W),Y={DecodeLen:new Array(16),DecodePos:new Array(16),DecodeNum:new Array(V)},Z={DecodeLen:new Array(16),DecodePos:new Array(16),DecodeNum:new Array(R)},$={DecodeLen:new Array(16),DecodePos:new Array(16),DecodeNum:new Array(S)},_={DecodeLen:new Array(16),DecodePos:new Array(16),DecodeNum:new Array(T)},aa={DecodeLen:new Array(16),DecodePos:new Array(16),DecodeNum:new Array(U)},ba=298,ca=48,da=28,ea=19,fa=257,ga=new Array(4*fa),ha=0,ia=0,ja=[0,0,0,0],ka=[],la=function(a){this.header=new I(a),this.filename=this.header.filename,this.header.headType!==G&&this.header.headType!==H?(this.isValid=!1,z("Error! RAR Volume did not include a FILE_HEAD header ")):(this.fileData=null,this.header.packSize>0&&(this.fileData=a.readBytes(this.header.packSize),this.isValid=!0))};la.prototype.unrar=function(){if(!this.header.flags.LHD_SPLIT_BEFORE)if(48===this.header.method){z("Unstore "+this.filename),this.isValid=!0,v+=this.fileData.length,w+=this.fileData.length;var a=this.header.packSize,b=new p.io.ByteBuffer(a);b.insertBytes(this.fileData),this.fileData=b.data}else this.isValid=!0,this.fileData=o(this)};var ma=function(a){t="",u=0,v=0,w=0,x=0,y=0,postMessage(new p.archive.UnarchiveStartEvent);var b=new p.io.BitStream(a,!1),c=new I(b);if(24914===c.crc&&114===c.headType&&6689===c.flags.value&&7===c.headSize){z("Found RAR signature");var d=new I(b);if(d.headType!==F)z("Error! RAR did not include a MAIN_HEAD header");else{var e=[],f=null;do try{f=new la(b),z("RAR localFile isValid="+f.isValid+", volume packSize="+f.header.packSize),f&&f.isValid&&f.header.packSize>0?(x+=f.header.unpackedSize,e.push(f)):0===f.header.packSize&&0===f.header.unpackedSize&&(f.isValid=!0)}catch(a){break}while(f.isValid);y=e.length,e=e.sort(function(a,b){var c=a.filename,d=b.filename;return c>d?1:-1}),z(e.map(function(a){return a.filename}).join(", "));for(var g=0;g<e.length;++g){var h=e[g];t=h.header.filename,v=0,h.unrar(),h.isValid&&(postMessage(new p.archive.UnarchiveExtractEvent(h)),B())}B()}}else A("Invalid RAR file");postMessage(new p.archive.UnarchiveFinishEvent)};self.onmessage=function(a){var b=a.data;ma(b,!0)}}();