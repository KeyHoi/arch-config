define("HubsExtension/ArmHelpers/ArmApiEndpoints",["require","exports","f","i"],(function(n,t,i,r){"use strict";var u;return (function(n){function s(t){return n.armEndpoints.first((function(n){return u.isEqualCloudName(n.cloudName,t)}))}var u=r.Extension,f=i.Base,t=window.fx.environment,e=t.armInvokeApi,o=(t.armEndpoint||"").replace(/\/$/,"");n.armEndpoints=t&&t.armEndpoints||[];u.multiCloudEnabled||(n.armEndpoints=[{cloudName:f.Constants.DefaultCloudName,uri:o,invokeApi:e}]);n.getArmEndpointObject=s})(u||(u={})),u}));define("HubsExtension/Common/BrowseCuration",["require","exports","f","i","FxHubs/RpcEndPoints"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function t(n){return i.retryPromise((function(){return e().then(n)}),10,1e3)}var f=i.Base.Constants,e=i.memoizeQ((function(){return Q(u.Curation.getSharedCurationEndpoint.invoke(r.Rpc.client,f.Shell,undefined))}));n.getSearchCuration=i.memoizeQ((function(){return t((function(n){return n.searchCuration||[]}))}));n.getExcludedResourceTypes=
i.memoizeQ((function(n){return t((function(t){var u=(t.resourceTypesExcludedFromBrowse||[]).first((function(t){return r.Extension.isEqualCloudName(t.cloudName||f.DefaultCloudName,n)}));return i.convertArrayToMap(u&&u.types||[],(function(n){return typeof n=="string"?n:n.resourceType}),(function(n){return typeof n=="string"?!0:n.kinds||{}}))}))}));n.getMergedAssetTypes=i.memoizeQ((function(){return t((function(n){return n.mergedAssetTypes||[]}))}))})(f||(f={})),f}));define("HubsExtension/Common/AssetTypeCache",["require","exports","f","i","ko","FxHubs/RpcEndPoints","../ArmHelpers/ArmApiEndpoints","./BrowseCuration"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){function nt(){return h||(h=Q(b.getRegisteredAssetTypesInformationEndPoint.acquireObject(d,k,undefined).then((function(n){return ot(n&&n.getValue()).finally((function(){n.dispose()}))})))),h}function tt(n){var t=Q.defer(),r=n.cloudName||g,f=n.extensionName,e=n.assetType,u=function(n){if(t.promise.isPending()){var u=n.assetTypesInformation&&
i.find(n.assetTypesInformation,(function(n){return v(r,n.cloudName)&&f===n.lowerCaseExtension&&e===n.lowerCaseAssetType}));u&&t.resolve(u)}};return ut(r).then(u,null,u).finally((function(){t.promise.isPending()&&t.reject(new Error("Could not find the asset type"))})),t.promise}function it(n,t,i){var u,r;return n?(u=n.toLowerCase(),s&&(r=s.assetTypes.get(t).first((function(n){return v(n.cloudName,t)&&n.lowerCaseResourceType===u})),r))?Q.resolve(r):Q(b.getResourceTypeAssetTypeInformationEndPoint.invoke(d,k,{resourceTypes:[n],cloudName:t})).then((function(n){if(n&&n.length){var r=n[0];if(r.assetType)return s&&(r.cloudName=t,s.assetTypes.get(t).push(r)),Q.resolve(r)}if(!i)throw new Error("Did not receive any asset type information from the shell");return null})):undefined}function rt(n,t,i){return v(n,i.cloudName||g)&&t.lowerCaseExtension===i.extensionName&&t.lowerCaseAssetType===i.assetType}function st(n,t){return o.getMergedAssetTypes().then((function(r){return it(n,t).then((function(n){var u=i.find(
r,(function(i){return rt(t,n,i.base)||i.associated.some((function(i){return rt(t,n,i)}))})),o={base:n,associated:[]},f,e;return u?(f={base:n,associated:[],infoTextOverride:u.infoTextOverride},e=[],e.push(tt(u.base).then((function(n){f.base=n}))),u.associated.forEach((function(n){e.push(tt(n).then((function(n){f.associated.push(n)})))})),Q.allSettled(e).then((function(n){return n.forEach((function(n){n.state!=="fulfilled"&&et.warning("Failed to find asset type: "+n.reason)})),f}))):o}))}))}function p(n){if(s&&!s.isPartialSet)return Q.resolve({assetTypesInformation:s.assetTypes.get(n),isPartialSet:s.isPartialSet});if(!c.get(n)){var t=w().then((function(){return{assetTypesInformation:s.assetTypes.get(n),isPartialSet:s.isPartialSet}}));c.set(n,t)}return c.get(n)}function ht(n){return p(n).then((function(n){var t={};return(n&&n.assetTypesInformation||[]).map((function(n){n.lowerCaseResourceType&&(t[n.lowerCaseResourceType]=n.icon||l.Images.Polychromatic.ResourceDefault())})),t}))}function ut(n){return p(n).then(
(function(n){return n.assetTypesInformation=(n.assetTypesInformation||[]).filter((function(n){return!!n.resourceType})),n}))}function ft(n){var f=!1,u=n.isPartialSet;if(s&&(n.assetTypesInformation.every((function(n){var r=s.assetTypes.get(n.cloudName).first((function(t){return i.deepEquals(t,n)}));if(!r){f=!0;t.onlyPartialResultsAvailable(!0);return!1}return!0})),!f))t.onlyPartialResultsAvailable(u);s={assetTypes:r.getCloudMap(),isPartialSet:u};t.onlyPartialResultsAvailable(u);n.assetTypesInformation.forEach((function(n){n.extensionName===a.ExtensionNames.Hubs?e.armEndpoints.forEach((function(t){var r=i.clone(n,!0);r.cloudName=t.cloudName;s.assetTypes.getOrSet(t.cloudName,[]).push(r)})):s.assetTypes.getOrSet(n.cloudName,[]).push(n)}))}function w(){return Q(nt()).then((function(n){return ft(n),n}))}function ct(n){h&&(n||s&&s.isPartialSet)&&(s=undefined,c=r.getCloudMap(),h=undefined,w(),y.slice().forEach(Q.nextTick))}function lt(n){y.push(n)}function at(n){y.remove(n)}var l=i.Base,a=l.Constants,b=f.AssetTypes,
et=l.Diagnostics.createLog(n),k=a.Shell,d=r.Rpc.client,ot=u.unwrap,v=r.Extension.isEqualCloudName,g=a.DefaultCloudName,s,c=r.getCloudMap(),h,y=[];t.onlyPartialResultsAvailable=u.observable(!0);t.getRegisteredAssetTypesInformation=nt;t.getResourceTypeAssetTypeInformation=it;t.getMergedResourceTypeAssetTypeInformation=st;t.getRegisteredAssetTypes=p;t.getRegisteredResourceTypesIcons=ht;t.getRegisteredResourceTypes=ut;t.updateCache=ft;t.primeRegisteredAssetTypesCache=w;t.assetTypeCacheUpdated=ct;t.registerAssetTypeUpdate=lt;t.unregisterAssetTypeUpdate=at})(s||(s={})),s}));define("HubsExtension/ArmHelpers/ArmApisStartup",["require","exports","f","i","o","a","Fx/Ajax","FxHubs/RpcEndPoints","../Common/AssetTypeCache","./ArmApiEndpoints"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function gi(n){var t=h.getArmEndpointObject(n);return t||g.endpointNotFound(n),t.uri}function nr(n){return h.getArmEndpointObject(n).invokeApi}function ft(n){return n.replace(wi,"")}function et(
n){return"/"+ft(n)}function a(n){return(n||"").toLowerCase()}function kt(n){return n.replaceAll("'","''")}function tr(n,t){var r=i.trimEnd(t,"/")+i.ensurePrefix(n,"/"),u=pi.exec(r);return u||g.invalidUrlEndpoint(r),r=u[1]?u[1]+"/":"",r+=ft(u[7]).replace(bi,"/"),!u[1]&&u[7].startsWith("/")&&(r="/"+r),r+(u[8]||"")}function ir(){return ki.invoke(b.client,w.Shell,null)}function rr(n,t,i){return di.invoke(b.client,w.Shell,{cloudName:n.cloudName,extension:n.name,assetType:t,assetId:i})}function ur(n){var t=a(n);return!n||t.startsWith("hidden-")||t.startsWith("link:")}function fr(n,i){return vt(n)?n:tr(n,t.getArmEndpointUri(i))}function er(n){return{reason:n.trim(),extension:it}}function or(n){var t,u,r;return n?(t=a(n.extension||rt),t=t===a(it)?"":"("+t+") ",u=n.reason||"unknown",r=""+t+u,r.length<=60)?r:(t=i.replaceMany(t,{azure:"az",extension:"",microsoft:"ms"}),r=""+t+u,r.length<=60)?r:r.substr(0,57)+"...":null}function dt(n,i,r,u){n.length>t.maxBatchCallCount&&g.batchLimitExceeded();var f=
n.map((function(n){return vt(n)?{httpMethod:"GET",url:n}:{httpMethod:"GET",relativeUrl:n}})),e={requests:f},o=t.getAbsoluteArmUri("batch"+vi,r);return k({cloudName:r,contentType:l,headers:{accept:l},isBackgroundTask:i,invokeApi:null,setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(u),type:"POST",uri:o,data:ct(e)}).then((function(n){return(n.content||{}).responses||[]}))}function ot(n,i,r,u,f,e){if(!n.length)return Q();var o=n.pop(),s=t.getAbsoluteArmUri(o,f);return k({cloudName:f,contentType:l,headers:{accept:l},isBackgroundTask:u,invokeApi:t.getArmInvokeApi(f),setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(e),type:"GET",uri:s}).then((function(t){var s=t.content,c=s&&s.value,l,h;return s?c?(l=i(c),l===!1?n=[]:(h=s.nextLink,h&&n.push(h))):r({api:o,reason:"Expected response.value not found."}):r({api:o,reason:"Expected response not found."}),ot(n,i,r,u,f,e)}),(function(t){return r({api:o,reason:t}),ot(n,i,r,u,f,e)}))}function sr(n,t,i,r,u,f){return ot(
n,t,i,r,u,f)}function hr(n,i,r,u,f,e,o,s,h,c){var v=t.getAbsoluteArmUri(n,e),a={cloudName:e,headers:{accept:l},isBackgroundTask:u,performRetry:c,invokeApi:s!==!1?t.getArmInvokeApi(e):null,setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(o),type:i,uri:v};return r&&(a.contentType=l,a.data=typeof r=="string"?r:ct(r)),h&&(a.dataFilter=function(n,t){return t==="json"&&!n?"{}":n}),f&&(a.dataType=f),k(a)}function cr(n,i,r,u,f,e,o,s,h){return t.callRaw(n,i,r,u,"json",f,e,o,s,h).then((function(n){return n.content}))}function gt(n,t,i,r,u,e,o){var s=f.apply(null,{length:n.length}).map((function(n,t){return t})),h;return n=n.slice(0),h=function(){if(n.length){var f=n.slice(0,20),c=f.map((function(n){return typeof n=="string"?n:n.uri}));return dt(c,r,u,e).then((function(r){return r.every((function(r,u){var v;r=r||{};var e=r.content||{},h=e,l=null,a=f[u];if((typeof a!="string"?a.responseIsArrayType:o)&&(h=e.value,l=e.nextLink),!e||!h||r.httpStatusCode>=400)i({api:c[u],reason:r});else{
if(v=t(h,s[u]),v===!1)return n=[],!1;l&&(n.push({uri:l,responseIsArrayType:!0}),s.push(s[u]))}return!0})),n.splice(0,f.length),s.splice(0,f.length),h()}),(function(t){return i({api:f.join("|"),reason:t}),n.splice(0,f.length),s.splice(0,f.length),h()}))}return Q()},h()}function lr(n,t,i,r,u){var f=[],e=[],o=Q.defer();return gt(n,(function(n){f=f.concat(n)}),(function(n){e.push(n)}),t,i,r,u).then((function(){e.length?o.reject(e):o.resolve(f)})),o.promise}function ar(n,t){var i={assetTriplet:n,cloudName:t};return ei.mapAssetIdToResourceIdEndPoint.invoke(b.client,rt,i)}function vr(){return"/locations"+wt}function yr(){return"/tenants?api-version=2017-08-01"}function pr(n,t,i){return ni(n,t,(function(n){return i&&i("resourcegroup eq '"+n+"'")}))}function ni(n,t,i){var r;return u.isSubscriptionId(t)?[u.parseSubscriptionDescriptor(t).subscription]:lt(t)?(r=u.parseResourceGroupDescriptor(t),i&&i(r.resourceGroup),[r.subscription]):at(t)&&!u.isTenantResource(t)?(r=yt(t),i&&i(r.resourceGroup),[r.subscription]):
n||[]}function wr(n,t,r){var u=i.makeArray(n).filter((function(n){return!si(y,(function(t){return n.cloudName===t.cloudName&&n.extensionName===t.extensionName&&n.assetType===t.assetType&&i.deepEquals(n.assetId,t.assetId)}))})),f;y.push.apply(y,u);f=u.map((function(n){var i=n;return i.reason=t,i}));ri.hubsNotifyAssetDeletedDefinition.invoke(r||b.client,rt,f).finally((function(){Q.delay(2e3).then((function(){y.remove.apply(y,u)}))}))}function br(){return"/subscriptions"+wt}function kr(n){return"/subscriptions/"+n+"/locations"+d}function dr(n){return"/"+ft(n)+"/providers/microsoft.authorization/permissions?api-version="+ci}function ti(n,i,r,u,f){var o;f===void 0&&(f=null);var s="eventTimestamp",h=new c.UriBuilder("/subscriptions/"+i+"/providers/microsoft.insights/eventtypes/management/"+n),e=s+" ge '"+r.toISOString()+"' and "+s+" le '"+u.toISOString()+"'";return f&&f.length&&(e=f+" and "+e),o=h.query,o.setParameter(v,t.eventsApiVersion),o.setParameter("$filter",e),h.toString()}function gr(n,t,i,r){
return r===void 0&&(r=null),ti("values",n,t,i,r)}function nu(n,t,i,r){return r===void 0&&(r=null),ti("digestEvents",n,t,i,r)}function tu(n){return"/subscriptions/"+n+"/providers/microsoft.authorization/classicAdministrators"+yi}function nt(n){return!!n}function st(n,t){a(n).split(" ").forEach((function(n){n&&t.push("substringof('"+kt(n)+"', name)")}))}function p(n,t,r){var u=i.makeArray(t).filter(nt).map((function(t){return n+" eq '"+kt(a(t))+"'"})).join(" or ");u&&r.push(u)}function iu(n,t,i,r,u,f){var o=new c.UriBuilder("/resources"),e=[n.map((function(n){return"subscriptionId eq '"+n+"'"})).join(" or "),],s;return st(i,e),p("resourcegroup",f,e),p("location",u,e),p("resourceType",t,e),r&&e.push.apply(e,r),o.query.setParameter(v,pt),s=e.filter(nt).map((function(n){return"("+n+")"})).join(" and "),s&&o.query.setParameter("$filter",s),o.toString()}function ru(n,t,i,r){var f=new c.UriBuilder("/providers/"+n.resourceTypeName),u=[],e;return st(t,u),p("location",r,u),i&&u.push.apply(u,i),f.query.setParameter(
v,n.apiVersion),e=u.filter(nt).map((function(n){return"("+n+")"})).join(" and "),e&&f.query.setParameter("$filter",e),f.toString()}function uu(n,t,i,r,u){var e=new c.UriBuilder("/subscriptions/"+n+"/providers/"+t.topLevelResourceTypeAlias),f=[],o;return(t.proxyRoutingFilters||[]).forEach((function(n){switch(n){case 1:st(i,f);break;case 2:p("resourcegroup",r,f);break;case 3:p("location",u,f);break;default:oi.error("Unhandled proxy routing filter: <"+n+">")}})),e.query.setParameter(v,t.apiVersion),o=f.filter(nt).map((function(n){return"("+n+")"})).join(" and "),o&&e.query.setParameter("$filter",o),e.toString()}function fu(n){return"/subscriptions/"+n+"/resourcegroups"+d}function eu(n,t){return t?et(n)+ai:et(n)+d}function ou(n,i){var r=new c.UriBuilder(et(n)),u=r.query;return u.getParameter(v)?Q(r.toString()):t.getLatestApiVersion(r.path,i).then((function(n){return u.setParameter(v,n),r.toString()}))}function su(n){var i,u,r,f;if(!i)for(u=n.split("/"),r=u.length-1;r;){if(f=u.slice(0,r).join("/"),
t.resourceTypeApiVersionDictionary[f]){i=t.resourceTypeApiVersionDictionary[f];t.resourceTypeApiVersionDictionary[n]=i;break}r--}return i}function hu(i,r){if(lt(i))return Q.resolve(pt);if(u.isSubscriptionId(i))return Q.resolve(li);if(at(i)){var f=yt(i),e=a(f.provider+"/"+f.types.join("/")),o;return ut||(ut=s.getRegisteredResourceTypes(r).then((function(n){n.assetTypesInformation.forEach((function(n){var i=n.resourceType,r=n.apiVersion;i&&r&&(t.resourceTypeApiVersionDictionary[a(i)]=r)}))}))),ut.then((function(){if(o=t.resourceTypeApiVersionDictionary[e],o)return o;ui.trace({source:it,action:"MissingApiVersion",actionModifier:e});var u=f.subscription,s=f.provider,h=(!u?"/providers/"+s:"/subscriptions/"+u+"/providers/"+s)+d,c=t.getAbsoluteArmUri(h,r);return Q(k({uri:c,invokeApi:t.getArmInvokeApi(r),type:"GET",headers:{accept:l},setAuthorizationHeader:!0,setTelemetryHeader:"getLatestApiVersion",cloudName:r})).then((function(n){var i=n&&n.content&&n.content.resourceTypes||[];return i.forEach((function(
n){var i=n.apiVersions||[],u=i.first((function(n){return n&&hi.test(n)})),r=a(f.provider+"/"+n.resourceType);t.resourceTypeApiVersionDictionary[r]||(t.resourceTypeApiVersionDictionary[r]=u||i[0])})),t.resourceTypeApiVersionDictionary[e]||su(e)||t.resourceTypeApiVersion}),(function(r){return tt.createLog(n).warning(i+" using api ver "+t.resourceTypeApiVersion+". Error "+r.responseText),t.resourceTypeApiVersion}))}))}return Q.reject("Unexpected id "+i)}function cu(n){n=n.filter((function(n){return u.isResourceId(n.assetId)||u.isResourceGroupId(n.assetId)}));var f={},r={},e=n.map((function(n){var i=n.cloudName,e=n.assetId,o=function(t){f[t]=n;r[i]||(r[i]=[]);r[i].push(t)};return u.isResourceGroupId(e)?(o(t.resourceGroupApi(e)),Q(!0)):t.resourceApi(e,i).then(o)})),o=t.makeResourceManagerTelemetry("notifyIfResourcesDeleted");return Q.all(e).then((function(){var n=[];return i.forEachKey(r,(function(i,r){for(r=r||[];r.length;){var u=r.splice(0,t.maxBatchCallCount);n.push(au(u,i,f,o))}})),Q.all(n).then((function(
n){return n.reduce((function(n,t){return n.concat(t)}),[])}))}))}function ii(n){n.httpMethod=n.httpMethod||"GET";var i=t.getAbsoluteArmUri(n.armApiOrUri,n.cloudName),r={headers:{accept:l},setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(n.telemetry),type:n.httpMethod,uri:i};return Q(e.batch(r))}function lu(n){return ii(n).then((function(t){return n.responseFilter=n.responseFilter||function(n){if([200,202,201,204,].indexOf(n.httpStatusCode)===-1)throw r.Azure.buildSimplifiedError(n.content);},n.responseFilter(t,n.armApiOrUri),t.content}))}function au(n,i,r,u){return t.callBatch(n,!1,i,u).then((function(i){var u=[];return i.forEach((function(i,f){var o=n[f],e=r[o];i.httpStatusCode===404?(t.internalNotifyAssetDeleted(e,"The query to '"+o+"' returned a "+i.httpStatusCode+"."),u.push(e.assetId)):i.httpStatusCode===403&&(t.removeMruAsset({cloudName:e.cloudName,name:e.extensionName},e.assetType,e.assetId),u.push(e.assetId))})),u}))}var c=i.Base,w=c.Constants,tt=c.Diagnostics,ri=r.
AssetManager,b=r.Rpc,ui=tt.Telemetry,fi=c.Net2,u=i.ViewModels.Services.ResourceTypes,ei=o.AssetTypes,ht=o.Mru,oi=tt.createLog(n),it=w.ExtensionNames.Hubs,rt=w.Shell,k=fi.Internal.ajaxExtended,ct=JSON.stringify,lt=u.isResourceGroupId,at=u.isResourceId,vt=c.Resources.isUriAbsolute,yt=u.parseResourceDescriptor,si=i.find,l="application/json",hi=new RegExp("^[0-9-]+$","ig"),bt,g,ut,y;t.resourceTypeApiVersion="2014-04-01";t.eventsApiVersion="2014-04-01";var pt="2014-04-01-preview",ci="2015-07-01",li="2016-06-01",v="api-version",d="?api-version=2014-04-01-preview",ai="?api-version=2016-09-01",vi="?api-version=2015-11-01",wt="?api-version=2016-06-01",yi="?api-version=2014-07-01-preview",pi=/^((https?:)(\/\/\/?)([\w]*(?::[\w]*)?@)?([\d\w\.-]+)(?::(\d+))?)?([^?]*)?(?:(.*)?)$/i,wi=/^[\s\/\/]*|[\/\/]*$/g,bi=/\/\//g,ki=ht.clearMruAssetsListEndPoint,di=ht.removeMruAssetEndPoint;t.maxBatchCallCount=20;bt={batchLimitExceeded:"",invalidUrlEndpoint:"",endpointNotFound:""};g=r.getErrorMap(bt);t.getArmEndpointUri=
gi;t.getArmInvokeApi=nr;t.clearMruAssetsList=ir;t.removeMruAsset=rr;t.isHiddenTag=ur;t.getAbsoluteArmUri=fr;t.makeResourceManagerTelemetry=er;t.shortenTelemetryForAjax=or;t.callBatch=dt;t.callWithContinuation=sr;t.callRaw=hr;t.call=cr;t.callBatchWithContinuation=gt;t.callBatchAndFollowContinuationTokens=lr;t.mapAssetIdFromHubs=ar;t.listLocationsApi=vr;t.listTenantsApi=yr;t.filterSubscriptionsByScope=pr;t.filterSubscriptionsByScopeByResourceGroup=ni;y=[];t.internalNotifyAssetDeleted=wr;t.listSubscriptions=br;t.listSubscriptionLocationsApi=kr;t.getPermissionsApi=dr;t.getEventsApi=gr;t.getEventDigestsApi=nu;t.listClassicAdministratorsApi=tu;t.resourceTypeApiVersionDictionary={"aspera.transfers/services":"2016-03-25","cloudyn.analytics/accounts":"2016-03-01","conexlink.mycloudit/accounts":"2015-06-15","hive.streaming/services":"2016-03-18","microsoft.bingmaps/mapapis":"2015-07-02","microsoft.visualstudio/account/project":"2014-02-26","newrelic.apm/accounts":"2014-10-01","pokitdok.platform/services":
"2016-05-17","raygun.crashreporting/apps":"2015-01-01","signiant.flight/accounts":"2015-06-29","trendmicro.deepsecurity/accounts":"2015-06-15"};t.resourcesAcrossSubscriptionsApi=iu;t.tenantResourcesApi=ru;t.providerProxyResourcesApi=uu;t.resourceGroupsInSubscriptionApi=fu;t.resourceGroupApi=eu;t.resourceApi=ou;t.getLatestApiVersion=hu;t.notifyIfResourcesDeleted=cu;t.callRawUsingBatch=ii;t.callUsingBatch=lu})(c||(c={})),c}));define("HubsExtension/_generated/ExtensionDefinition",["require","exports","i","HubsExtension/Tags/TagsClientStrings","HubsExtension/ServicesHealth/ServicesHealthClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/Locks/LocksClientStrings","HubsExtension/ClassicAdmins/ManagementTeamClientStrings","HubsExtension/Browse/BrowseClientStrings","HubsExtension/MoveResource/MoveResourceStrings"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function a(){var w=l.createGalleryServiceDefinition,b=l.createAssetIdSource,k=l.createPermission,
v=l.createCommandGroupDefinition,c=l.createPartReferenceDefinition3,a=l.createPartInstanceDefinition,p=l.createDetailsDefinition2,n=l.createReference,i=l.createInputBinding,y=l.createCommandDefinition,d=l.createDefinition3;return d(t,[y("MoveResourceCommand",h.moveResourceCommandText,"MoveResource$MoveResourceCommandVM",[i("resourceId",[n(1,"resourceId")],!1)],p(t,t,t,[i(t,[n(4,"container.selectable")],!1)],t,t,t,[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),t,t,t,2)],[a("Browse",c("BrowseAllResourcesPinnedPart",t,t,[],4),t,!1),a("ServicesHealthPartStart",c("ServicesHealthPart",t,t,[],1),t,!1),a("GalleryTileStart",c("GalleryTile",t,t,[i("selectedMenuItemId",[n(5,"constant_",t,t,t,"")],!0)],2),t,!1),a("HelpAndSupport",c("HelpAndSupportPart",t,t,[],2),t,!1),a("GettingStarted",c("GettingStartedPart",t,t,[],5,5,4),t,!1),a("AzureProjectGettingStarted",c("AzureProjectGettingStartedPart",t,t,[],3),t,!1),a("Diagnostics",c("DiagnosticsTile",t,t,[],0),t,!1),a("TourTileStart",c("TourTile",t,
t,[],2),t,!1),a("Settings",c("SettingsBladePart",t,t,[],1),t,!1),a("BillingTileStart",c("SubscriptionsTile",t,t,[],0),t,!1),a("WhatsNewTileStart",c("WhatsNewTile",t,t,[],2),t,!1),a("FeedbackTileStart",c("FeedbackTile",t,t,[],1),t,!1),a("AzurePortalTileStart",c("AzurePortalTile",t,t,[],1),t,!1)],[v("serviceCommandGroup",[]),v("RecentResourceBrowseGrid2Commands",[y("DiscardRecentResource",s.discardRecentItem,"BrowseGrid2$DiscardRecentResourceCommand",[i("id",[n(1,"id")],!1),i("assetType",[n(1,"assetType")],!0),i("extensionName",[n(1,"extensionName")],!0)],t,t,t,t,0)]),v("ManagementTeamCommandGroup",[y("ManageUsersCommand",o.manageUsersCommandText,"ClassicAdmins$ManageUsersCommand",[],t,t,t,t,1)]),v("LockCommands",[y("Delete",e.delete,"Locks$DeleteLockCommandViewModel",[i("id",[n(1,"id")],!1)],t,t,t,t,0)]),v("MoveResourceCommands",[y("MoveResourceCommand",h.moveResourceCommandText,"MoveResource$MoveResourceCommandVM",[i("resourceId",[n(1,"resourceId")],!1)],p(t,t,t,[i(t,[n(4,"container.selectable")],
!1)],t,t,t,[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),t,t,t,2)]),v("ResourceGroupBrowseCommands",[y("OpenResourceGroupDeleteBlade",f.deleteResourceGroupCommandTitle,"ResourceMap$DeleteResourceGroupCommandViewModel",[i("resourceGroup",[n(1,"id")],!1)],p("ResourceGroupDeleteBladeForCommand",t,t,t,t,t,[i("resourceGroup",[n(4,"content.resourceGroup")],!1)],[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),"ResourceGroups","resourceGroup",[k(t,"ResourceGroups",b(0,"resourceGroup"),"Microsoft.Resources/subscriptions/resourceGroups/delete",0)],2)]),v("ServiceHealth",[y(t,u.ServiceHealth.uriCommandTitle,"ServicesHealth$PublicShdUriCommand",[],t,t,t,t,1)]),v("AddTagCommandGroup",[y("AddTagCommand",r.addCommandText,"Tags$SaveTagCommand",[],t,t,t,t,0)]),v("TagItemCommandGroup",[y("DeleteTagCommand",r.deleteCommandText,"Tags$DeleteTagCommand",[i("key",[n(1,"key")],!1),i("value",[n(1,"value")],!1),i("resourceId",[n(1,"resourceId")],!1),i("allowEdits",[n(1,"allowEdits")],!1)],t,t,t,t,0)]),
v("MoveResourceBladeCommands",[y(t,h.moveDocLabel,"MoveResource$LearnMoreCommandVM",[],t,t,t,t,1)])],{},t,w("Deployments$CustomDeploymentBladeSelector"),t,"HubsExtension","1.0","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=%","1.0.0.2","5.0.302.911 (production#94a4abd914.171117-1557)")}var t=undefined,l=i.DefinitionBuilder,v,c,y,p,w;n.definitionName="HubsExtension";n.getDefinition=a,(function(n){var t,i,r,u,f,e;(function(n){n.name="Microsoft_Azure_Insights"})(t=n.Microsoft_Azure_Insights||(n.Microsoft_Azure_Insights={})),(function(n){n.name="Microsoft_Azure_Monitoring";var t;(function(n){var t,i,r,u;(function(n){n.name="EventsBrowseBlade"})(t=n.EventsBrowseBlade||(n.EventsBrowseBlade={})),(function(n){n.name="DiagnosticsLogsBlade"})(i=n.DiagnosticsLogsBlade||(n.DiagnosticsLogsBlade={})),(function(n){n.name="AlertsBlade"})(r=n.AlertsBlade||(n.AlertsBlade={})),(function(n){n.name="MetricsBladeV2"})(u=n.MetricsBladeV2||(n.MetricsBladeV2={}))})(t=n.Blades||(n.Blades={}))})(i=n.Microsoft_Azure_Monitoring||
(n.Microsoft_Azure_Monitoring={})),(function(n){n.name="Microsoft_Azure_Resources";var t;(function(n){var t,i,r;(function(n){n.name="QuotasBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.Inputs={}))})(t=n.QuotasBlade||(n.QuotasBlade={})),(function(n){n.name="ArmPolicyBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.Inputs={}))})(i=n.ArmPolicyBlade||(n.ArmPolicyBlade={})),(function(n){n.name="ArmPolicyAddBlade"})(r=n.ArmPolicyAddBlade||(n.ArmPolicyAddBlade={}))})(t=n.Blades||(n.Blades={}))})(r=n.Microsoft_Azure_Resources||(n.Microsoft_Azure_Resources={})),(function(n){n.name="Microsoft_Azure_Marketplace";var t;(function(n){var t,i;(function(n){var t,i;n.name="GalleryFeaturedMenuItemBlade",(function(n){n.selectedMenuItemId="selectedMenuItemId"})(t=n.Inputs||(n.Inputs={})),(function(n){n.resetMenuId="resetMenuId";n.createTriggeredSignal="createTriggeredSignal"})(i=n.Outputs||(n.Outputs={}))})(t=n.GalleryFeaturedMenuItemBlade||(n.GalleryFeaturedMenuItemBlade=
{})),(function(n){var t,i;n.name="GalleryResultsListBlade",(function(n){n.selectedSubMenuItemId="selectedSubMenuItemId"})(t=n.Inputs||(n.Inputs={})),(function(n){n.inlineGalleryCreateOutputs="inlineGalleryCreateOutputs"})(i=n.Outputs||(n.Outputs={}))})(i=n.GalleryResultsListBlade||(n.GalleryResultsListBlade={}))})(t=n.Blades||(n.Blades={}))})(u=n.Microsoft_Azure_Marketplace||(n.Microsoft_Azure_Marketplace={})),(function(n){n.name="Microsoft_Azure_Billing";var t;(function(n){var t,i,r,u;(function(n){n.name="SubscriptionsBlade"})(t=n.SubscriptionsBlade||(n.SubscriptionsBlade={})),(function(n){n.name="AccountBlade"})(i=n.AccountBlade||(n.AccountBlade={})),(function(n){n.name="BillingNoSubscriptionsBlade"})(r=n.BillingNoSubscriptionsBlade||(n.BillingNoSubscriptionsBlade={})),(function(n){n.name="UpgradeSubscriptionBlade";var t;(function(n){n.subscriptionId="subscriptionId"})(t=n.Inputs||(n.Inputs={}))})(u=n.UpgradeSubscriptionBlade||(n.UpgradeSubscriptionBlade={}))})(t=n.Blades||(n.Blades={}))})(f=n.Microsoft_Azure_Billing||
(n.Microsoft_Azure_Billing={})),(function(n){n.name="Microsoft_Azure_AD";var t;(function(n){var t,i,r,u;(function(n){var t,i;n.name="SelectMember",(function(n){n.collectorBindingInternals_inputs="collectorBindingInternals-inputs";n.collectorBindingInternals_errors="collectorBindingInternals-errors";n.stepInput="stepInput"})(t=n.Inputs||(n.Inputs={})),(function(n){n.collectorBindingInternals_outputs="collectorBindingInternals-outputs";n.collectorBindingInternals_commit="collectorBindingInternals-commit";n.stepOutput="stepOutput"})(i=n.Outputs||(n.Outputs={}))})(t=n.SelectMember||(n.SelectMember={})),(function(n){n.name="SelectMemberV3";var t;(function(n){n.title="title";n.subtitle="subtitle"})(t=n.Inputs||(n.Inputs={}))})(i=n.SelectMemberV3||(n.SelectMemberV3={})),(function(n){n.name="RolesListBlade";var t;(function(n){n.scope="scope"})(t=n.Inputs||(n.Inputs={}))})(r=n.RolesListBlade||(n.RolesListBlade={})),(function(n){n.name="UserAssignmentsBlade";var t;(function(n){n.scope="scope"})(t=n.Inputs||
(n.Inputs={}))})(u=n.UserAssignmentsBlade||(n.UserAssignmentsBlade={}))})(t=n.Blades||(n.Blades={}))})(e=n.Microsoft_Azure_AD||(n.Microsoft_Azure_AD={}))})(v=n.External||(n.External={})),(function(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at;(function(n){n.name="ArmExplorer"})(t=n.ArmExplorer||(n.ArmExplorer={})),(function(n){n.name="BrowseAll"})(i=n.BrowseAll||(n.BrowseAll={})),(function(n){n.name="BrowseAllWithType"})(r=n.BrowseAllWithType||(n.BrowseAllWithType={})),(function(n){n.name="BrowseService"})(u=n.BrowseService||(n.BrowseService={})),(function(n){n.name="BrowseDynamicAsset"})(f=n.BrowseDynamicAsset||(n.BrowseDynamicAsset={})),(function(n){n.name="BrowseDynamicResource"})(e=n.BrowseDynamicResource||(n.BrowseDynamicResource={})),(function(n){n.name="NonAssetResource"})(o=n.NonAssetResource||(n.NonAssetResource={})),(function(n){n.name="BrowseInstanceLink"})(s=n.BrowseInstanceLink||(n.BrowseInstanceLink={})),(function(n){n.name="BrowseResource"})(h=n.BrowseResource||
(n.BrowseResource={})),(function(n){n.name="BrowseAllResources"})(c=n.BrowseAllResources||(n.BrowseAllResources={})),(function(n){n.name="BrowseRecentResources"})(l=n.BrowseRecentResources||(n.BrowseRecentResources={})),(function(n){n.name="BrowseResourceGroup"})(a=n.BrowseResourceGroup||(n.BrowseResourceGroup={})),(function(n){n.name="ActiveDirectoryMfaPlaceholder"})(v=n.ActiveDirectoryMfaPlaceholder||(n.ActiveDirectoryMfaPlaceholder={})),(function(n){n.name="ActiveDirectoryRmsPlaceholder"})(y=n.ActiveDirectoryRmsPlaceholder||(n.ActiveDirectoryRmsPlaceholder={})),(function(n){n.name="ApiManagementPlaceholder"})(p=n.ApiManagementPlaceholder||(n.ApiManagementPlaceholder={})),(function(n){n.name="BackupPlaceholder"})(w=n.BackupPlaceholder||(n.BackupPlaceholder={})),(function(n){n.name="BizTalkServicePlaceholder"})(b=n.BizTalkServicePlaceholder||(n.BizTalkServicePlaceholder={})),(function(n){n.name="CdnPlaceholder"})(k=n.CdnPlaceholder||(n.CdnPlaceholder={})),(function(n){n.name="MarketplaceAddOnPlaceholder"})
(d=n.MarketplaceAddOnPlaceholder||(n.MarketplaceAddOnPlaceholder={})),(function(n){n.name="MediaServicePlaceholder"})(g=n.MediaServicePlaceholder||(n.MediaServicePlaceholder={})),(function(n){n.name="RemoteAppPlaceholder"})(nt=n.RemoteAppPlaceholder||(n.RemoteAppPlaceholder={})),(function(n){n.name="ServiceBusPlaceholder"})(tt=n.ServiceBusPlaceholder||(n.ServiceBusPlaceholder={})),(function(n){n.name="SiteRecoveryPlaceholder"})(it=n.SiteRecoveryPlaceholder||(n.SiteRecoveryPlaceholder={})),(function(n){n.name="StorSimplePlaceholder"})(rt=n.StorSimplePlaceholder||(n.StorSimplePlaceholder={})),(function(n){n.name="StreamAnalyticsPlaceholder"})(ut=n.StreamAnalyticsPlaceholder||(n.StreamAnalyticsPlaceholder={})),(function(n){n.name="AccountPortalSearchResult"})(ft=n.AccountPortalSearchResult||(n.AccountPortalSearchResult={})),(function(n){n.name="WhatsNew"})(et=n.WhatsNew||(n.WhatsNew={})),(function(n){n.name="Deployments"})(ot=n.Deployments||(n.Deployments={})),(function(n){n.name="ResourceGroups";var t;(function(
n){n.read="Microsoft.Resources/subscriptions/resourceGroups/read";n.deleteObject="Microsoft.Resources/subscriptions/resourceGroups/delete";n.write="Microsoft.Resources/subscriptions/resourceGroups/write";n.writeDeployments="Microsoft.Resources/subscriptions/resourceGroups/deployments/write";n.readDeployments="Microsoft.Resources/subscriptions/resourceGroups/deployments/read";n.readEvents="Microsoft.Insights/events/read"})(t=n.Permissions||(n.Permissions={}))})(st=n.ResourceGroups||(n.ResourceGroups={})),(function(n){n.name="ResourceGroupEvents"})(ht=n.ResourceGroupEvents||(n.ResourceGroupEvents={})),(function(n){n.name="Settings"})(ct=n.Settings||(n.Settings={})),(function(n){n.name="Tag"})(lt=n.Tag||(n.Tag={})),(function(n){n.name="Dashboard"})(at=n.Dashboard||(n.Dashboard={}))})(c=n.AssetTypes||(n.AssetTypes={})),(function(n){n.armExplorer=c.ArmExplorer.name;n.browseAll=c.BrowseAll.name;n.browseAllWithType=c.BrowseAllWithType.name;n.browseService=c.BrowseService.name;n.browseDynamicAsset=c.BrowseDynamicAsset.
name;n.browseDynamicResource=c.BrowseDynamicResource.name;n.nonAssetResource=c.NonAssetResource.name;n.browseInstanceLink=c.BrowseInstanceLink.name;n.browseResource=c.BrowseResource.name;n.browseAllResources=c.BrowseAllResources.name;n.browseRecentResources=c.BrowseRecentResources.name;n.browseResourceGroup=c.BrowseResourceGroup.name;n.activeDirectoryMfaPlaceholder=c.ActiveDirectoryMfaPlaceholder.name;n.activeDirectoryRmsPlaceholder=c.ActiveDirectoryRmsPlaceholder.name;n.apiManagementPlaceholder=c.ApiManagementPlaceholder.name;n.backupPlaceholder=c.BackupPlaceholder.name;n.bizTalkServicePlaceholder=c.BizTalkServicePlaceholder.name;n.cdnPlaceholder=c.CdnPlaceholder.name;n.marketplaceAddOnPlaceholder=c.MarketplaceAddOnPlaceholder.name;n.mediaServicePlaceholder=c.MediaServicePlaceholder.name;n.remoteAppPlaceholder=c.RemoteAppPlaceholder.name;n.serviceBusPlaceholder=c.ServiceBusPlaceholder.name;n.siteRecoveryPlaceholder=c.SiteRecoveryPlaceholder.name;n.storSimplePlaceholder=c.StorSimplePlaceholder.
name;n.streamAnalyticsPlaceholder=c.StreamAnalyticsPlaceholder.name;n.accountPortalSearchResult=c.AccountPortalSearchResult.name;n.whatsNew=c.WhatsNew.name;n.deployments=c.Deployments.name;n.resourceGroups=c.ResourceGroups.name;n.resourceGroupEvents=c.ResourceGroupEvents.name;n.settings=c.Settings.name;n.tag=c.Tag.name;n.dashboard=c.Dashboard.name})(y=n.AssetTypeNames||(n.AssetTypeNames={})),(function(n){n.armExplorerBlade="ArmExplorerBlade";n.unauthorizedAssetBlade="UnauthorizedAssetBlade";n.notFoundAssetBlade="NotFoundAssetBlade";n.unavailableAssetBlade="UnavailableAssetBlade";n.noCreateFlowBlade="NoCreateFlowBlade";n.browseAllBlade="BrowseAllBlade";n.browseAllBladeWithType="BrowseAllBladeWithType";n.browseServiceBlade="BrowseServiceBlade";n.browseDynamicAssetBlade="BrowseDynamicAssetBlade";n.browseDynamicResourceBlade="BrowseDynamicResourceBlade";n.resources="Resources";n.browseAllResourcesBlade="BrowseAllResourcesBlade";n.browseResourceBlade="BrowseResourceBlade";n.browseInstanceLinkBlade=
"BrowseInstanceLinkBlade";n.browseResourceGroupBlade="BrowseResourceGroupBlade";n.browseRecentResourcesBlade="BrowseRecentResourcesBlade";n.mapResourceGroupBlade="MapResourceGroupBlade";n.browseGrid2ChooseColumnsBlade="BrowseGrid2ChooseColumnsBlade";n.resourceProperties="ResourceProperties";n.browseLinkBlade="BrowseLinkBlade";n.resourceGroupPickerV3Blade="ResourceGroupPickerV3Blade";n.managementTeamBlade="ManagementTeamBlade";n.deployFromTemplateBlade="DeployFromTemplateBlade";n.parametersEditorBlade="ParametersEditorBlade";n.parametersFileEditorBlade="ParametersFileEditorBlade";n.templateEditorBlade="TemplateEditorBlade";n.templateViewerBlade="TemplateViewerBlade";n.errorDetailsBlade="ErrorDetailsBlade";n.whatsNewBlade="WhatsNewBlade";n.noSubscriptionsBlade="NoSubscriptionsBlade";n.noMsdnOfferOnSubscriptionsBlade="NoMsdnOfferOnSubscriptionsBlade";n.subCertsBlade="SubCertsBlade";n.locationPickerV3Blade="LocationPickerV3Blade";n.locksBlade="LocksBlade";n.lockEditBlade="LockEditBlade";n.
moveResourceBlade="MoveResourceBlade";n.regionPickerBlade="RegionPickerBlade";n.resourceGroupPickerBlade="ResourceGroupPickerBlade";n.createResourceGroupBlade="CreateResourceGroupBlade";n.subscriptionPickerBlade="SubscriptionPickerBlade";n.createEmptyResourceGroupBlade="CreateEmptyResourceGroupBlade";n.deploymentsListBlade="DeploymentsListBlade";n.deploymentDetailsBlade="DeploymentDetailsBlade";n.deploymentOperationPropertiesBlade="DeploymentOperationPropertiesBlade";n.resourceGroupMapBlade="ResourceGroupMapBlade";n.resourceGroupQuickStartBlade="ResourceGroupQuickStartBlade";n.resourceGroupEventsBlade="ResourceGroupEventsBlade";n.resourceGroupCostsBlade="ResourceGroupCostsBlade";n.resourceGroupDeleteBlade="ResourceGroupDeleteBlade";n.resourceGroupDeleteBladeForCommand="ResourceGroupDeleteBladeForCommand";n.resourceGroupSettingListBlade="ResourceGroupSettingListBlade";n.resourceMenuBlade="ResourceMenuBlade";n.servicesHealthBlade="ServicesHealthBlade";n.settingsBlade="SettingsBlade";n.languageSelectionBlade=
"LanguageSelectionBlade";n.localeSelectionBlade="LocaleSelectionBlade";n.myAccessBlade="MyAccessBlade";n.rPStatusBlade="RPStatusBlade";n.azureProvisioningResultsBlade="AzureProvisioningResultsBlade";n.subscriptionPickerV3Blade="SubscriptionPickerV3Blade";n.resourcesWithTagBlade="ResourcesWithTagBlade";n.resourceTagsListBlade="ResourceTagsListBlade";n.subscriptionTagsListBlade="SubscriptionTagsListBlade";n.armDataContextPane="ArmDataContextPane";n.armDataJsonBlade="ArmDataJsonBlade";n.armDataResultJsonBlade="ArmDataResultJsonBlade";n.armActionsContextPane="ArmActionsContextPane";n.armActionsResultJsonBlade="ArmActionsResultJsonBlade";n.deployToAzure="DeployToAzure";n.gettingStartedBlade="GettingStartedBlade";n.dashboardBlade="DashboardBlade";n.bulkDeleteBlade="BulkDeleteBlade";n.assignTagsBlade="AssignTagsBlade";n.editTagsBlade="EditTagsBlade";n.markdownContextPane="MarkdownContextPane";n.armErrorsBlade="ArmErrorsBlade";n.clockContextPane="ClockContextPane";n.videoContextPane="VideoContextPane"})
(p=n.BladeNames||(n.BladeNames={})),(function(n){n.serviceCommandGroup="serviceCommandGroup";n.recentResourceBrowseGrid2Commands="RecentResourceBrowseGrid2Commands";n.managementTeamCommandGroup="ManagementTeamCommandGroup";n.lockCommands="LockCommands";n.moveResourceCommands="MoveResourceCommands";n.resourceGroupBrowseCommands="ResourceGroupBrowseCommands";n.serviceHealth="ServiceHealth";n.addTagCommandGroup="AddTagCommandGroup";n.tagItemCommandGroup="TagItemCommandGroup"})(w=n.CommandGroupNames||(n.CommandGroupNames={}))})(c||(c={})),c}));define("HubsExtension/HubsCommon",["require","exports","f","./_generated/ExtensionDefinition"],(function(n,t,i,r){"use strict";var u;return (function(n){function a(){var n="HubsExtension.BrowseResources";return s||(i.Data.Metadata.setTypeMetadata(n,{idProperties:["id"]}),s=!0),n}function v(t){var i="";return t?(i=(t.status||t.state||"").toLowerCase(),!!~[n.subscriptionEnabledStatus,n.subscriptionActiveStatus,n.subscriptionWarnedStatus,n.subscriptionPastDueStatus].
indexOf(i)):!1}function y(){return u||(u={},(l.fx.environment.armSubscriptionQuotaIds||[]).forEach((function(n){u[n.toLowerCase()]=!0}))),u}var h=i.Base,c=h.Constants.ExtensionNames,t=r.BladeNames,l=window,f="ResourceGroup",e="Blade",o=i.isFeatureEnabled,u,s;n.extensionName=c.Hubs;n.marketplaceExtensionName=c.Marketplace;n.resourceGroupPartName=f+"MapPinnedPart";n.resourceGroupMapBlade=f+"Map"+e;n.resourceGroupEventsBlade=f+"Events"+e;n.deploymentDetailsBlade="DeploymentDetails"+e;n.subscriptionEnabledStatus="enabled";n.subscriptionActiveStatus="active";n.subscriptionWarnedStatus="warned";n.subscriptionDisabledStatus="disabled";n.subscriptionPastDueStatus="pastdue";n.whatsNewFeedUriFormat=h.Resources.getAppRelativeUri("api/WhatsNew?count={0}");n.tagsV2Enabled=o("tagsv2");n.resourceMenuEnabled=o("resourcemenu");n.bulkCommandsEnabled=o("bulkcommands");n.resourceGroupBladeName=n.resourceMenuEnabled?t.resourceMenuBlade:t.resourceGroupMapBlade;n.defaultResourceBladeName=n.resourceMenuEnabled?
t.resourceMenuBlade:t.resourceProperties;s=!1;n.getBrowseEntityType=a;n.hasValidStatus=v;n.getArmSubscriptionQuotaIds=y;n.subsLimitPerResourcesAcrossSubsCall=40})(u||(u={})),u}));define("HubsExtension/Common/HubsObservables",["require","exports","f","i","a","ko","HubsExtension/Common/CommonClientStrings","../ArmHelpers/ArmApiEndpoints","../ArmHelpers/ArmApisStartup","../HubsCommon","./AssetTypeCache"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function y(t,r){return i.require(n.normalize(t)).then((function(n){return r(n)}))}function tt(n,t){var i=(n.status||"").toLowerCase(),r=(t.status||"").toLowerCase();if(i!==r){if(i===d)return 1;if(r===d)return-1}return n.subscriptionName.localeCompareIgnoreCase(t.subscriptionName)||n.subscriptionID.localeCompareIgnoreCase(t.subscriptionID)}function bt(n){return u.get(n).Subscriptions.dataPromise.then((function(){return yt.getSelectedSubscriptions(w.client,n)})).then((function(t){var o;u.get(n).SelectedSubscriptions.data(t);var r=
u.get(n),f=r&&r.Subscriptions,e=f&&f.data();e&&e.subscriptions&&(o=(r.SelectedSubscriptions.data()||[]).map(p),f.data({subscriptions:i.union(o.stableSort(tt),e.subscriptions.stableSort(tt),(function(n,t){return n.subscriptionID.localeCompareIgnoreCase(t.subscriptionID)===0}))}));l.trace({source:"HubsObservables",action:"InitialSelectedSubscriptions",data:{cloudName:n,count:t?t.length:-1}})}))}function st(n){return!!n.first((function(n){return(n.authorizationSource||"").toLowerCase().indexOf("legacy")>=0}))}function kt(n,t){var i=it(n,t);return!!i&&st([p(i)])}function dt(){return t.getTenantsMemo().then((function(n){return n.tenants.length}))}function gt(){t.getTenantsMemo().then((function(n){var t=n.tenants=n.tenants||[];return n}),(function(n){wt.error("Failed for tenant info: "+JSON.stringify(n));i.Hubs.Notifications.ClientNotification.publish({title:e.tenantErrorTitle,description:e.tenantErrorDescription,status:i.Hubs.Notifications.NotificationStatus.Error});var t=new HubsExtension.Azure.TenantInfo;
return t.tenants=[],t.failure=!0,t})).then((function(n){b.updateTenantInfoEndPoint.invoke(w.client,k,{tenantInfo:n});ot=n.tenants.length}));o.armEndpoints.forEach((function(n){var t=n.cloudName;u.set(t,{Subscriptions:{dataPromise:null,data:f.observable({subscriptions:[]}),map:{}},SelectedSubscriptions:{dataPromise:null,data:f.observable([])}});at(t);u.get(t).SelectedSubscriptions.dataPromise=bt(t)}))}function ni(n){return u.get(n).Subscriptions.data}function ti(n){return u.get(n).Subscriptions.dataPromise}function ii(n){return u.get(n).Subscriptions.map}function it(n,t){if(n){n=n.toUpperCase();var r=u.get(t).Subscriptions,i=r.map;if(i)return i[n]}}function ri(n,t){return n?u.get(t).Subscriptions.dataPromise.then((function(){var r=it(n,t);if(r)return r;throw new Error("Subscription with id "+i.ViewModels.Services.ResourceTypes.sanitizeId(n)+" not found");})):Q.reject("Invalid subscription id null")}function ui(n){return ct(n).then((function(t){return ht(n).then((function(n){var r=n()||[],i=r.length;
return i&&i!==t.length?i===1?r[0].uniqueDisplayName:e.multipleSubscriptionsSelectedText.format(i):e.allSubscriptionsSelectedText}))}))}function ht(n){var t=u.get(n).SelectedSubscriptions;return t.dataPromise.then((function(){return t.data}))}function fi(n,t){u.get(n).SelectedSubscriptions.data(t)}function ct(n){var t=u.get(n).Subscriptions;return t.dataPromise.then((function(){return t.data().subscriptions.map(rt)}))}function lt(n){return nt.get(n)()}function ei(n,t){return lt(n).then((function(n){var r={};return t?n.forEach((function(n){var t=et[n.name.toLowerCase()];t&&(r[n.name]=n.displayName)})):i.extendArrayIntoMap(r,n,(function(n){return n.name}),(function(n){return n.displayName})),r}))}function oi(){c.primeRegisteredAssetTypesCache()}function p(n){var t=n.subscriptionPolicies;return{subscriptionName:n.displayName,subscriptionID:n.subscriptionId,tenantID:n.tenantId,status:n.state,subscriptionPolicies:t,requireRdfe:si(t),authorizationSource:n.authorizationSource}}function si(n){return i.getFeatureValue(
"rdfe")==="false"?!1:!n||!h.getArmSubscriptionQuotaIds()[(n.quotaId||"").toLowerCase()]}function at(n){var r=Q.defer();u.get(n).Subscriptions.dataPromise=r.promise;var c=v("GetSubscriptions"),t=[],e=Q.defer();nt.set(n,(function(){return e.promise}));var d=v("GetLocations"),f=[],o=w.client,g=s.callBatchWithContinuation([s.listSubscriptions(),s.listLocationsApi()],(function(n,i){var r,u;i===0?(r=n,t=t.concat(r)):i===1&&(u=n,f=f.concat(u))}),(function(n){throw n;}),!1,n,ft("fetchSubscriptionsLocationsAndTenants"),!0);g.then((function(){var g,nt,it,ut;l.completeTrace(c);var ft={},et={},st={},v=function(n,t){t=(t||"").toLowerCase();n[t]=(n[t]||0)+1};t.forEach((function(n){v(ft,n.state);v(et,(n.subscriptionPolicies||{}).quotaId);v(st,n.authorizationSource)}));var ht=t.length,s={subscriptions:[]},w={};ht?(y("./SubsCreditCheck",(function(n){n.checkRemainingCredit(t)})),i.isFeatureEnabled("ci")||(nt=t.filter((function(n){return n.state.toLowerCase()===h.subscriptionPastDueStatus.toLowerCase()})),nt.length&&
y("./PastDueSubsCheck",(function(t){t.raiseWarningForPastDueSubs(nt,n)}))),it=function(t){s.subscriptions=t.map(p).stableSort(tt);s.subscriptions.map(rt).forEach((function(n){w[n.subscriptionId.toUpperCase()]=n}));var i=u.get(n).Subscriptions;i.data(s);i.map=w;r.resolve(null);b.updateSubscriptionInfoEndPoint.invoke(o,k,s)},ut=i.getFeatureValue("subscriptions"),ut?y("./FilterSubs",(function(n){var i=n.filterSubs(t,ut);it(i)})):it(t)):(a.Security.getUserInfo().then((function(t){y("./NoSubsChecks",(function(i){i.handleNoSubsInDirectory(t,ot,n)}))})),g=u.get(n).Subscriptions,g.data(s),g.map=w,r.resolve(null),b.updateSubscriptionInfoEndPoint.invoke(o,k,s));l.completeTrace(d);e.resolve(f)}))}function rt(n,t,i){var f=n.subscriptionID,r=n.subscriptionName,u=n.status&&n.status.toLowerCase()===d?e.disabledSubscriptionLabelFormat.format(r):r;return i.filter((function(n){return n.subscriptionName===r})).length>1&&(u=e.subscriptionNameAndIdLabelFormat.format(u,f)),{subscriptionId:f,uniqueDisplayName:u,displayName:
r,tenantId:n.tenantID,state:n.status,subscriptionPolicies:n.subscriptionPolicies,authorizationSource:n.authorizationSource}}var a=i.Base,vt=a.Constants,ut=a.Diagnostics,l=ut.Telemetry,yt=r.Azure,pt=a.Resources,w=r.Rpc,b=HubsExtension.Internal.Azure,wt=ut.createLog(n),k=vt.Shell,d=h.subscriptionDisabledStatus.toLowerCase(),ft=function(n){return s.makeResourceManagerTelemetry("HubsObservables."+n)},v=function(n){return l.start({source:"HubsObservables",action:n})},et={},u,g,ot,nt;i.extendArrayIntoMap(et,window.fx.environment.servicesHealthAllowedRegions||[],(function(n){return n.toLowerCase()}));u=r.getCloudMap();g=function(n){var t=v(n);return Q(a.Net2.ajax({uri:pt.getAppRelativeUri("/api/tenants/List"),type:"POST",dataType:"json",contentType:"application/json",performRetry:!0,isBackgroundTask:!0})).then((function(n){return l.completeTrace(t),n})).catch((function(n){l.cancelTrace(t);throw n;}))};t.getTenantsMemo=i.memoizeQ((function(){if(i.isFeatureEnabled("armtenants")){var n=v("GetTenantsFromArm");
return Q(s.callUsingBatch({armApiOrUri:s.listTenantsApi(),telemetry:ft("getTenants")})).then((function(t){l.completeTrace(n);var i={failure:!1,tenants:[]};return((t.value||[]).forEach((function(n){(n.domains||[]).length===1&&n.displayName&&i.tenants.push({displayName:n.displayName||"",domainName:(n.domains||[]).length===1?n.domains[0]:"",id:n.tenantId})})),i.tenants.length!==t.value.length)?g("GetTenantsFromArmFallback"):i})).catch((function(t){l.cancelTrace(n);throw t;}))}return g("GetTenants")}));nt=r.getCloudMap();t.isCoadminOnAnySub=st;t.isCoAdminOnSub=kt;t.getTenantsCount=dt;t.initializeObservables=gt;t.getSubscriptionsObservable=ni;t.getSubscriptionsPromise=ti;t.getSubscriptionsMap=ii;t.getSubscriptionInfo=it;t.getSubscriptionInfoPromise=ri;t.getSelectedSubscriptionsLabel=ui;t.getSelectedSubscriptions=ht;t.pingSelectedSubscriptionsList=fi;t.getSubscriptions=ct;t.getLocations=lt;t.getLocationDisplayNames=ei;t.createRegisteredAssetTypeCache=oi;t.toHubsExtensionSubscription=p;t.initialize=
at;t.toMsPortalFxSubscription=rt})(l||(l={})),l}));define("HubsExtension/ArmHelpers/Models/ArmResource",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(t){function o(n){var t=n.id,i,e,o,s,h;return t?(i=n.name,i||(e=t.toLowerCase(),f[e]||(u.warning("ARM returned a resource with no name: "+e),f[e]=!0),o=r.parseResourceDescriptor(t),i=o.resources.join("/")),s=!r.isTenantResource(t)&&r.buildResourceGroupIdFromResourceId(t),h={id:t,location:n.location,name:i,tags:n.tags||{},properties:n.properties||{},resourceGroup:s,type:n.type,kind:n.kind,selfLinkUri:n.selfLinkUri,plan:n.plan,managedBy:n.managedBy,sku:n.sku,identity:n.identity},h):(u.warning("ARM returned a resource with no id: "+JSON.stringify(n)),null)}var e=i.Base.Diagnostics,r=i.ViewModels.Services.ResourceTypes,u=e.createLog(n),f={};t.toResource=o})(r||(r={})),r}));define("HubsExtension/ArmHelpers/Models/ArmResourceGroup",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(t){function f(
n){if(!n.id)return u.warning("ARM returned a resource group with no id: "+JSON.stringify(n)),null;var t=n.properties||{};return{id:n.id,location:n.location,name:n.name,tags:n.tags||{},properties:t,lockState:t.lockState,provisioningState:t.provisioningState,managedBy:n.managedBy}}var r=i.Base.Diagnostics,u=r.createLog(n);t.toResourceGroup=f})(r||(r={})),r}));define("HubsExtension/_generated/BladeReferences",["require","exports","o","Fx/Composition/Selectable"],(function(n,t,i,r){"use strict";var u;return (function(n){function i(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="HubsExtension",kr=(function(n){function r(r){n.call(this,"ArmExplorerBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference),u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,pr,wr,br;n.ArmExplorerBladeReference=kr;u=(function(n){function r(r)
{n.call(this,"UnauthorizedAssetBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.UnauthorizedAssetBladeReference=u;f=(function(n){function r(r){n.call(this,"NotFoundAssetBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.NotFoundAssetBladeReference=f;e=(function(n){function r(r){n.call(this,"UnavailableAssetBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.UnavailableAssetBladeReference=e;o=(function(n){function r(r,u){n.call(this,"NoCreateFlowBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.NoCreateFlowBladeReference=o;s=(function(n){function r(r){n.call(this,"BrowseAllBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseAllBladeReference=s;h=(function(n){function r(r,u){n.call(this,"BrowseAllBladeWithType",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseAllBladeWithTypeReference=h;c=(function(n){function r(r,u){n.call(this,"BrowseServiceBlade",t,i(
u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseServiceBladeReference=c;l=(function(n){function r(r){n.call(this,"BrowseDynamicAssetBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseDynamicAssetBladeReference=l;a=(function(n){function r(r){n.call(this,"BrowseDynamicResourceBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseDynamicResourceBladeReference=a;v=(function(n){function r(r,u){n.call(this,"Resources",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourcesReference=v;y=(function(n){function r(r,u){n.call(this,"BrowseAllResourcesBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseAllResourcesBladeReference=y;p=(function(n){function r(r,u){n.call(this,"BrowseResourceBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseResourceBladeReference=p;w=(function(n){function r(r,u){n.call(this,"BrowseInstanceLinkBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);
n.BrowseInstanceLinkBladeReference=w;b=(function(n){function r(r,u){n.call(this,"BrowseResourceGroupBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseResourceGroupBladeReference=b;k=(function(n){function r(r,u){n.call(this,"BrowseRecentResourcesBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseRecentResourcesBladeReference=k;d=(function(n){function r(r,u){n.call(this,"MapResourceGroupBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.MapResourceGroupBladeReference=d;g=(function(n){function i(i){n.call(this,"BrowseGrid2ChooseColumnsBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.BrowseGrid2ChooseColumnsBladeReference=g;nt=(function(n){function r(r,u){n.call(this,"ResourceProperties",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourcePropertiesReference=nt;tt=(function(n){function r(r,u){n.call(this,"BrowseLinkBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BrowseLinkBladeReference=
tt;it=(function(n){function i(i){n.call(this,"ResourceGroupPickerV3Blade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.ResourceGroupPickerV3BladeReference=it;rt=(function(n){function r(r,u){n.call(this,"ManagementTeamBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ManagementTeamBladeReference=rt;ut=(function(n){function i(i){n.call(this,"DeployFromTemplateBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.DeployFromTemplateBladeReference=ut;ft=(function(n){function i(i){n.call(this,"ParametersEditorBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.ParametersEditorBladeReference=ft;et=(function(n){function i(i){n.call(this,"ParametersFileEditorBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.ParametersFileEditorBladeReference=et;ot=(function(n){function i(i){n.call(this,"TemplateEditorBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.TemplateEditorBladeReference=
ot;st=(function(n){function r(r,u,f){n.call(this,"TemplateViewerBlade",t,i(f,r,u),{outputParameters:["stepOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.TemplateViewerBladeReference=st;ht=(function(n){function r(r,u){n.call(this,"ErrorDetailsBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ErrorDetailsBladeReference=ht;ct=(function(n){function r(r){n.call(this,"WhatsNewBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.WhatsNewBladeReference=ct;lt=(function(n){function r(r){n.call(this,"NoSubscriptionsBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.NoSubscriptionsBladeReference=lt;at=(function(n){function r(r){n.call(this,"NoMsdnOfferOnSubscriptionsBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.NoMsdnOfferOnSubscriptionsBladeReference=at;vt=(function(n){function r(r){n.call(this,"SubCertsBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.SubCertsBladeReference=
vt;yt=(function(n){function i(i){n.call(this,"LocationPickerV3Blade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.LocationPickerV3BladeReference=yt;pt=(function(n){function r(r){n.call(this,"MarkdownContextPane",t,i(r,undefined),{isContextBlade:!0})}return __extends(r,n),r})(r.PdlBladeReference);n.MarkdownContextPaneReference=pt;wt=(function(n){function r(r,u){n.call(this,"LocksBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.LocksBladeReference=wt;bt=(function(n){function i(i){n.call(this,"LockEditBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.LockEditBladeReference=bt;kt=(function(n){function r(r,u,f){n.call(this,"MoveResourceBlade",t,i(f,r,u),{outputParameters:["actionBarOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.MoveResourceBladeReference=kt;dt=(function(n){function r(r,u,f){n.call(this,"RegionPickerBlade",t,i(f,r,u),{outputParameters:["stepOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.RegionPickerBladeReference=
dt;gt=(function(n){function r(r,u,f){n.call(this,"ResourceGroupPickerBlade",t,i(f,r,u),{outputParameters:["stepOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupPickerBladeReference=gt;ni=(function(n){function r(r,u,f){n.call(this,"CreateResourceGroupBlade",t,i(f,r,u),{outputParameters:["stepOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.CreateResourceGroupBladeReference=ni;ti=(function(n){function r(r,u,f){n.call(this,"SubscriptionPickerBlade",t,i(f,r,u),{outputParameters:["stepOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.SubscriptionPickerBladeReference=ti;ii=(function(n){function i(i){n.call(this,"CreateEmptyResourceGroupBlade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.CreateEmptyResourceGroupBladeReference=ii;ri=(function(n){function r(r,u){n.call(this,"DeploymentsListBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.DeploymentsListBladeReference=ri;ui=(function(n){function r(r,u){n.call(this,"DeploymentDetailsBlade",
t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.DeploymentDetailsBladeReference=ui;fi=(function(n){function r(r,u){n.call(this,"DeploymentOperationPropertiesBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.DeploymentOperationPropertiesBladeReference=fi;ei=(function(n){function r(r,u){n.call(this,"ResourceGroupMapBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupMapBladeReference=ei;oi=(function(n){function r(r,u){n.call(this,"ResourceGroupQuickStartBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupQuickStartBladeReference=oi;si=(function(n){function r(r,u){n.call(this,"ResourceGroupEventsBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupEventsBladeReference=si;hi=(function(n){function r(r,u){n.call(this,"ResourceGroupCostsBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupCostsBladeReference=hi;ci=(function(n){function i(i){n.call(this,"ResourceGroupDeleteBlade",
t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.ResourceGroupDeleteBladeReference=ci;li=(function(n){function r(r,u,f){n.call(this,"ResourceGroupDeleteBladeForCommand",t,i(f,r,u),{outputParameters:["actionBarOutput"]})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupDeleteBladeForCommandReference=li;ai=(function(n){function r(r,u){n.call(this,"ResourceGroupSettingListBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceGroupSettingListBladeReference=ai;vi=(function(n){function r(r,u){n.call(this,"ResourceMenuBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceMenuBladeReference=vi;yi=(function(n){function r(r){n.call(this,"ServicesHealthBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ServicesHealthBladeReference=yi;pi=(function(n){function r(r){n.call(this,"SettingsBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.SettingsBladeReference=pi;wi=(function(n){function r(
r,u,f){n.call(this,"LanguageSelectionBlade",t,i(f,r,u),{outputParameters:["actionBarOutputLanguage","value"]})}return __extends(r,n),r})(r.PdlBladeReference);n.LanguageSelectionBladeReference=wi;bi=(function(n){function r(r,u,f){n.call(this,"LocaleSelectionBlade",t,i(f,r,u),{outputParameters:["actionBarOutputLocale","value"]})}return __extends(r,n),r})(r.PdlBladeReference);n.LocaleSelectionBladeReference=bi;ki=(function(n){function r(r,u){n.call(this,"MyAccessBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.MyAccessBladeReference=ki;di=(function(n){function r(r,u){n.call(this,"RPStatusBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.RPStatusBladeReference=di;gi=(function(n){function r(r,u){n.call(this,"AzureProvisioningResultsBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.AzureProvisioningResultsBladeReference=gi;nr=(function(n){function r(r,u){n.call(this,"ArmErrorsBlade",t,i(u,r),{isContextBlade:!0})}return __extends(r,n),r})(r.PdlBladeReference);
n.ArmErrorsBladeReference=nr;tr=(function(n){function i(i){n.call(this,"SubscriptionPickerV3Blade",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.SubscriptionPickerV3BladeReference=tr;ir=(function(n){function r(r,u){n.call(this,"ResourcesWithTagBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourcesWithTagBladeReference=ir;rr=(function(n){function r(r,u){n.call(this,"ResourceTagsListBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ResourceTagsListBladeReference=rr;ur=(function(n){function r(r,u){n.call(this,"SubscriptionTagsListBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.SubscriptionTagsListBladeReference=ur;fr=(function(n){function r(r){n.call(this,"ClockContextPane",t,i(r,undefined),{isContextBlade:!0})}return __extends(r,n),r})(r.PdlBladeReference);n.ClockContextPaneReference=fr;er=(function(n){function r(r){n.call(this,"VideoContextPane",t,i(r,undefined),{isContextBlade:!0})}return __extends(r,n),r})(r.PdlBladeReference);
n.VideoContextPaneReference=er;or=(function(n){function r(r,u){n.call(this,"ArmDataContextPane",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ArmDataContextPaneReference=or;sr=(function(n){function r(r,u){n.call(this,"ArmDataJsonBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ArmDataJsonBladeReference=sr;hr=(function(n){function r(r,u){n.call(this,"ArmDataResultJsonBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ArmDataResultJsonBladeReference=hr;cr=(function(n){function r(r,u){n.call(this,"ArmActionsContextPane",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ArmActionsContextPaneReference=cr;lr=(function(n){function r(r,u){n.call(this,"ArmActionsResultJsonBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.ArmActionsResultJsonBladeReference=lr;ar=(function(n){function i(i){n.call(this,"DeployToAzure",t,i)}return __extends(i,n),i})(r.ParameterProviderBladeReference);n.DeployToAzureReference=ar;vr=(function(n){
function r(r,u){n.call(this,"GettingStartedBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.GettingStartedBladeReference=vr;yr=(function(n){function r(r){n.call(this,"DashboardBlade",t,i(r,undefined),{})}return __extends(r,n),r})(r.PdlBladeReference);n.DashboardBladeReference=yr;pr=(function(n){function r(r,u){n.call(this,"BulkDeleteBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.BulkDeleteBladeReference=pr;wr=(function(n){function r(r,u){n.call(this,"AssignTagsBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.AssignTagsBladeReference=wr;br=(function(n){function r(r,u){n.call(this,"EditTagsBlade",t,i(u,r),{})}return __extends(r,n),r})(r.PdlBladeReference);n.EditTagsBladeReference=br})(u||(u={})),u}));define("HubsExtension/_generated/Microsoft_Azure_Marketplace/BladeReferences",["require","exports","o","Fx/Composition/Selectable"],(function(n,t,i,r){"use strict";var u;return (function(n){function i(n,t,i){return{onClosed:n,parameters:t,callbacks:
i}}var t="Microsoft_Azure_Marketplace",f=(function(n){function r(r,u,f){n.call(this,"GalleryFeaturedMenuItemBlade",t,i(f,r,u),{outputParameters:["resetMenuId","createTriggeredSignal"]})}return __extends(r,n),r})(r.PdlBladeReference),u;n.GalleryFeaturedMenuItemBladeReference=f;u=(function(n){function r(r,u,f){n.call(this,"GalleryResultsListBlade",t,i(f,r,u),{outputParameters:["inlineGalleryCreateOutputs"]})}return __extends(r,n),r})(r.PdlBladeReference);n.GalleryResultsListBladeReference=u})(u||(u={})),u}));define("HubsExtension/Common/CloudNameHelpers",["require","exports","f","i","../_generated/ExtensionDefinition","./AssetTypeCache"],(function(n,t,i,r,u,f){"use strict";var e;return (function(t){function h(n,t){if(!s.readFromInputs(t))return s.addToModel(n,t)}function c(n,t){t.detailBladeInputs=t.detailBladeInputs||{};h(n,t.detailBladeInputs)}function a(n,t){var r=t,h=t.detailBlade,l=t.assetType,u=t.resourceId,s;return h||l?(t.extension&&t.extension.toLowerCase()!==e?r.cloudName=n:c(n,r),Q(r)):
u?(s=void 0,s=o.isResourceGroupId(u)?i.Base.Constants.ResourceTypes.ResourceGroups:o.buildResourceTypeFromResourceId(u),f.getResourceTypeAssetTypeInformation(s,n).then((function(t){return t.lowerCaseExtension===e?c(n,r):r.cloudName=n,r}))):Q(t)}function v(n,t){var i=t;return i.extensionName&&i.extensionName.toLowerCase()!==e?i.cloudName=n:(i.parameters=i.parameters||{},h(n,i.parameters)),i}var l=i.Base.Diagnostics,o=i.ViewModels.Services.ResourceTypes,s=r.Extension.CloudName,e=u.definitionName.toLowerCase(),y=l.createLog(n);t.addCloudNameToDynamicSelection=a;t.addCloudNameToBladeReference=v})(e||(e={})),e}));define("HubsExtension/Notifications/EventSubscriptionService",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(n){function o(n,r,u){if(!n.operationNameRegex&&!n.source&&!n.status&&!n.subStatus)throw new Error("At least one criteria must be specified.");var f=i.getUniqueId();return t.push({cookie:f,criteria:n,callback:r,eventLimit:u}),f}function s(n){var i=t.
filter((function(t){return t.cookie!==n}));t=i}function r(n,t){return!n==!t&&n.toLowerCase()===t.toLowerCase()}function h(n,t){var i=t.operationNameRegex,u;if(i&&(u=new RegExp(i,"ig"),!u.test(n.operationName)))return!1;var f=t.source,o=t.status,s=t.subStatus;return f&&!r(n.source,f)||o&&!r(n.status,o)||!e(s)&&!r(n.subStatus,s)?!1:!0}function f(n,i){var r=t.slice();r.forEach((function(t){var r=[];n.forEach((function(n){h(n,t.criteria)&&r.push(n)}));t.callback(r.slice(0,t.eventLimit||r.length),i)}))}function c(n){var t="microsoft.resources",e=t+"/subscriptions/resourcegroups",i="/delete",r=function(n,i,r){f([{operationName:r,status:"succeeded",source:t,correlationId:null,timestamp:new Date,assetId:n,isLocalEvent:!0}],i)};return n.forEach((function(n){u.isResourceGroupId(n.assetId)?r(n.assetId,n.cloudName,e+i):u.isResourceId(n.assetId)&&r(n.assetId,n.cloudName,i)})),Q(!0)}var u=i.ViewModels.Services.ResourceTypes,e=i.isNullOrUndefined,t=[];n.subscribeToArmEvent=o;n.removeArmEventSubscription=s;n.
matchEvents=f;n.createResourceDeletedEvent=c})(r||(r={})),r}));define("HubsExtension/Common/AssetViewModelCommon",["require","exports","f","i","o"],(function(n,t,i,r){"use strict";var u;return (function(n){function o(n,i,r){var e={type:l.ViewModel,name:n.viewModel,initialState:null,createSelectable:!1};return r&&(e.earlyExecTasks=r),u.getViewModelsDefinition.acquireObject(h.client,u.getWindowId({name:n.extensionName,cloudName:i}),e).then((function(i){var r=new t(n,i,function(){delete f[n.resourceType]});return f[n.resourceType]=r,r}))}function a(n,t){return o(n,t)}function v(n,t,i){return o(n,t,i)}var s=i.Base,h=r.Rpc,c=i.Assets,u=r.Extension,l=s.Constants.ViewModelTypes,f={},e=(function(){function n(n,t){this._acquiredObject=n;this._onDispose=t}return n.prototype.getValue=function(){return this._acquiredObject.getValue()},n.prototype.dispose=function(){this._onDispose&&this._onDispose();i.disposeViewModelProperties(this.getValue());this._acquiredObject.dispose()},n})(),t;n.AcquiredObjectWrapperImpl=
e;t=(function(n){function t(t,i,r){n.call(this,i,r);this._assetTypeInformation=t}return __extends(t,n),t.prototype._getContentForContract=function(n){return c.assetTypeInformationSupportsContract(this._assetTypeInformation,n)?this.getValue().content:null},t.prototype.getBrowseConfigContract=function(){return this._getContentForContract(2)},t.prototype.getSupplementalDataContract=function(){return this._getContentForContract(4)},t.prototype.getResourceMenuConfigContract=function(){return this._getContentForContract(8)},t.prototype.getProvidesResourcesContract=function(){return this._getContentForContract(64)},t})(e);n.AssetTypeViewModelWrapperImpl=t;n.getAssetTypeViewModel=a;n.getAssetTypeViewModelAndExec=v})(u||(u={})),u}));define("HubsExtension/ResourceMap/ResourceMapCommon",["require","exports","f","i","ko","HubsExtension/ResourceMap/ResourceMapClientStrings","../ArmHelpers/ArmApisStartup","../ArmHelpers/Models/ArmResource","../ArmHelpers/Models/ArmResourceGroup","../Common/AssetViewModelCommon",
"../Common/HubsObservables"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function l(n){return n.toLowerCase()}function ht(n,t){var i={};return b(n,(function(r){var e=t&&typeof n[r]=="object"&&n[r],f=n[r];i[r]=u.observable(e?ht(f):f)})),i}function k(n,t){return l((t||"")+":"+n)}function rt(t){return i.require(n.normalize("../ArmHelpers/ArmApis")).then((function(n){return t(n)}))}function li(n){var t=i.getUniqueId();return y[t]=n,t}function ai(n){y[n]&&delete y[n]}function vi(n,t){b(y,(function(i,r){r.resourceGroupDeleteStarted(n,t)}))}function yi(n,t){b(y,(function(i,r){r.resourceGroupDeleteFailed(n,t)}))}function pi(n,t,i){if(t){var r=t,u=r.subscriptionId||r.subscriptionID;return vt.Internal.validateResourceGroupName(n,u,i,null,(function(){return it(et(ui.buildResourceGroupIdFromSubscriptionAndResourceGroupName(u,n)),"HEAD",undefined,!1,i,st("validateResourceGroupName")).then((function(){return yt(ri.ResourceGroup.Validation.alreadyExistsMessage.format(r.displayName||r.
subscriptionName||u))}),(function(){return yt()}))}))}return vt.Internal.validateResourceGroupName(n,null,i)}function ti(n,t,i,r){return ft(e.callRaw(t,n,undefined,!1,undefined,i,r).then((function(n){var t=n.jqXHR;return{status:t.status,operationId:t.getResponseHeader("Location"),retryAfterInSeconds:parseInt(t.getResponseHeader("Retry-After"))}})),r)}function ft(n,t){var i=Q(n);return i.catch((function(n){var i=w(r.Azure.buildSimplifiedError(n&&n.jqXHR||n),t,!0),u=i.stack;if(t.extension&&t.extension!==g.ExtensionNames.Hubs)throw u?d.Diagnostics.createIgnoreUnhandledRejectionError(i.message,u):d.Diagnostics.createIgnoreUnhandledRejectionError(i.message);else throw i;}))}var lt=i.Azure,d=i.Base,g=d.Constants,ii=g.AssetNames,nt=g.ResourceTypes,p=d.Images.StatusBadge,ri=i.Resources.Strings,at=i.ViewModels,ui=at.Services.ResourceTypes,a=lt.ResourceManager.DeploymentStates,vt=lt.ResourceGroups,oi,ct,ut,si,hi,ci,y;t.resourceGroupsTypeLowerCase=l(nt.ResourceGroups);t.recentResourcesTypeLowerCase=l(nt.
RecentResources);t.allResourcesTypeLowerCase=l(nt.AllResources);t.subscriptionsTypeLowerCase=l(nt.Subscriptions);t.resourceGroupAssetType=ii.ResourceGroups;var tt=u.utils.peekObservable,w=i.extend,fi=404,b=i.forEachKey,et=e.resourceGroupApi,ei=e.resourceApi,it=e.call,v=c.getLocationDisplayNames,yt=at.getValidationResult,ot=Q.isRejected,st=function(n){return e.makeResourceManagerTelemetry(n+"ResourceMap")},pt=a.Running,wt=a.Deploying,bt=a.Accepted,kt=a.Canceled,dt=a.Failed,gt=a.Deleting,ni=a.Succeeded;t.deploymentStatusIconLookup={};t.deploymentStatusIconLookup[pt]=t.deploymentStatusIconLookup[wt]=t.deploymentStatusIconLookup[bt]=t.deploymentStatusIconLookup[a.Waiting]=p.Pending();t.deploymentStatusIconLookup[kt]=p.Canceled();t.deploymentStatusIconLookup[dt]=p.Error();t.deploymentStatusIconLookup[gt]=p.Disabled();t.deploymentStatusIconLookup[ni]=p.Success();t.deploymentStatusDisplayTextLookup={};t.deploymentStatusDisplayTextLookup[pt]=t.deploymentStatusDisplayTextLookup[wt]=f.deploymentRunningState;
t.deploymentStatusDisplayTextLookup[bt]=f.deploymentAcceptedState;t.deploymentStatusDisplayTextLookup[kt]=f.deploymentCanceledState;t.deploymentStatusDisplayTextLookup[dt]=f.deploymentFailedState;t.deploymentStatusDisplayTextLookup[gt]=f.deploymentDeletingState;t.deploymentStatusDisplayTextLookup[ni]=f.deploymentSucceededState;t.DeleteResourceGroupConfigType="ResourceGroupDeleteWarningPartViewModel_DeleteResourceGroupConfig";i.Data.Metadata.setTypeMetadata(t.DeleteResourceGroupConfigType,{name:t.DeleteResourceGroupConfigType,properties:{resourceGroup:null,resourceGroupName:null},entityType:!0}),(function(n){n.ResourceMap="ResourceMap";var t;(function(n){n.OpenedBlade="OpenedBlade";n.ResultOpened="ResultOpened"})(t=n.Action||(n.Action={}))})(oi=t.Telemetry||(t.Telemetry={}));ct=1e4;ut=(function(){function n(n){this._cache={};this._timeout=n}return n.prototype.store=function(n,t){return this._cache[n]={value:t,accessTime:Date.now()},t},n.prototype.remove=function(n){delete this._cache[n]},n.
prototype.fetch=function(n){var t=this._cache[n];if(t){if(t.accessTime>=Date.now()-this._timeout)return t.value;delete this._cache[n]}return},n.prototype.touch=function(n){var t=this._cache[n];t&&(t.accessTime=Date.now())},n.prototype.trim=function(){var n=this;this._trimPromise&&this._trimPromise.isPending||(this._trimPromise=Q.delay(100).then((function(){var t=Date.now()-n._timeout;b(n._cache,(function(i,r){r.accessTime<t&&delete n._cache[i]}))})))},n.prototype.flushCache=function(){this._cache={}},n.prototype.flushCacheWithPrefix=function(n){var t=this;b(this._cache,(function(i){i.startsWith(n)&&delete t._cache[i]}))},n})();t.Cache=ut,(function(n){function f(n,u,f,e,o){var c=k(n,u),h,l;return(i.trim(),h=i.fetch(c),h&&!ot(h)&&!e)?h:(l=ft(it(et(n,o),"GET",null,!1,u,f).then((function(t){return t.id=t.id||n,s.toResourceGroup(t)})),f),i.store(c,l).catch((function(i){i&&i.status===fi&&r.AssetManager.notifyAssetDeleted(t.resourceGroupAssetType,n,g.ExtensionNames.Hubs,u);throw i;})))}function h(n,t,i,r)
{return f(n,t,i,r).then((function(n){return v(t).then((function(t){return e(n,t)}))}))}function c(n,t,i,r){return f(n,t,i,r).then((function(n){var i=ht(n,!0);return v(t).then((function(n){return o(i,n)}))}))}function a(n){n?i.flushCacheWithPrefix(n+":"):i.flushCache()}function y(n,t){var r=k(n,t);i.remove(r)}function p(n,t){return ti("DELETE",et(n),t,st("deleteResourceGroup"))}function e(n,t){var i=n.location||"";return w({locationString:t[l(i)]||i},n)}function o(n,t){var i=tt(n.location)||"";return w({locationString:u.observable(t[l(i)]||i)},n)}var i=new ut(ct);n.getResourceGroup=f;n.getResourceGroupWithStrings=h;n.getResourceGroupObservableWithStrings=c;n.flushCache=a;n.uncacheResourceGroup=y;n.deleteResourceGroup=p;n.mapResourceGroupToResourceGroupWithStrings=e;n.mapResourceGroupObservableToResourceGroupObservableWithStrings=o})(si=t.ResourceGroupClient||(t.ResourceGroupClient={})),(function(n){function t(n,t){return ti("GET",n,t,st("getOperationResponse"))}n.getOperationResponse=t})(hi=t.ResourceManagerOperationsClient||
(t.ResourceManagerOperationsClient={})),(function(n){function r(n,t,i){var r=[];return ft(e.callWithContinuation([n],(function(n){r=r.concat(n.map(o.toResource).filter((function(n){return!!n})))}),(function(n){throw n;}),!1,t,i).then((function(){return r})),i)}function f(n,i,r,u){var e=k(n,i),f,s;return(t.trim(),f=t.fetch(e),f&&!ot(f)&&!u)?f:(s=ft(ei(n,i).then((function(t){return it(t,"GET",null,!1,i,r).then((function(t){return t.id=t.id||n,o.toResource(t)}))})),r),t.store(e,s))}function s(n,i,r,u,f){var o=k(n,r),e,s;return(t.trim(),e=t.fetch(o),e&&!ot(e)&&!f)?e:(s=Q(h.getAssetTypeViewModel(i,r)).then((function(t){var i=t.getProvidesResourcesContract();return Q(i&&i.getResource(n))})),t.store(o,s))}function p(n,t,r,u){return f(n,t,r,u).then((function(n){return v(t).then((function(t){return i(n,t)}))}))}function b(n,t,r,u,f){return s(n,t,r,u,f).then((function(n){return v(r).then((function(t){return i(n,t)}))}))}function d(n,t,i,r){return f(n,t,i,r).then((function(n){var i=ht(n,!0);return v(t).then((function(n){
return y(i,n)}))}))}function c(n,t,i){return rt((function(u){return r(u.resourcesInResourceGroupApi(n),t,i)}))}function g(n,t,i,u){return rt((function(f){var e=f.resourcesInSubscriptionApi(n,u);return u?it(e,"GET",null,!1,t,i).then((function(n){return n.value&&n.value.map(o.toResource).filter((function(n){return!!n}))})):r(e,t,i)}))}function nt(n,t,i){return rt((function(u){return r(u.classicResourcesInSubscriptionApi(n),t,i)}))}function et(n,t,r){return c(n,t,r).then((function(n){return v(t).then((function(t){return n.map((function(n){return i(n,t)}))}))}))}function a(n,t,i,u){return rt((function(f){return r(f.resourcesLinkedToResourceApi(n,t),i,u)}))}function st(n,t,r,u){return a(n,t,r,u).then((function(n){return v(r).then((function(t){return n.map((function(n){return i(n,t)}))}))}))}function lt(n,i){n?t.flushCacheWithPrefix(l(n+":"+(i||""))):t.flushCache()}function at(n,i){var r=k(n,i);t.remove(r)}function i(n,t){var i=n.location||"";return w({locationString:t[l(i)]||i,trimmedName:(n.name||n.id||"").split("/").
last()},n)}function y(n,t){var i=tt(n.location)||"";return w({locationString:u.observable(t[l(i)]||i),trimmedName:u.observable((tt(n.name)||tt(n.id)||"").split("/").last())},n)}var t=new ut(ct);n.getResource=f;n.getExtensionResource=s;n.getResourceWithStrings=p;n.getExtensionResourceWithStrings=b;n.getResourceObservableWithStrings=d;n.getResourcesInResourceGroup=c;n.getResourcesInSubscription=g;n.getClassicResourcesInSubscription=nt;n.getResourcesInResourceGroupWithStrings=et;n.getResourcesLinkedToResource=a;n.getResourcesLinkedToResourceWithStrings=st;n.flushCache=lt;n.uncacheResource=at;n.mapResourceToResourceWithStrings=i;n.mapResourceObservableToResourceObservableWithStrings=y})(ci=t.ResourceClient||(t.ResourceClient={}));y={};t.registerResourceGroupDeleteWatcher=li;t.unregisterResourceGroupDeleteWatcher=ai;t.notifyResourceGroupDeleting=vi;t.notifyResourceGroupDeleteFailed=yi;t.validateResourceGroupName=pi})(l||(l={})),l}));define("HubsExtension/Browse/BrowseCommon",["require","exports",
"f","i","o","ko","Fx/Composition/Selectable","FxHubs/MarketplaceRpc","FxHubs/RpcEndPoints","../_generated/BladeReferences","../_generated/ExtensionDefinition","../_generated/Microsoft_Azure_Marketplace/BladeReferences","../ArmHelpers/ArmApisStartup","../Common/CloudNameHelpers","../Common/HubsObservables","../Notifications/EventSubscriptionService","../ResourceMap/ResourceMapCommon"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){"use strict";var b;return (function(t){function u(n){return(n||"").toLowerCase()}function ct(n){return u(n).trim()}function ft(n,t){var i=ct(n);return!t||!t.length||t.some((function(n){return ct(n)===i}))}function bt(n,t){var i=ct(t&&t.name);return!n||u(n).split(" ").every((function(n){return i.indexOf(n)!==-1}))}function yi(n,t,i){var r=b.parseResourceDescriptor(t);return n.format({resourceId:nt(t),name:nt(r.resource),type:nt(r.type),provider:nt(r.provider),resourceGroup:nt(r.resourceGroup),subscriptionId:nt(r.subscription),locationId:nt(i)})}function pi(n){var t=n||
lt.client;return Q(s.Mru.getMruAssetsListEndPoint.invoke(t,it.Shell,null)).then((function(n){if(!wt){wt=!0;var t=n.map((function(n){return{assetType:n.resourceTypeAssetTypeInformation.assetType,assetId:n.id,extensionName:n.resourceTypeAssetTypeInformation.extensionName,cloudName:n.cloudName}}));return a.notifyIfResourcesDeleted(t).then((function(t){return t.forEach((function(t){n.remove(n.first((function(n){return d(n.id)&&d(t)&&b.compareResourceId(n.id,t)?!0:g(n.id)&&g(t)&&b.compareResourceGroupId(n.id,t)?!0:!1})))})),n}))}return n}))}function wi(n){ut.indexOf(n)!==-1?ai.warning("Tried to register an MRU view twice"):ut.push(n)}function bi(n){ut.indexOf(n)!==-1&&ut.remove(n)}function ki(){var n=Date.now(),t=pt+yt;ht||(ht=!0,Q.delay(Math.min(Math.max(n-t,0),yt)).then((function(){ut.forEach((function(n){return n.pingMruAssetsList()}));pt=Date.now();ht=!1})))}function kt(n,t){return function(i,u){var f=i.filter((function(n){return!n.isLocalEvent})).map((function(n){return{assetId:n.assetId,assetType:r.AssetManager.
resourceAssetType,extensionName:null,cloudName:u}}));f.length&&a.internalNotifyAssetDeleted(f,"The event service notified "+n+" deleted.",t)}}function di(n){var t=new ri;return t.attachEventWatch(w.allResourcesTypeLowerCase,{resourceGroupDeleted:kt("resource group",n),resourceDeleted:kt("resource",n)}),t}function ui(n,t,i,r){var f=new ci.PdlBladeReference(i,t,{parameters:r});return t&&u(t)!==u(c.definitionName)&&(f.cloudName=n),f}function gi(n,t){return Q(s.AssetTypes.mapAssetIdToDynamicSelectionEndPoint.invoke(lt.client,it.Shell,{assetTriplet:n,cloudName:t})).then((function(n){return ui(t,n.extension,n.detailBlade,n.detailBladeInputs)}))}function nr(n,t,i){var s=t.kind,r=t.scope,a=t.filter,h=t.excludedResourceTypes,v=t.selectedLocations,y=u(n.type),c=u(n.kind),f=h&&h[y],e,l,o;return f&&f===!0?!1:f&&f[c]===!0?!1:(e=u(s),l=e===vi?"":e,s&&u(l)!==c)?!1:(o=u(n.id),(at(r)||g(r)||d(r))&&!o.startsWith(u(r)+"/"))?!1:!r&&!rt(o)&&!i(n.id)?!1:bt(a,n)&&ft(n.location,v)}function tr(n,t,i){var r=t.scope,
e=t.filter,o=t.selectedLocations,f;return g(r)||d(r)?!1:(f=u(n.id),at(r)&&!f.startsWith(u(r)+"/"))?!1:!r&&!rt(f)&&!i(n.id)?!1:bt(e,n)&&ft(n.location,o)}var ot=i.Base,hi=ot.Diagnostics.Telemetry,lt=r.Rpc,it=ot.Constants,b=i.ViewModels.Services.ResourceTypes,ci=r.Composition.Selectable,k=i.Extension.ResourceRoutingType,li=window,ai=ot.Diagnostics.createLog(n),d=b.isResourceId,g=b.isResourceGroupId,rt=b.isTenantResource,at=b.isSubscriptionId,vt=r.Extension.CloudName.addToModel,st=a.filterSubscriptionsByScope,vi="(none)",yt=li.fx.environment.isDevelopmentMode?500:3e4,ut=[],nt=encodeURIComponent,pt=0,ht,wt,et,tt,fi,ei,oi,si;t.resourceGroupRefreshCommandCount=f.observable(0);t.buildInstanceLink=yi;t.getMruAssetsList=pi;t.registerMruView=wi;t.unregisterMruView=bi;t.pingMruAssetsList=ki;t.getCreateBlade=i.memoizeQ((function(n){var i=n.cloudName,a=n.resourceType,u=n.marketplaceItemId,t=n.marketplaceMenuItemId,y=n.listScope,k=n.listScopeLocation,d=n.onCreateFlowPromise,f=n.sourceBladeOrPartName||
c.BladeNames.resources,g,p,s,w;return u?(g={cloudName:i,extension:c.definitionName,detailBlade:c.BladeNames.noCreateFlowBlade,detailBladeInputs:vt(i,{marketplaceItemId:u})},p=n.createFlowPromise||Q(o.getCreateFlow({marketplaceGalleryItemId:u,launchingContext:{source:[f,a]},dontDiscardJourney:!0},i)),d&&d(p),s=new h.NoCreateFlowBladeReference(g.detailBladeInputs),p.then((function(n){if(n.isOldCreate)return hi.trace({action:"OldCreateFlowLaunched",source:f,data:{marketplaceItemId:u}}),s.parameters.notSupported=!0,Q.resolve(s);var r=n.bladeSelection.detailBladeInputs,t=new e.ParameterProviderBladeReference(n.bladeSelection.detailBlade,n.bladeSelection.extension,{parameters:r,supplyInitialData:function(){return{}},receiveResult:function(){return{}},supplyProviderConfig:function(){return r.internal_bladeCallerParams&&r.internal_bladeCallerParams.providerConfig}});return n.bladeSelection.extension===c.definitionName?t.parameters=vt(i,t.parameters):t.cloudName=i,Q(t)})).catch((function(){return Q(
s)}))):t?(w=void 0,w=b.isResourceGroupId(y)?t.indexOf("/")!==-1?new l.GalleryResultsListBladeReference({selectedSubMenuItemId:{menuItemId:t,dontDiscardJourney:!0,resourceGroup:y,resourceGroupLocation:k,launchingContext:{source:"AddResourceCommand"}}},null):new l.GalleryFeaturedMenuItemBladeReference({selectedMenuItemId:t,dontDiscardJourney:!0,resourceGroup:y,resourceGroupLocation:k,launchingContext:{source:"AddResourceCommand"}},null):t.indexOf("/")!==-1?new l.GalleryResultsListBladeReference({selectedSubMenuItemId:{menuItemId:t,dontDiscardJourney:!0,launchingContext:{source:f+" "+a}}},null):t===it.GalleryMenuItems.HomeMenuItem?v.addCloudNameToBladeReference(i,new r.Composition.Selectable.PdlBladeReference(it.BladeNames.Hubs.CreateHubBlade,it.ExtensionNames.Marketplace,{parameters:{"package":null,additionalConfig:null,dontDiscardJourney:!0,selectedMenuItemId:null,createLanding:null}})):new l.GalleryFeaturedMenuItemBladeReference({selectedMenuItemId:t,dontDiscardJourney:!0,launchingContext:
{source:f+" "+a}},null),Q(w)):void 0}));t.watchForResourceDeletes=di;var dt="/write",gt="microsoft.resources/subscriptions/resourcegroups/write",ni="/delete",ti="microsoft.resources/subscriptions/resourcegroups/delete",ii="succeeded",ri=(function(){function n(){}return n.prototype.attachEventWatch=function(n,t){var i,r,f;this.disposeEventWatcher();i=dt;r=ni;u(n)===w.resourceGroupsTypeLowerCase&&(i=gt,r=ti);f=function(n,t,i,r){return p.subscribeToArmEvent({source:null,operationNameRegex:n},(function(n,f){var e,o;r.resourceGroupCallback&&(e=n.filter((function(n){return u(n.status)===ii&&n.operationName===t&&b.isResourceGroupId(n.assetId)})),e.length&&r.resourceGroupCallback(e,f));r.resourceCallback&&(o=n.filter((function(n){return u(n.status)===ii&&n.operationName.endsWith(i)&&b.isResourceId(n.assetId)})),o.length&&r.resourceCallback(o,f))}),100)};(t.writeToResourceGroup||t.writeToResource)&&(this._writeEventSubscription=f(i,gt,dt,{resourceGroupCallback:t.writeToResourceGroup,resourceCallback:t.
writeToResource}));(t.resourceGroupDeleted||t.resourceDeleted)&&(this._deleteEventSubscription=f(r,ti,ni,{resourceGroupCallback:t.resourceGroupDeleted,resourceCallback:t.resourceDeleted}))},n.prototype.disposeEventWatcher=function(){this._writeEventSubscription&&p.removeArmEventSubscription(this._writeEventSubscription);this._writeEventSubscription=null;this._deleteEventSubscription&&p.removeArmEventSubscription(this._deleteEventSubscription);this._deleteEventSubscription=null},n})();t.ArmEventWatcher=ri;t.makeBladeReference=ui;t.mapAssetIdToBladeReference=gi;t.showResource=nr;t.showResourceGroup=tr;et={};tt=(function(){function n(){this._currentSubscriptionMap={}}return n.prototype._getResourcesWithUris=function(n,t){var f=this,e=n.sourceHandler,o=n.partialErrors,s=n.cloudName,h=n.telemetry,r=[];return Q(a.callBatchWithContinuation(t,(function(o,s){var h=i.makeArray(o);return t[s].addToMruItemMap&&i.extendArrayIntoMap(et,h,(function(n){return u(n.id)}),i.identity),e(n,h,f,r)}),(function(){return o(
!0)}),!1,s,h,!0)).then((function(){return r}))},n.prototype._addGetMruItem=function(n,t,i){if(g(n.id))t.push(Q(a.resourceGroupApi(n.id)));else if(rt(n.id)||d(n.id))switch(n.resourceTypeAssetTypeInformation.routingType||k.Default){case k.Default:case k.ProviderProxy:case k.Tenant:t.push(Q(a.resourceApi(n.id,i.cloudName)))}},n.prototype._processMruView=function(n,t,i){var r=this,f=n.mruView,s=n.sourceHandler,h=n.partialErrors,e={},o=[];return f&&f().forEach((function(f){if(!i||i(f)){var h=f.id?u(f.id):"";e[h]||(e[h]=!0,et[h]?s(n,[et[h]],r,t):r._addGetMruItem(f,o,n))}})),Q.allSettled(o).then((function(n){var t=n.filter((function(n){return n.state==="fulfilled"})).map((function(n){return{uri:n.value,responseIsArrayType:!1,addToMruItemMap:!0}}));return h(n.some((function(n){return n.state!=="fulfilled"}))),t}))},n.prototype._getSubscriptions=function(n,t){var i=n.scope,r=n.cloudName,u=n.selectedSubscriptions,e;return i?(e=b.parseResourceManagerDescriptor(i),Q(f.observable([e.subscription]))):u?Q(f.pureComputed(
(function(){return u().map((function(n){return n.subscriptionId}))}))):t?Q(y.getSubscriptions(r).then((function(n){return f.observable(n.map((function(n){return n.subscriptionId})))}))):Q(y.getSelectedSubscriptions(r)).then((function(n){return f.pureComputed((function(){return n().map((function(n){return n.subscriptionId}))}))}))},n.prototype._updateSubscriptionMap=function(n){this._currentSubscriptionMap={};i.extendArrayIntoMap(this._currentSubscriptionMap,n,u,i.wrap(!0))},n.prototype._buildResourceProcessor=function(n,t,r,e,o){var s=this,l=t.loading,h=t.mruView,c=f.observable([]);return this._getSubscriptions(t,r).then((function(r){var f=function(){var n=[];s._processMruView(t,n,e).then((function(f){s._getResourcesWithUris(t,i.union(f,o&&o(r())||[])).then((function(t){function f(n){var t=n.id?u(n.id):"";i[t]||(r.push(n),i[t]=!0)}var i={},r=[];n.forEach(f);t.forEach(f);c(r)})).finally((function(){l(!1)}))}))};return r.subscribeAndRun(n,(function(n){s._updateSubscriptionMap(n);f()})),h&&h.subscribe(n,(function(
){f()})),Q(c)}))},n.prototype.matchSubscription=function(n){var t=b.parseResourceManagerDescriptor(n);return this._currentSubscriptionMap[u(t.subscription)]},n})();t.BaseResourcesSource=tt;fi=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getResources=function(n,t){var i=t.scope,r=t.filter,u=t.selectedTypes,f=t.selectedLocations,e=t.selectedResourceGroups;return this._buildResourceProcessor(n,t,!1,(function(n){var t=n.resourceTypeAssetTypeInformation;return d(n.id)&&t&&(t.routingType||k.Default)===k.Default}),(function(n){for(var o=[],s=function(t){var s=[],h=st(n.slice(t,t+20),i,(function(n){s.push(n)}));h.length&&o.push({uri:a.resourcesAcrossSubscriptionsApi(h,u,r,s,f,e),responseIsArrayType:!0})},t=0;t<n.length;t+=20)s(t);return o}))},t})(tt);t.AllResourcesSource=fi;ei=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getResources=function(n,t){var i=t.scope;return this._buildResourceProcessor(n,t,!1,(function(n){return g(n.id)})
,(function(n){var t=[],r=st(n,i);return t.push.apply(t,r.map((function(n){return{uri:a.resourceGroupsInSubscriptionApi(n),responseIsArrayType:!0}}))),t}))},t})(tt);t.ResourceGroupsSource=ei;oi=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getResources=function(n,t){return this._buildResourceProcessor(n,t,!0,(function(n){return d(n.id)||rt(n.id)||g(n.id)}))},t})(tt);t.RecentResourcesSource=oi;si=(function(n){function t(t){n.call(this);this.usesSelectedSubs=!0;this._assetTypes=t;this.usesSelectedSubs=this._assetTypes.some((function(n){return n.routingType!==k.Tenant}))}return __extends(t,n),t.prototype.getResources=function(n,t){var f=this,e=t.filter,o=t.scope,h=t.selectedTypes,s=t.selectedLocations,r=t.selectedResourceGroups;return this._buildResourceProcessor(n,t,!1,(function(n){var t=n.resourceTypeAssetTypeInformation&&n.resourceTypeAssetTypeInformation.lowerCaseResourceType;return(d(n.id)||rt(n.id))&&t&&f._assetTypes.some((function(n){return n.lowerCaseResourceType===
t}))}),(function(n){var t=[],l=f._assetTypes.filter((function(n){return(n.routingType||k.Default)===k.Default&&ft(n.resourceType,h)})).map((function(n){return n.resourceType})),v,c,y;if(l.length)for(v=function(i){var u=[],f=st(n.slice(i,i+20),o,(function(n){u.push(n)}));f.length&&t.push({uri:a.resourcesAcrossSubscriptionsApi(f,l,e,u,s,r),responseIsArrayType:!0})},c=0;c<n.length;c+=20)v(c);return y=f._assetTypes.filter((function(n){return n.routingType===k.ProviderProxy&&ft(n.resourceType,h)})),y.forEach((function(f){for(var c=function(h){var c=[],l=a.filterSubscriptionsByScopeByResourceGroup(n.slice(h,h+20),o,(function(n){if(r&&r.length){var t=u(n);r.first((function(n){return u(n)===t}))&&c.push(n)}else c.push(n)}));o||(c=i.union(c,r));l.length&&l.forEach((function(n){t.push({uri:a.providerProxyResourcesApi(n,f,e,c,s),responseIsArrayType:!0})}))},h=0;h<n.length;h+=20)c(h)})),f._assetTypes.filter((function(n){return n.routingType===k.Tenant})).forEach((function(n){t.push({uri:a.tenantResourcesApi({resourceTypeName:
n.topLevelTenantAlias,apiVersion:n.apiVersion},e,null,s),responseIsArrayType:!0})})),t}))},t})(tt);t.ResourcesSource=si})(b||(b={})),b}));define("HubsExtension/BrowseResource/BrowseResourceCommon",["require","exports","f","../_generated/ExtensionDefinition","../ArmHelpers/ArmApisStartup","../Browse/BrowseCommon","../Common/CloudNameHelpers","../ResourceMap/ResourceMapCommon"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function w(n,t){return t?n.name.toLowerCase().indexOf(t.trim().toLowerCase())!==-1:!0}function b(n,r){return t.isResourceGroupId(n)&&t.isResourceGroupId(r)?t.compareResourceGroupId(n,r):t.isResourceId(n)&&t.isResourceId(r)?t.compareResourceId(n,r):i.toSortedString(n)===i.toSortedString(r)}function l(n,t,i){n.storeResource(i);i.kind&&n.storeKind(i.kind);n.storeDefaultIcon(t)}function k(n){var e=n.mruEntry,i=e.id,r=e.resourceTypeAssetTypeInformation,f;r.resourceType?(f=void 0,f=t.isResourceId(i)?Q(i):y.mapAssetIdToResourceId({extensionName:r.extensionName,assetType:
r.assetType,assetId:i}),n.storeKindPromise(f.then((function(i){if(t.isResourceId(i)){var r=i.toLowerCase(),f=s.fetch(r);if(f){l(n,i,f);return}return a.getPromiseFromPool(n).then((function(n){var t=n.value,f=u.makeResourceManagerTelemetry("Browse.getKindForMru:"+t.sourceKeyForTelemetry);return o.ResourceClient.getResource(i,t.mruEntry.cloudName,f).then((function(n){s.store(r,n);l(t,i,n)})).catch((function(){t.storeDefaultIcon()})).finally((function(){n.release()}))}))}n.storeDefaultIcon()})).catch((function(){n.storeDefaultIcon()})))):n.storeDefaultIcon()}function d(n,t,i,r){return r===void 0&&(r=!0),e.addCloudNameToDynamicSelection(n,{cloudName:n,extension:p,detailBlade:r?h.resourceMenuBlade:h.resourceProperties,detailBladeInputs:{id:t,referrerInfo:i}})}function g(n){return n&&n.resourceType&&!n.bladeName&&n.browseType!==4}var v=i.ViewModels,t=v.Services.ResourceTypes,y=i.Assets,h=r.BladeNames,p=r.definitionName,c,s,a;n.filterMruEntry=w;n.matchBrowseItems=b;c=72e5;s=new o.Cache(c);f.registerMruView(
{pingMruAssetsList:function(){s.trim()}});n.getResourceKindForMruItem=k,(function(n){function i(n){return t>=r?Q.delay(100).then((function(){return i(n)})):(++t,Q({value:n,release:function(){--t}}))}var t=0,r=8;n.getPromiseFromPool=i})(a=n.PromisePool||(n.PromisePool={}));n.makeResourceBladePromise=d;n.checkNoBladeName=g})(s||(s={})),s}));define("HubsExtension/Common/UserSettingsHelper",["require","exports","f","i","o","FxHubs/CloudNameCommon","FxHubs/HubsSettingsSchema"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function v(n){return f.removeCloudNameFromId(n)}function s(n,t){return f.addCloudNameToId(n,t,!1)}var t=i.Base,c=t.Diagnostics,l=r.Extension,a=r.Rpc,o=t.Constants.Shell,h;n.addCloudNameToUserSettingKey=s;h=(function(){function n(){}return n.initialize=function(t){if(n._rpcClient)throw new Error("rpcClient already initialized.");n._rpcClient=t||a.client},n.readSettings=function(t){return e.readHubsUserSettings.invoke(n._rpcClient,o,t)},n.writeSettings=function(t,i)
{return e.writeHubsUserSettings.invoke(n._rpcClient,o,{settings:t,priority:i})},n.readSettingsRpc=function(t,i){var f=l.getDescriptor(i.srcWindowId).cloudName,o=t.map((function(n){return s(n,f)})),r=t.first((function(n){return!~e.allowedUserSettingsKeys.indexOf(n)}));if(r)throw c.createIgnoreUnhandledRejectionError(i.srcWindowId+" is not allowed to read the user setting "+r+".");return n.readSettings(o).then((function(n){var t={};return u.getOwnPropertyNames(n).forEach((function(i){t[v(i)]=n[i]})),t}))},n})();n.UserSettingsHelper=h})(o||(o={})),o}))